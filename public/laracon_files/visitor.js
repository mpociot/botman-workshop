/*! 2018-07-14 10:13:33 AM */function AbstractChannel(){this.constructor.apply(this,arguments)}function PortIncomingChannel(a,b,c){function d(b){a.send(b)}function e(){c.port.removeListener(b+"SendData",d),c.port.removeListener(b+"Close",e),a.close()}return b=b||"",c=c||self,c.port.on(b+"SendData",d),c.port.on(b+"Close",e),a.rawdata=!0,a.onmessage=function(a){c.port.emit(b+"IncomingData",a)},a.onopen=function(){c.port.emit(b+"Opened")},a.onclose=function(){c.port.emit(b+"Closed")},{close:e}}function EchoProxy(a,b,c){function d(a,b,c){function d(){for(var b=[a],d=0;d<arguments.length;d++)b.push(arguments[d]);c.port.emit.apply(c.port,b)}b.port.on(a,d),f.push([b.port,a,d])}function e(){for(var a=0;a<f.length;a++)f[a][0].removeListener(f[a][1],f[a][2])}c=c||"";var f=[];return d(c+"IncomingData",b,a),d(c+"Opened",b,a),d(c+"Closed",b,a),d(c+"SendData",a,b),d(c+"Close",a,b),{close:e,send:function(a){"string"!=typeof a&&(a=JSON.stringify(a)),b.port.emit(c+"SendData",a)}}}function getElementPosition(a){for(var b=0,c=0;a;)a.offsetTop&&(b+=a.offsetTop),a.offsetLeft&&(c+=a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}function doOnLoad(a){"complete"==this.document.readyState?a():window.addEventListener("load",a,!1)}function getScreenRange(a){a=a||document;for(var b=a.defaultView,c=b.pageYOffset,d=c+b.innerHeight,e=iterNodes(document.body),f=!0,g=null,h=null,i=0,j=0;;){var k=e();if(!k)break;if(!k.jsmirrorHide&&k.jsmirrorId&&k.nodeType==document.ELEMENT_NODE){for(var l=0,m=k;m;)m.offsetTop&&(l+=m.offsetTop),m=m.offsetParent;if(f){if(l>c){g=h=k,f=!1,i=c-l;continue}}else{if(l+k.clientHeight>d)break;j=d-(l+k.clientHeight),h=k}}}return{start:g,end:h,startOffsetTop:i,endOffsetTop:j}}function iterNodes(a){var b=[[a,null]],c=0;return function(){if(!b[c])return null;var a=b[c];if(null===a[1]){var d=a[0];if(!d)throw"weird item in stack";d.nodeType==this.document.ELEMENT_NODE&&d.childNodes.length?b[c]=[d.childNodes,0]:(b[c]=null,c--)}else{var d=a[0][a[1]];if(!d)throw"weird item in stack";d.nodeType==this.document.ELEMENT_NODE&&d.childNodes.length?a[1]>=a[0].length-1?b[c]=[d.childNodes,0]:(a[1]++,c++,b[c]=[d.childNodes,0]):a[1]>=a[0].length-1?(b[c]=null,c--):a[1]++}return d}}function expandRange(a){function b(a){if(c[a].nodeType==this.document.TEXT_NODE)for(;;){var b=c[a].previousSibling;if(null===b){c[a]=c[a].parentNode,c[a+"Text"]="inner";break}if(b.nodeType==this.document.ELEMENT_NODE){c[a]=b,c[a+"Text"]="after";break}b.nodeType==this.document.TEXT_NODE&&(c[a]=b,c[a+"Offset"]+=b.nodeValue.length)}}var c={start:a.startContainer,end:a.endContainer,startOffset:a.startOffset,endOffset:a.endOffset,startText:!1,endText:!1};return b("start"),b("end"),c}function showRange(a,b){var c;if(a.start==a.end&&"inner"==a.startText&&"inner"==a.endText){return void b(splitTextBetween(a.start,a.startOffset,a.endOffset))}"inner"==a.startText?a.start=splitTextAfter(a.start.childNodes[0],a.startOffset):"after"==a.startText?a.start=splitTextAfter(a.start.nextSibling,a.startOffset):a.startOffset&&(c=a.start.childNodes[a.startOffset])&&(a.start=c),"inner"==a.endText?a.end=splitTextBefore(a.end.childNodes[0],a.endOffset):"after"==a.endText?a.end=splitTextBefore(a.end.nextSibling,a.endOffset):a.endOffset&&(c=a.end.childNodes[a.endOffset])&&(a.end=c);for(var d=a.start;;){if(b(d),null===(d=getNextElement(d))){OneClickCbUtils.cobrowseLog(OneClickCbUtils.WARN,"pos fell out to null",a.start);break}for(;containsElement(d,a.end);)d=d.childNodes[0];if(d==a.end){b(d);break}}}function containsElement(a,b){if(a==b)return!1;if(a.nodeType!=this.document.ELEMENT_NODE)return!1;for(var c=0;c<a.childNodes.length;c++){if(a.childNodes[c]==b)return!0;if(containsElement(a.childNodes[c],b))return!0}return!1}function getNextElement(a){if(a.childNodes&&a.childNodes.length)return a.childNodes[0];for(;!a.nextSibling;)if(!(a=a.parentNode))return OneClickCbUtils.cobrowseLog(OneClickCbUtils.WARN,"no parent"),null;return a.nextSibling}function splitTextBefore(a,b){var c=this.document.createElement("span");c.artificialRangeElement=!0;var d="";if(a.nodeType!=this.document.TEXT_NODE)throw"Unexpected node: "+a;for(;a.nodeValue.length<b;){d+=a.nodeValue,b-=a.nodeValue.length;var e=a;a=a.nextSibling,e.parentNode.removeChild(e)}d+=a.nodeValue.substr(0,b);var f=a.nodeValue.substr(b,a.nodeValue.length-b);return a.nodeValue=f,c.appendChild(this.document.createTextNode(d)),a.parentNode.insertBefore(c,a),c}function splitTextAfter(a,b){for(var c="";a.nodeValue.length<b;){if(c+=a.nodeValue,b-=a.nodeValue.length,!a.nextSibling){OneClickCbUtils.cobrowseLog(OneClickCbUtils.WARN,"Could not get "+b+"chars from element",a);break}a=a.nextSibling}var d=a.nodeValue.substr(b,a.nodeValue.length-b);a.nodeValue=a.nodeValue.substr(0,b);var e=this.document.createElement("span");e.artificialRangeElement=!0;var f=e;e.appendChild(this.document.createTextNode(d)),a.parentNode.insertBefore(e,a.nextSibling);for(var g=e.nextSibling;g;)if(g.nodeType==this.document.TEXT_NODE)if(e){var h=g;g=g.nextSibling,e.appendChild(h)}else{e=this.document.createElement("span"),e.artificialRangeElement=!0;var h=g;g=g.nextSibling,h.parentNode.insertBefore(e,h),e.appendChild(h)}else e=null,g=g.nextSibling;return f}function splitTextBetween(a,b,c){if(b>c)throw"Unexpected range: "+b+" to "+c;for(var d=c-b,e="",f="",g="",h=!0,i=!1,j=[],k=0;k<a.childNodes.length;k++){var l=a.childNodes[k];if(l.nodeType==this.document.TEXT_NODE){j.push(l);var m=l.nodeValue;h&&m.length<b?(e+=m,b-=m.length):h&&(e+=m.substr(0,b),h=!1,m=m.substr(b,m.length-b)),h||i||(m.length<d?(g+=m,d-=m.length):(g+=m.substr(0,d),m=m.substr(d,m.length-d),i=!0)),i&&(f+=m)}else{if(i)break;OneClickCbUtils.cobrowseLog(OneClickCbUtils.WARN,"Unexpected element",l)}}var n=this.document.createTextNode(e),o=this.document.createTextNode(f),p=this.document.createElement("span");for(p.artificialRangeElement=!0,p.appendChild(this.document.createTextNode(g)),k=0;k<j.length;k++)a.removeChild(j[k]);return a.insertBefore(o,a.childNodes[0]),a.insertBefore(p,o),a.insertBefore(n,p),p}function temporaryHighlight(a,b,c,d){function e(){null!==i&&(f.body.removeChild(i),i=null)}var f=a.ownerDocument;b=b||0,c=c||0;var g=100,h=getElementPosition(a),i=this.document.createElement("div");return i.style.backgroundColor="transparent",i.style.border="2px solid #f00",i.style.position="absolute",i.style.width=g+"px",i.style.height=g+"px",i.style.borderRadius=g/2+"px",i.style.top=h.top+b-g/2+"px",i.style.left=h.left+c-g/2+"px",i.jsmirrorHide=!0,f.body.appendChild(i),setTimeout(e,TEMPORARY_HIGHLIGHT_DELAY),e}function binder(a,b,c){function d(){try{var d=a.apply(b||this,arguments)}catch(e){throw console.warn(c+"() raised:",e+""),e}return void 0!==d&&console.log(c+"() returned:",JSON.stringify(d)),d}var c=a.name;return d}function adaptCanvas(){try{dw=chatjQuery(window).width(),dh=chatjQuery(window).height(),chatjQuery("#oneclick-canvas-wrapper").width(dw).height(dh),resizeCanvas("#oneclick-annotation-canvas",dw,dh),resizeCanvas("#oneclick-background-canvas",dw,dh)}catch(a){console.log(a)}}function windowWidthHeightListener(){var a=OneClickCbUtils.master;width=chatjQuery(window).width(),height=chatjQuery(window).height(),!a||a.windowTimeout||a.windowWidth==width&&a.windowHeight==height||(adaptCanvas(),a.send({type:"window",body:{window:{w:width,h:height}}}),a.windowWidth=width,a.windowHeight=height,a.windowTimeout=setTimeout(function(){a.windowTimeout=null},1e3))}function resizeCanvas(a,b,c){var d=chatjQuery(a);if(d.length){var e=d[0],f=e.width,g=e.height,h=e.getContext("2d"),i=h.getImageData(0,0,f,g);d.prop({width:b-4,height:c-4}),h.putImageData(i,0,0),h.scale(b/f,c/g)}}function createCanvas(a,b,c){if(window.LIVECHAT_SUPPORT&&(b=1051),!document.getElementById(a))return canvas=document.createElement("canvas"),canvas.id=a,canvas.width=chatjQuery(document).width(),canvas.height=chatjQuery(document).height(),canvas.style.display=c,canvas.style.zIndex=b,canvas.style.position="absolute",canvas.style.top="0px",canvas.style.left="0px",document.body.appendChild(canvas),canvas}function Master(a){this.room=OneClickCbUtils.getRoom(),this.srcId=OneClickCbUtils.generateId(),this.cbMaster=OneClickCbUtils.getMaster(!0),this.helloComplete=!1,session=OneClickCbUtils.getSessionParameters(),this.name=session.name,this.role=session.role,this.viewerId=session.viewerId,this.sdata=session.sdata,this.siteId=session.siteId,this.chatId=session.chatId,this.channel=new SocketIoChannel(this.room,this.role,this.viewerId,this.sdata,this.siteId,this.chatId),this.channel.onmessage=this.processCommand,this.document=a,ELEMENT_NODE=this.document.ELEMENT_NODE,this.elements={},this.mouse={x:0,y:0},this.mouseTimeout=null;var b=this;this.mouseEventListenerCallback=function(a){b.mouseEventListener(a)},Freeze.eventListenerWrapper(a,"mousemove",this.mouseEventListenerCallback,!1),this.scrollTop=this.scrollTopGS(),this.scrollLeft=this.scrollLeftGS(),this.scrollEventListenerCallback=function(b){-1==Freeze.scrolledElements.indexOf(a)&&Freeze.scrolledElements.push(a)},Freeze.eventListenerWrapper(a,"scroll",this.scrollEventListenerCallback,!1),Freeze.elementTracker=this,this.sendDocInterval=setInterval(binder(this.sendDoc,this),1e3),this.send({type:"masterHello"}),this.sendMasterHelloTimeout=setInterval(binder(this.sendMasterHello,this),1e3),this.send({type:"href",body:{href:location.href}}),this.send({type:"cursor",body:{cursor:{position:this.mouse,name:this.name}}}),this.scrollEventListener(),windowWidthHeightListener(),this.cbMaster?cbBlock="none":cbBlock="block","complete"==a.readyState?(createCanvas("cb-block-canvas","99990",cbBlock),chatjQuery(window).resize(windowWidthHeightListener)):(Freeze.eventListenerWrapper(window,"load",function(){OneClickCbUtils.isCobrowseActive()&&createCanvas("cb-block-canvas","99990",cbBlock)},!1),chatjQuery(a).ready(function(){windowWidthHeightListener(),chatjQuery(window).resize(windowWidthHeightListener)})),this.displayClickWrapper=function(a){OneClickCbUtils.master&&OneClickCbUtils.master.displayClick(a)},Freeze.eventListenerWrapper(a,"click",this.displayClickWrapper,!1),OneClickCbUtils.safeSessionSetItem("1click-cobrowsing","true"),this.currentFaultCount=0,this.maxFaultCount=3,this.faultRecoverTimeOut=null,this.noReflectionElements=[],this.syncHRefCount=0,this.maxSyncHRef=5}window.livechat=window.livechat||{},window.livechat.VERSION="1.0.0",Object.defineProperty(Array.prototype,"nativeReduce",{enumerable:!1,value:nativeReduce});var nativeReduce=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;e<d&&!e in c;)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;e<d;e++)e in c&&(b=a(b,c[e],e,c));return b},livechat=livechat||{};if(window.io&&(window.previous_io=window.io),function(a){var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.io=a()}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c||a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id;return b.forceNew||b["force new connection"]||!1===b.multiplex?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=!1!==b.autoConnect,this.autoConnect&&this.open()}var e=(a("./url"),a("engine.io-client")),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=(a("object-component"),a("debug")("socket.io-client:manager")),l=a("indexof"),m=a("backo2");b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose")))},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new f(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){b.id=c.engine.id,~l(c.connected,b)||c.connected.push(b)})}return b},d.prototype.destroy=function(a){var b=l(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],5:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){j("calling ack %s with %j",a.id,a.data),this.acks[a.id].apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(a,b,c){(function(c){function d(a,b){var d=a,b=b||c.location;return null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],8:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],9:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],10:[function(a,b,c){function d(a){return d.enabled(a)?function(b){b=e(b);var c=new Date,f=c-(d[a]||c);d[a]=c,b=a+" "+b+" +"+d.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function e(a){return a instanceof Error?a.stack||a.message:a}b.exports=d,d.names=[],d.skips=[],d.enable=function(a){try{localStorage.debug=a}catch(f){}for(var b=(a||"").split(/[\s,]+/),c=b.length,e=0;e<c;e++)a=b[e].replace("*",".*?"),"-"===a[0]?d.skips.push(new RegExp("^"+a.substr(1)+"$")):d.names.push(new RegExp("^"+a+"$"))},d.disable=function(){d.enable("")},d.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},d.enabled=function(a){for(var b=0,c=d.skips.length;b<c;b++)if(d.skips[b].test(a))return!1;for(var b=0,c=d.names.length;b<c;b++)if(d.names[b].test(a))return!0;return!1};try{window.localStorage&&d.enable(localStorage.debug)}catch(f){}},{}],11:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":12}],12:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length?b.port=e.pop():b.port||(b.port=this.secure?"443":"80")}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=b.rejectUnauthorized||null,this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);return b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0==this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";var a;try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},
d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.timestamps=0,d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(a,b,c){(function(b){function d(a){var c=!1,d=!1,h=!1!==a.jsonp;if(b.location){var i="https:"==location.protocol,j=location.port;j||(j=i?443:80),c=a.hostname!=location.hostname||j!=a.port,d=a.secure!=i}if(a.xdomain=c,a.xscheme=d,"open"in new e(a)&&!a.forceJSONP)return new f(a);if(!h)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(b){e.onError("jsonp polling iframe removal error",b)}try{var a='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(a)}catch(b){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{if(l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async),this.supportsBinary&&(b.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in b&&(b.withCredentials=!0),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4==b.readyState&&(200==b.status||1223==b.status?d.onLoad():setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(e){return void setTimeout(function(){d.onError(e)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(a,b,c){function d(a){var b=a&&a.forceBase64;j&&!b||(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("debug")("engine.io-client:polling");b.exports=d;var j=function(){return null!=new(a("xmlhttprequest"))({xdomain:!1}).responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){i("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(i("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){i("pre-pause polling complete"),--d||b()})),this.writable||(i("we are currently writing - waiting to pause"),d++,this.once("drain",function(){i("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){i("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;i("polling got data %s",a);var c=function(a,c,d){if("opening"==b.readyState&&b.onOpen(),"close"==a.type)return b.onClose(),!1;b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():i('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){i("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(i("transport open - closing"),a()):(i("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+e.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(a,b,c){function d(a){a&&a.forceBase64&&(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("debug")("engine.io-client:websocket"),j=a("ws");b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent};b.pfx=this.pfx,b.key=this.key,b.passphrase=this.passphrase,b.cert=this.cert,b.ca=this.ca,b.ciphers=this.ciphers,b.rejectUnauthorized=this.rejectUnauthorized,this.ws=new j(a,void 0,b),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var d=0,e=a.length;d<e;d++)f.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){i("websocket closed before onclose event")}});setTimeout(b,0)},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},d.prototype.check=function(){return!(!j||"__initialize"in j&&this.name===d.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(a,b,c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":40}],21:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],22:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function h(){var a;try{a=localStorage.debug}catch(b){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":23}],23:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g)),(e.log||c.log||console.log.bind(console)).apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:24}],24:[function(a,b,c){function d(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"h":return c*j;case"minutes":case"minute":case"m":return c*i;case"seconds":case"second":case"s":return c*h;case"ms":return c}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],25:[function(a,b,c){(function(b){function d(a,b){return b("b"+c.packets[a.type]+a.data.data)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=r[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(q)return f(a,b,d);var e=new Uint8Array(1);return e[0]=r[a.type],d(new u([e.buffer,a.data]))}function h(a,b,c){for(var d=new Array(a.length),e=m(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var i=a("./keys"),j=a("has-binary"),k=a("arraybuffer.slice"),l=a("base64-arraybuffer"),m=a("after"),n=a("utf8"),o=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),q=o||p;c.protocol=3;var r=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=i(r),t={type:"error",data:"parser error"},u=a("blob");c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(u&&i instanceof b.Blob)return g(a,c,h);if(i&&i.base64)return d(a,h);var j=r[a.type];return void 0!==a.data&&(j+=f?n.encode(String(a.data)):String(a.data)),h(""+j)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(u&&a.data instanceof u){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(k){for(var h=new Uint8Array(a.data),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h[j];g=String.fromCharCode.apply(null,i)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=n.decode(a)}catch(h){return t}var e=a.charAt(0);return Number(e)==e&&s[e]?a.length>1?{type:s[e],data:a.substring(1)}:{type:s[e]}:t}var f=new Uint8Array(a),e=f[0],g=k(a,1);return u&&"blob"===b&&(g=new u([g])),{type:s[e],data:g}},c.decodeBase64Packet=function(a,c){var d=s[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=l.decode(a.substr(1));return"blob"===c&&u&&(e=new u([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,!!g&&b,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=j(a);return b&&g?u&&!q?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(t,0,1);for(var f,g,h="",i=0,j=a.length;i<j;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(t,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(t,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),t.type==e.type&&t.data==e.data)return d(t,0,1);if(!1===d(e,i+f,j))return}i+=f,h=""}}return""!=h?d(t,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}if(!a.length)return b(new ArrayBuffer(0));h(a,d,function(a,c){var d=c.nativeReduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}e[f++]=b?0:1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)})},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,u){var i=new u([c.buffer,h.buffer,a]);b(null,i)}})}h(a,d,function(a,c){return b(new u(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(t,0,1);e=k(e,2+j.length),j=parseInt(j);var m=k(e,0,j);if(i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(p){var n=new Uint8Array(m);m="";for(var l=0;l<n.length;l++)m+=String.fromCharCode(n[l])}f.push(m),e=k(e,j)}var o=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,o)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],27:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],28:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(b<0&&(b+=d),c<0&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;g<c;g++,h++)f[h]=e[g];return f.buffer}},{}],29:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3==2?f=f.substring(0,f.length-1)+"=":e%3==1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;c<i;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(a,b,c){(function(a){function c(a,b){b=b||{};for(var c=new d,e=0;e<a.length;e++)c.append(a[e]);return b.type?c.getBlob(b.type):c.getBlob()}var d=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,e=function(){try{return 2==new Blob(["hi"]).size}catch(a){return!1}}(),f=d&&d.prototype.append&&d.prototype.getBlob;b.exports=function(){return e?a.Blob:f?c:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(a.hasOwnProperty(f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:32}],32:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],33:[function(b,c,d){(function(b){!function(e){function f(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=t(b>>>10&1023|55296),b=56320|1023&b),e+=t(b);return e}function h(a,b){return t(a>>b&63|128)}function i(a){if(0==(4294967168&a))return t(a);var b="";return 0==(4294965248&a)?b=t(a>>6&31|192):0==(4294901760&a)?(b=t(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=t(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=t(63&a|128)}function j(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=i(b);return g}function k(){if(s>=r)throw Error("Invalid byte index");var a=255&q[s];if(s++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(a=255&q[s],s++,0==(128&a))return a;if(192==(224&a)){var b=k();if((e=(31&a)<<6|b)>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),(e=(15&a)<<12|b<<6|c)>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),(e=(15&a)<<18|b<<12|c<<6|d)>=65536&&e<=1114111))return e;throw Error("Invalid UTF-8 detected")}function m(a){q=f(a),r=q.length,s=0;for(var b,c=[];!1!==(b=l());)c.push(b);return g(c)}var n="object"==typeof d&&d,o="object"==typeof c&&c&&c.exports==n&&c,p="object"==typeof b&&b;p.global!==p&&p.window!==p||(e=p);var q,r,s,t=String.fromCharCode,u={version:"2.0.0",encode:j,decode:m};if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return u});else if(n&&!n.nodeType)if(o)o.exports=u;else{var v={},w=v.hasOwnProperty;for(var x in u)w.call(u,x)&&(n[x]=u[x])}else e.utf8=u}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;d<e;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],36:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");-1!=c&&-1!=f&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return-1!=c&&-1!=f&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],37:[function(a,b,c){function d(a,b,c){return b?new f(a,b):new f(a)}var e=function(){return this}(),f=e.WebSocket||e.MozWebSocket;b.exports=f?d:null,f&&(d.prototype=f.prototype)},{}],38:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],39:[function(a,b,c){b.exports=a(32)},{}],40:[function(a,b,c){var d=a("global");try{b.exports="XMLHttpRequest"in d&&"withCredentials"in new d.XMLHttpRequest}catch(e){b.exports=!1}},{global:41}],41:[function(a,b,c){b.exports=function(){return this}()},{}],42:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],43:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(a[c]);return b},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],44:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){
for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c}},{}],45:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){return b[a.num]}if(d(a)){for(var e=0;e<a.length;e++)a[e]=c(a[e]);return a}if(a&&"object"==typeof a){for(var f in a)a[f]=c(a[f]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(h){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{b([e(a)])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(a,b,c){b.exports=a(32)},{}],49:[function(b,c,d){!function(b){function c(a){if(c[a]!==g)return c[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=c("json-stringify")&&c("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var f=k.stringify,i="function"==typeof f&&l;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===f(0)&&"0"===f(new Number)&&'""'==f(new String)&&f(h)===g&&f(g)===g&&f()===g&&"1"===f(d)&&"[1]"==f([d])&&"[null]"==f([g])&&"null"==f(null)&&"[null,null,null]"==f([g,h,null])&&f({a:[d,!0,!1,null,"\0\b\n\f\r "]})==e&&"1"===f(null,d)&&"[\n 1,\n 2\n]"==f([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==f(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==f(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==f(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==f(new Date(-1))}catch(n){i=!1}}b=i}if("json-parse"==a){var j=k.parse;if("function"==typeof j)try{if(0===j("0")&&!j(!1)){d=j(e);var m=5==d.a.length&&1===d.a[0];if(m){try{m=!j('" "')}catch(n){}if(m)try{m=1!==j("01")}catch(n){}if(m)try{m=1!==j("1.")}catch(n){}}}}catch(n){m=!1}b=m}}return c[a]=!!b}var e,f,g,h={}.toString,i="function"==typeof a&&a.amd,j="object"==typeof JSON&&JSON,k="object"==typeof d&&d&&!d.nodeType&&d;k&&j?(k.stringify=j.stringify,k.parse=j.parse):k=b.JSON=j||{};var l=new Date(-0xc782b5b800cec);try{l=-109252==l.getUTCFullYear()&&0===l.getUTCMonth()&&1===l.getUTCDate()&&10==l.getUTCHours()&&37==l.getUTCMinutes()&&6==l.getUTCSeconds()&&708==l.getUTCMilliseconds()}catch(N){}if(!c("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=c("bug-string-char-index");if(!l)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(e={}.hasOwnProperty)||(e=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=h?e=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,e=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,e.call(this,a)});var w={boolean:1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(f=function(a,b){var c,d,g,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(g in d)e.call(d,g)&&i++;return c=d=null,i?f=2==i?function(a,b){var c,d={},f=h.call(a)==m;for(c in a)f&&"prototype"==c||e.call(d,c)||!(d[c]=1)||!e.call(a,c)||b(c)}:function(a,b){var c,d,f=h.call(a)==m;for(c in a)f&&"prototype"==c||!e.call(a,c)||(d="constructor"===c)||b(c);(d||e.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(a,b){var c,f,g=h.call(a)==m,i=!g&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:e;for(c in a)g&&"prototype"==c||!i.call(a,c)||b(c);for(f=d.length;c=d[--f];i.call(a,c)&&b(c));}),f(a,b)},!c("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));d<e;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(g<32){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,d,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(N){}if("object"==typeof l&&l)if((m=h.call(l))!=n||e.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||e.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&l<1/0){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(s<=0||s>=1e4?(s<0?"-":"+")+A(6,s<0?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if((m=h.call(l))==r)return""+l;if(m==o)return l>-1/0&&l<1/0?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;H<I;H++)G=D(H,l,c,d,i,j,k),F.push(G===g?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else f(d||l,function(a){var b=D(a,l,c,d,i,j,k);b!==g&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};k.stringify=function(a,b,c){var d,e,f,g;if("function"==typeof b||"object"==typeof b&&b)if((g=h.call(b))==m)e=b;else if(g==q){f={};for(var i,j=0,k=b.length;j<k;i=b[j++],((g=h.call(i))==p||g==o)&&(f[i]=1));}if(c)if((g=h.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!c("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:" ",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;E<g;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;E<g;)if((e=f.charCodeAt(E))<32)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;E<c;E++)(e=f.charCodeAt(E))>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(E+1))>=48&&e<=57&&I(),d=!1;E<g&&(e=f.charCodeAt(E))>=48&&e<=57;E++);if(46==f.charCodeAt(E)){for(c=++E;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==E&&I(),E=c}if(101==(e=f.charCodeAt(E))||69==e){for(e=f.charCodeAt(++E),43!=e&&45!=e||E++,c=E;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];"]"!=(a=J());c||(c=!0))c&&(","==a?"]"==(a=J())&&I():I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};"}"!=(a=J());c||(c=!0))c&&(","==a?"}"==(a=J())&&I():I()),","!=a&&"string"==typeof a&&"@"==(s?a.charAt(0):a[0])&&":"==J()||I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===g?delete a[b]:a[b]=d},M=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(h.call(e)==q)for(d=e.length;d--;)L(e,d,c);else f(e,function(a){L(e,a,c)});return c.call(a,b,e)};k.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&h.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}i&&a(function(){return k})}(this)},{}],50:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}]},{},[1])(1)}),livechat.io=window.io,window.io=window.previous_io,function(a,b){a.Pusher=b()}(this,function(){return function(){function a(b,c){(null===b||void 0===b)&&a.warn("Warning","You must pass your app key when you instantiate Pusher."),c=c||{};var d=this;this.key=b,this.config=a.Util.extend(a.getGlobalConfig(),c.cluster?a.getClusterConfig(c.cluster):{},c),this.channels=new a.Channels,this.global_emitter=new a.EventsDispatcher,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.Timeline(this.key,this.sessionID,{cluster:this.config.cluster,features:a.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:a.Timeline.INFO,version:a.VERSION}),this.config.disableStats||(this.timelineSender=new a.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/jsonp"})),this.connection=new a.ConnectionManager(this.key,a.Util.extend({getStrategy:function(b){return b=a.Util.extend({},d.config,b),a.StrategyBuilder.build(a.getDefaultStrategy(b),b)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){d.subscribeAll(),d.timelineSender&&d.timelineSender.send(d.connection.isEncrypted())}),this.connection.bind("message",function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c=d.channel(a.channel);c&&c.handleEvent(a.event,a.data)}b||d.global_emitter.emit(a.event,a.data)}),this.connection.bind("disconnected",function(){d.channels.disconnect()}),this.connection.bind("error",function(b){a.warn("Error",b)}),a.instances.push(this),this.timeline.info({instances:a.instances.length}),a.isReady&&d.connect()}var b=a.prototype;a.instances=[],a.isReady=!1,a.debug=function(){a.log&&a.log(a.Util.stringify.apply(this,arguments))},a.warn=function(){var b=a.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(b):window.console.log&&window.console.log(b)),a.log&&a.log(b)},a.ready=function(){a.isReady=!0;for(var b=0,c=a.instances.length;b<c;b++)a.instances[b].connect()},b.channel=function(a){return this.channels.find(a)},b.allChannels=function(){return this.channels.all()},b.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var b=this.connection.isEncrypted(),c=this.timelineSender;this.timelineSenderTimer=new a.PeriodicTimer(6e4,function(){c.send(b)})}},b.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},b.bind=function(a,b){return this.global_emitter.bind(a,b),this},b.bind_all=function(a){return this.global_emitter.bind_all(a),this},b.subscribeAll=function(){for(var a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)},b.subscribe=function(a){return a=this.channels.add(a,this),"connected"===this.connection.state&&a.subscribe(),a},b.unsubscribe=function(a){(a=this.channels.remove(a))&&"connected"===this.connection.state&&a.unsubscribe()},b.send_event=function(a,b,c){return this.connection.send_event(a,b,c)},b.isEncrypted=function(){return"https:"===a.Util.getDocument().location.protocol||Boolean(this.config.encrypted)},a.HTTP={},this.Pusher=a}.call(this),function(){function a(a){window.clearTimeout(a)}function b(a){window.clearInterval(a)}function c(a,b,c,d){var e=this;this.clear=b,this.timer=a(function(){null!==e.timer&&(e.timer=d(e.timer))},c)}var d=c.prototype;d.isRunning=function(){return null!==this.timer},d.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Pusher.Timer=function(b,d){return new c(setTimeout,a,b,function(a){return d(),null})},Pusher.PeriodicTimer=function(a,d){return new c(setInterval,b,a,function(a){return d(),a})}}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(a){return new Pusher.Timer(0,a)},extend:function(a){for(var b=1;b<arguments.length;b++){var c,d=arguments[b];for(c in d)a[c]=d[c]&&d[c].constructor&&d[c].constructor===Object?Pusher.Util.extend(a[c]||{},d[c]):d[c]}return a},stringify:function(){for(var a=["Pusher"],b=0;b<arguments.length;b++)"string"==typeof arguments[b]?a.push(arguments[b]):void 0===window.JSON?a.push(arguments[b].toString()):a.push(JSON.stringify(arguments[b]));return a.join(" : ")},arrayIndexOf:function(a,b){var c=Array.prototype.indexOf;if(null===a)return-1;if(c&&a.indexOf===c)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},objectApply:function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)},keys:function(a){var b=[];return Pusher.Util.objectApply(a,function(a,c){b.push(c)}),b},values:function(a){var b=[];return Pusher.Util.objectApply(a,function(a){b.push(a)}),b},apply:function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||window,a[d],d,a)},map:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a,c));return c},mapObject:function(a,b){var c={};return Pusher.Util.objectApply(a,function(a,d){c[d]=b(a)}),c},filter:function(a,b){b=b||function(a){return!!a};for(var c=[],d=0;d<a.length;d++)b(a[d],d,a,c)&&c.push(a[d]);return c},filterObject:function(a,b){var c={};return Pusher.Util.objectApply(a,function(d,e){(b&&b(d,e,a,c)||Boolean(d))&&(c[e]=d)}),c},flatten:function(a){var b=[];return Pusher.Util.objectApply(a,function(a,c){b.push([c,a])}),b},any:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return!0;return!1},all:function(a,b){for(var c=0;c<a.length;c++)if(!b(a[c],c,a))return!1;return!0},method:function(a){var b=Array.prototype.slice.call(arguments,1);return function(c){return c[a].apply(c,b.concat(arguments))}},getWindow:function(){return window},getDocument:function(){return document},getLocalStorage:function(){try{return window.localStorage}catch(a){}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport},function(a){return a.isSupported({})}))},addWindowListener:function(a,b){var c=Pusher.Util.getWindow();void 0!==c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent("on"+a,b)},removeWindowListener:function(a,b){var c=Pusher.Util.getWindow();void 0!==c.addEventListener?c.removeEventListener(a,b,!1):c.detachEvent("on"+a,b)},isXHRSupported:function(){var a=window.XMLHttpRequest;return Boolean(a)&&void 0!==(new a).withCredentials},isXDRSupported:function(a){a=a?"https:":"http:";var b=Pusher.Util.getDocument().location.protocol;return Boolean(window.XDomainRequest)&&b===a}}}.call(this),function(){Pusher.VERSION="3.0.0",Pusher.PROTOCOL=7,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://js.pusher.com/",Pusher.dependency_suffix=".min",Pusher.getDefaultStrategy=function(a){return[[":def","ws_options",{hostUnencrypted:a.wsHost+":"+a.wsPort,hostEncrypted:a.wsHost+":"+a.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:a.httpHost+":"+a.httpPort,hostEncrypted:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:a.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:a.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],a.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],":http_fallback_loop"]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(a){return{wsHost:"ws-"+a+".pusher.com",httpHost:"sockjs-"+a+".pusher.com"}}}.call(this),function(){function a(a){var b=function(b){Error.call(this,b),this.name=a};return Pusher.Util.extend(b.prototype,Error.prototype),b}Pusher.Errors={BadEventName:a("BadEventName"),RequestTimedOut:a("RequestTimedOut"),TransportPriorityTooLow:a("TransportPriorityTooLow"),TransportClosed:a("TransportClosed"),UnsupportedTransport:a("UnsupportedTransport"),UnsupportedStrategy:a("UnsupportedStrategy")}}.call(this),function(){function a(a){this.callbacks=new b,this.global_callbacks=[],this.failThrough=a}function b(){this._callbacks={}}var c=a.prototype;c.bind=function(a,b,c){return this.callbacks.add(a,b,c),this},c.bind_all=function(a){return this.global_callbacks.push(a),this},c.unbind=function(a,b,c){return this.callbacks.remove(a,b,c),this},c.unbind_all=function(a,b){return this.callbacks.remove(a,b),this},c.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var d=this.callbacks.get(a);if(d&&0<d.length)for(c=0;c<d.length;c++)d[c].fn.call(d[c].context||window,b);else this.failThrough&&this.failThrough(a,b);return this},b.prototype.get=function(a){return this._callbacks["_"+a]},b.prototype.add=function(a,b,c){a="_"+a,this._callbacks[a]=this._callbacks[a]||[],this._callbacks[a].push({fn:b,context:c})},b.prototype.remove=function(a,b,c){a||b||c?(a=a?["_"+a]:Pusher.Util.keys(this._callbacks),b||c?Pusher.Util.apply(a,function(a){this._callbacks[a]=Pusher.Util.filter(this._callbacks[a]||[],function(a){return b&&b!==a.fn||c&&c!==a.context}),0===this._callbacks[a].length&&delete this._callbacks[a]},this):Pusher.Util.apply(a,function(a){delete this._callbacks[a]},this)):this._callbacks={}},Pusher.EventsDispatcher=a}.call(this),function(){function a(a,b){this.lastId=0,this.prefix=a,this.name=b}var b=a.prototype;b.create=function(a){this.lastId++;var b=this.lastId,c=this.prefix+b,d=this.name+"["+b+"]",e=!1,f=function(){e||(a.apply(null,arguments),e=!0)};return this[b]=f,{number:b,id:c,name:d,callback:f}},b.remove=function(a){delete this[a.number]},Pusher.ScriptReceiverFactory=a,Pusher.ScriptReceivers=new a("_pusher_script_","Pusher.ScriptReceivers")}.call(this),function(){function a(a){this.src=a}var b=a.prototype;b.send=function(a){var b=this,c="Error loading "+b.src;b.script=document.createElement("script"),b.script.id=a.id,b.script.src=b.src,b.script.type="text/javascript",b.script.charset="UTF-8",b.script.addEventListener?(b.script.onerror=function(){a.callback(c)},b.script.onload=function(){a.callback(null)}):b.script.onreadystatechange=function(){("loaded"===b.script.readyState||"complete"===b.script.readyState)&&a.callback(null)},void 0===b.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=a.id+"_error",b.errorScript.text=a.name+"('"+c+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var d=document.getElementsByTagName("head")[0];d.insertBefore(b.script,d.firstChild),b.errorScript&&d.insertBefore(b.errorScript,b.script.nextSibling)},b.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=this.script=null},Pusher.ScriptRequest=a}.call(this),function(){function a(a){this.options=a,this.receivers=a.receivers||Pusher.ScriptReceivers,this.loading={}}var b=a.prototype;b.load=function(a,b,c){var d=this;if(d.loading[a]&&0<d.loading[a].length)d.loading[a].push(c);else{d.loading[a]=[c];var e=new Pusher.ScriptRequest(d.getPath(a,b)),f=d.receivers.create(function(b){if(d.receivers.remove(f),d.loading[a]){var c=d.loading[a];delete d.loading[a];for(var g=function(a){a||e.cleanup()},h=0;h<c.length;h++)c[h](b,g)}});e.send(f)}},b.getRoot=function(a){var b=Pusher.Util.getDocument().location.protocol;return(a&&a.encrypted||"https:"===b?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},b.getPath=function(a,b){return this.getRoot(b)+"/"+a+this.options.suffix+".js"},Pusher.DependencyLoader=a}.call(this),function(){function a(){Pusher.ready()}function b(a){document.body?a():setTimeout(function(){b(a)},0)}function c(){b(a)}Pusher.DependenciesReceivers=new Pusher.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix,receivers:Pusher.DependenciesReceivers}),window.JSON?c():Pusher.Dependencies.load("json2",{},c)}(),function(){for(var a=String.fromCharCode,b=0;64>b;b++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b);var c=function(b){var c=b.charCodeAt(0);return 128>c?b:2048>c?a(192|c>>>6)+a(128|63&c):a(224|c>>>12&15)+a(128|c>>>6&63)+a(128|63&c)},d=function(a){var b=[0,2,1][a.length%3];return a=a.charCodeAt(0)<<16|(1<a.length?a.charCodeAt(1):0)<<8|(2<a.length?a.charCodeAt(2):0),["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63),2<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63),1<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&a)].join("")},e=window.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,d)};Pusher.Base64={encode:function(a){return e(a.replace(/[^\x00-\x7F]/g,c))}}}.call(this),function(){function a(a,b){this.url=a,this.data=b}function b(a){return Pusher.Util.mapObject(a,function(a){return"object"==typeof a&&(a=JSON.stringify(a)),encodeURIComponent(Pusher.Base64.encode(a.toString()))})}var c=a.prototype;c.send=function(a){if(!this.request){var c=Pusher.Util.filterObject(this.data,function(a){return void 0!==a}),c=Pusher.Util.map(Pusher.Util.flatten(b(c)),Pusher.Util.method("join","=")).join("&");this.request=new Pusher.ScriptRequest(this.url+"/"+a.number+"?"+c),this.request.send(a)}},c.cleanup=function(){this.request&&this.request.cleanup()},Pusher.JSONPRequest=a}.call(this),function(){function a(a,b,c){this.key=a,this.session=b,this.events=[],this.options=c||{},this.uniqueID=this.sent=0}var b=a.prototype;a.ERROR=3,a.INFO=6,a.DEBUG=7,b.log=function(a,b){a<=this.options.level&&(this.events.push(Pusher.Util.extend({},b,{timestamp:Pusher.Util.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},b.error=function(b){this.log(a.ERROR,b)},b.info=function(b){this.log(a.INFO,b)},b.debug=function(b){this.log(a.DEBUG,b)},b.isEmpty=function(){return 0===this.events.length},b.send=function(a,b){var c=this,d=Pusher.Util.extend({session:c.session,bundle:c.sent+1,key:c.key,lib:"js",version:c.options.version,cluster:c.options.cluster,features:c.options.features,timeline:c.events},c.options.params);return c.events=[],a(d,function(a,d){a||c.sent++,b&&b(a,d)}),!0},b.generateUniqueID=function(){return++this.uniqueID},Pusher.Timeline=a}.call(this),function(){function a(a,b){this.timeline=a,this.options=b||{}}a.prototype.send=function(a,b){var c=this;c.timeline.isEmpty()||c.timeline.send(function(b,d){var e=new Pusher.JSONPRequest("http"+(a?"s":"")+"://"+(c.host||c.options.host)+c.options.path,b),f=Pusher.ScriptReceivers.create(function(a,b){Pusher.ScriptReceivers.remove(f),e.cleanup(),b&&b.host&&(c.host=b.host),d&&d(a,b)});e.send(f)},b)},Pusher.TimelineSender=a}.call(this),function(){function a(a){this.strategies=a}function b(a,b,c){var e=Pusher.Util.map(a,function(a,d,e,f){return a.connect(b,c(d,f))});return{abort:function(){Pusher.Util.apply(e,d)},forceMinPriority:function(a){Pusher.Util.apply(e,function(b){b.forceMinPriority(a)})}}}function c(a){return Pusher.Util.all(a,function(a){return Boolean(a.error)})}function d(a){!a.error&&!a.aborted&&(a.abort(),a.aborted=!0)}var e=a.prototype;e.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},e.connect=function(a,d){return b(this.strategies,a,function(a,b){return function(e,f){(b[a].error=e)?c(b)&&d(!0):(Pusher.Util.apply(b,function(a){a.forceMinPriority(f.transport.priority)}),d(null,f))}})},Pusher.BestConnectedEverStrategy=a}.call(this),function(){function a(a,b,c){this.strategy=a,this.transports=b,this.ttl=c.ttl||18e5,this.encrypted=c.encrypted,this.timeline=c.timeline}function b(a){return"pusherTransport"+(a?"Encrypted":"Unencrypted")}function c(a){var c=Pusher.Util.getLocalStorage();if(c)try{var e=c[b(a)];if(e)return JSON.parse(e)}catch(f){d(a)}return null}function d(a){var c=Pusher.Util.getLocalStorage();if(c)try{delete c[b(a)]}catch(d){}}var e=a.prototype;e.isSupported=function(){return this.strategy.isSupported()},e.connect=function(a,e){var f=this.encrypted,g=c(f),h=[this.strategy];if(g&&g.timestamp+this.ttl>=Pusher.Util.now()){var i=this.transports[g.transport];i&&(this.timeline.info({cached:!0,transport:g.transport,latency:g.latency}),h.push(new Pusher.SequentialStrategy([i],{timeout:2*g.latency+1e3,failFast:!0})))}var j=Pusher.Util.now(),k=h.pop().connect(a,function c(g,i){if(g)d(f),0<h.length?(j=Pusher.Util.now(),k=h.pop().connect(a,c)):e(g);else{var l=i.transport.name,m=Pusher.Util.now()-j,n=Pusher.Util.getLocalStorage();if(n)try{n[b(f)]=JSON.stringify({timestamp:Pusher.Util.now(),transport:l,latency:m})}catch(o){}e(null,i)}});return{abort:function(){k.abort()},forceMinPriority:function(b){a=b,k&&k.forceMinPriority(b)}}},Pusher.CachedStrategy=a}.call(this),function(){function a(a,b){this.strategy=a,this.options={delay:b.delay}}var b=a.prototype;b.isSupported=function(){return this.strategy.isSupported()},b.connect=function(a,b){var c,d=this.strategy,e=new Pusher.Timer(this.options.delay,function(){c=d.connect(a,b)});return{abort:function(){e.ensureAborted(),c&&c.abort()},forceMinPriority:function(b){a=b,c&&c.forceMinPriority(b)}}},Pusher.DelayedStrategy=a}.call(this),function(){function a(a){this.strategy=a}var b=a.prototype;b.isSupported=function(){return this.strategy.isSupported()},b.connect=function(a,b){var c=this.strategy.connect(a,function(a,d){d&&c.abort(),b(a,d)});return c},Pusher.FirstConnectedStrategy=a}.call(this),function(){function a(a,b,c){this.test=a,this.trueBranch=b,this.falseBranch=c}var b=a.prototype;b.isSupported=function(){
return(this.test()?this.trueBranch:this.falseBranch).isSupported()},b.connect=function(a,b){return(this.test()?this.trueBranch:this.falseBranch).connect(a,b)},Pusher.IfStrategy=a}.call(this),function(){function a(a,b){this.strategies=a,this.loop=Boolean(b.loop),this.failFast=Boolean(b.failFast),this.timeout=b.timeout,this.timeoutLimit=b.timeoutLimit}var b=a.prototype;b.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},b.connect=function(a,b){var c=this,d=this.strategies,e=0,f=this.timeout,g=null,h=function(i,j){j?b(null,j):(e+=1,c.loop&&(e%=d.length),e<d.length?(f&&(f*=2,c.timeoutLimit&&(f=Math.min(f,c.timeoutLimit))),g=c.tryStrategy(d[e],a,{timeout:f,failFast:c.failFast},h)):b(!0))},g=this.tryStrategy(d[e],a,{timeout:f,failFast:this.failFast},h);return{abort:function(){g.abort()},forceMinPriority:function(b){a=b,g&&g.forceMinPriority(b)}}},b.tryStrategy=function(a,b,c,d){var e=null,f=null;return 0<c.timeout&&(e=new Pusher.Timer(c.timeout,function(){f.abort(),d(!0)})),f=a.connect(b,function(a,b){a&&e&&e.isRunning()&&!c.failFast||(e&&e.ensureAborted(),d(a,b))}),{abort:function(){e&&e.ensureAborted(),f.abort()},forceMinPriority:function(a){f.forceMinPriority(a)}}},Pusher.SequentialStrategy=a}.call(this),function(){function a(a,b,c,d){this.name=a,this.priority=b,this.transport=c,this.options=d||{}}function b(a,b){return Pusher.Util.defer(function(){b(a)}),{abort:function(){},forceMinPriority:function(){}}}var c=a.prototype;c.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},c.connect=function(a,c){if(!this.isSupported())return b(new Pusher.Errors.UnsupportedStrategy,c);if(this.priority<a)return b(new Pusher.Errors.TransportPriorityTooLow,c);var d=this,e=!1,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),g=null,h=function(){f.unbind("initialized",h),f.connect()},i=function(){g=new Pusher.Handshake(f,function(a){e=!0,l(),c(null,a)})},j=function(a){l(),c(a)},k=function(){l(),c(new Pusher.Errors.TransportClosed(f))},l=function(){f.unbind("initialized",h),f.unbind("open",i),f.unbind("error",j),f.unbind("closed",k)};return f.bind("initialized",h),f.bind("open",i),f.bind("error",j),f.bind("closed",k),f.initialize(),{abort:function(){e||(l(),g?g.close():f.close())},forceMinPriority:function(a){e||d.priority<a&&(g?g.close():f.close())}}},Pusher.TransportStrategy=a}.call(this),function(){function a(a,b,c){return a+(b.encrypted?"s":"")+"://"+(b.encrypted?b.hostEncrypted:b.hostUnencrypted)+c}function b(a,b){return"/app/"+a+"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION+(b?"&"+b:"")}Pusher.URLSchemes={ws:{getInitial:function(c,d){return a("ws",d,b(c,"flash=false"))}},sockjs:{getInitial:function(b,c){return a("http",c,c.httpPath||"/pusher","")},getPath:function(a,c){return b(a)}},http:{getInitial:function(c,d){return a("http",d,(d.httpPath||"/pusher")+b(c))}}}}.call(this),function(){function a(a,b,c,d,e){Pusher.EventsDispatcher.call(this),this.hooks=a,this.name=b,this.priority=c,this.key=d,this.options=e,this.state="new",this.timeline=e.timeline,this.activityTimeout=e.activityTimeout,this.id=this.timeline.generateUniqueID()}var b=a.prototype;Pusher.Util.extend(b,Pusher.EventsDispatcher.prototype),b.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},b.supportsPing=function(){return Boolean(this.hooks.supportsPing)},b.initialize=function(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.encrypted?"s":"")})),a.hooks.isInitialized()?a.changeState("initialized"):a.hooks.file?(a.changeState("initializing"),Pusher.Dependencies.load(a.hooks.file,{encrypted:a.options.encrypted},function(b,c){a.hooks.isInitialized()?(a.changeState("initialized"),c(!0)):(b&&a.onError(b),a.onClose(),c(!1))})):a.onClose()},b.connect=function(){var a=this;if(a.socket||"initialized"!==a.state)return!1;var c=a.hooks.urls.getInitial(a.key,a.options);try{a.socket=a.hooks.getSocket(c,a.options)}catch(b){return Pusher.Util.defer(function(){a.onError(b),a.changeState("closed")}),!1}return a.bindListeners(),Pusher.debug("Connecting",{transport:a.name,url:c}),a.changeState("connecting"),!0},b.close=function(){return!!this.socket&&(this.socket.close(),!0)},b.send=function(a){var b=this;return"open"===b.state&&(Pusher.Util.defer(function(){b.socket&&b.socket.send(a)}),!0)},b.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},b.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},b.onError=function(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))},b.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},b.onMessage=function(a){this.emit("message",a)},b.onActivity=function(){this.emit("activity")},b.bindListeners=function(){var a=this;a.socket.onopen=function(){a.onOpen()},a.socket.onerror=function(b){a.onError(b)},a.socket.onclose=function(b){a.onClose(b)},a.socket.onmessage=function(b){a.onMessage(b)},a.supportsPing()&&(a.socket.onactivity=function(){a.onActivity()})},b.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},b.changeState=function(a,b){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:b})),this.emit(a,b)},b.buildTimelineMessage=function(a){return Pusher.Util.extend({cid:this.id},a)},Pusher.TransportConnection=a}.call(this),function(){function a(a){this.hooks=a}var b=a.prototype;b.isSupported=function(a){return this.hooks.isSupported(a)},b.createConnection=function(a,b,c,d){return new Pusher.TransportConnection(this.hooks,a,b,c,d)},Pusher.Transport=a}.call(this),function(){Pusher.WSTransport=new Pusher.Transport({urls:Pusher.URLSchemes.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(window.WebSocket||window.MozWebSocket)},isSupported:function(){return Boolean(window.WebSocket||window.MozWebSocket)},getSocket:function(a){return new(window.WebSocket||window.MozWebSocket)(a)}}),Pusher.SockJSTransport=new Pusher.Transport({file:"sockjs",urls:Pusher.URLSchemes.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(a,b){return new SockJS(a,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:b.encrypted}),ignore_null_origin:b.ignoreNullOrigin})},beforeOpen:function(a,b){a.send(JSON.stringify({path:b}))}});var a={urls:Pusher.URLSchemes.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return Boolean(Pusher.HTTP.Socket)}},b=Pusher.Util.extend({getSocket:function(a){return Pusher.HTTP.getStreamingSocket(a)}},a),a=Pusher.Util.extend({getSocket:function(a){return Pusher.HTTP.getPollingSocket(a)}},a),c={file:"xhr",isSupported:Pusher.Util.isXHRSupported},d={file:"xdr",isSupported:function(a){return Pusher.Util.isXDRSupported(a.encrypted)}};Pusher.XHRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},b,c)),Pusher.XDRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},b,d)),Pusher.XHRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},a,c)),Pusher.XDRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},a,d))}.call(this),function(){function a(a,b,c){this.manager=a,this.transport=b,this.minPingDelay=c.minPingDelay,this.maxPingDelay=c.maxPingDelay,this.pingDelay=void 0}var b=a.prototype;b.createConnection=function(a,b,c,d){var e=this;d=Pusher.Util.extend({},d,{activityTimeout:e.pingDelay});var f=e.transport.createConnection(a,b,c,d),g=null,h=function(){f.unbind("open",h),f.bind("closed",i),g=Pusher.Util.now()},i=function(a){f.unbind("closed",i),1002===a.code||1003===a.code?e.manager.reportDeath():!a.wasClean&&g&&(a=Pusher.Util.now()-g)<2*e.maxPingDelay&&(e.manager.reportDeath(),e.pingDelay=Math.max(a/2,e.minPingDelay))};return f.bind("open",h),f},b.isSupported=function(a){return this.manager.isAlive()&&this.transport.isSupported(a)},Pusher.AssistantToTheTransportManager=a}.call(this),function(){function a(a){this.options=a||{},this.livesLeft=this.options.lives||1/0}var b=a.prototype;b.getAssistant=function(a){return new Pusher.AssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},b.isAlive=function(){return 0<this.livesLeft},b.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=a}.call(this),function(){function a(a){return function(b){return[a.apply(this,arguments),b]}}function b(a,c){if(0===a.length)return[[],c];var e=d(a[0],c),f=b(a.slice(1),e[1]);return[[e[0]].concat(f[0]),f[1]]}function c(a,c){if("string"==typeof a[0]&&":"===a[0].charAt(0)){var e=c[a[0].slice(1)];if(1<a.length){if("function"!=typeof e)throw"Calling non-function "+a[0];var f=[Pusher.Util.extend({},c)].concat(Pusher.Util.map(a.slice(1),function(a){return d(a,Pusher.Util.extend({},c))[0]}));return e.apply(this,f)}return[e,c]}return b(a,c)}function d(a,b){if("string"==typeof a){var d;if("string"==typeof a&&":"===a.charAt(0)){if(void 0===(d=b[a.slice(1)]))throw"Undefined symbol "+a;d=[d,b]}else d=[a,b];return d}return"object"==typeof a&&a instanceof Array&&0<a.length?c(a,b):[a,b]}var e={ws:Pusher.WSTransport,sockjs:Pusher.SockJSTransport,xhr_streaming:Pusher.XHRStreamingTransport,xdr_streaming:Pusher.XDRStreamingTransport,xhr_polling:Pusher.XHRPollingTransport,xdr_polling:Pusher.XDRPollingTransport},f={isSupported:function(){return!1},connect:function(a,b){var c=Pusher.Util.defer(function(){b(new Pusher.Errors.UnsupportedStrategy)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}},g={extend:function(a,b,c){return[Pusher.Util.extend({},b,c),a]},def:function(a,b,c){if(void 0!==a[b])throw"Redefining symbol "+b;return a[b]=c,[void 0,a]},def_transport:function(a,b,c,d,g,h){var i=e[c];if(!i)throw new Pusher.Errors.UnsupportedTransport(c);return c=a.enabledTransports&&-1===Pusher.Util.arrayIndexOf(a.enabledTransports,b)||a.disabledTransports&&-1!==Pusher.Util.arrayIndexOf(a.disabledTransports,b)?f:new Pusher.TransportStrategy(b,d,h?h.getAssistant(i):i,Pusher.Util.extend({key:a.key,encrypted:a.encrypted,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},g)),d=a.def(a,b,c)[1],d.transports=a.transports||{},d.transports[b]=c,[void 0,d]},transport_manager:a(function(a,b){return new Pusher.TransportManager(b)}),sequential:a(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(c,b)}),cached:a(function(a,b,c){return new Pusher.CachedStrategy(c,a.transports,{ttl:b,timeline:a.timeline,encrypted:a.encrypted})}),first_connected:a(function(a,b){return new Pusher.FirstConnectedStrategy(b)}),best_connected_ever:a(function(){var a=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(a)}),delayed:a(function(a,b,c){return new Pusher.DelayedStrategy(c,{delay:b})}),"if":a(function(a,b,c,d){return new Pusher.IfStrategy(b,c,d)}),is_supported:a(function(a,b){return function(){return b.isSupported()}})};Pusher.StrategyBuilder={build:function(a,b){return d(a,Pusher.Util.extend({},g,b))[1].strategy}}}.call(this),function(){Pusher.Protocol={decodeMessage:function(a){try{var b=JSON.parse(a.data);if("string"==typeof b.data)try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c}return b}catch(d){throw{type:"MessageParseError",error:d,data:a.data}}},encodeMessage:function(a){return JSON.stringify(a)},processHandshake:function(a){if(a=this.decodeMessage(a),"pusher:connection_established"===a.event){if(!a.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:a.data.socket_id,activityTimeout:1e3*a.data.activity_timeout}}if("pusher:error"===a.event)return{action:this.getCloseAction(a.data),error:this.getCloseError(a.data)};throw"Invalid handshake"},getCloseAction:function(a){return 4e3>a.code?1002<=a.code&&1004>=a.code?"backoff":null:4e3===a.code?"ssl_only":4100>a.code?"refused":4200>a.code?"backoff":4300>a.code?"retry":"refused"},getCloseError:function(a){return 1e3!==a.code&&1001!==a.code?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}}}.call(this),function(){function a(a,b){Pusher.EventsDispatcher.call(this),this.id=a,this.transport=b,this.activityTimeout=b.activityTimeout,this.bindListeners()}var b=a.prototype;Pusher.Util.extend(b,Pusher.EventsDispatcher.prototype),b.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},b.send=function(a){return this.transport.send(a)},b.send_event=function(a,b,c){return a={event:a,data:b},c&&(a.channel=c),Pusher.debug("Event sent",a),this.send(Pusher.Protocol.encodeMessage(a))},b.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},b.close=function(){this.transport.close()},b.bindListeners=function(){var a=this,b={message:function(b){var c;try{c=Pusher.Protocol.decodeMessage(b)}catch(d){a.emit("error",{type:"MessageParseError",error:d,data:b.data})}if(void 0!==c){switch(Pusher.debug("Event recd",c),c.event){case"pusher:error":a.emit("error",{type:"PusherError",data:c.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong")}a.emit("message",c)}},activity:function(){a.emit("activity")},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(b){c(),b&&b.code&&a.handleCloseEvent(b),a.transport=null,a.emit("closed")}},c=function(){Pusher.Util.objectApply(b,function(b,c){a.transport.unbind(c,b)})};Pusher.Util.objectApply(b,function(b,c){a.transport.bind(c,b)})},b.handleCloseEvent=function(a){var b=Pusher.Protocol.getCloseAction(a);(a=Pusher.Protocol.getCloseError(a))&&this.emit("error",a),b&&this.emit(b)},Pusher.Connection=a}.call(this),function(){function a(a,b){this.transport=a,this.callback=b,this.bindListeners()}var b=a.prototype;b.close=function(){this.unbindListeners(),this.transport.close()},b.bindListeners=function(){var a=this;a.onMessage=function(b){a.unbindListeners();try{var c=Pusher.Protocol.processHandshake(b);"connected"===c.action?a.finish("connected",{connection:new Pusher.Connection(c.id,a.transport),activityTimeout:c.activityTimeout}):(a.finish(c.action,{error:c.error}),a.transport.close())}catch(d){a.finish("error",{error:d}),a.transport.close()}},a.onClosed=function(b){a.unbindListeners();var c=Pusher.Protocol.getCloseAction(b)||"backoff";b=Pusher.Protocol.getCloseError(b),a.finish(c,{error:b})},a.transport.bind("message",a.onMessage),a.transport.bind("closed",a.onClosed)},b.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},b.finish=function(a,b){this.callback(Pusher.Util.extend({transport:this.transport,action:a},b))},Pusher.Handshake=a}.call(this),function(){function a(a,b){Pusher.EventsDispatcher.call(this),this.key=a,this.options=b||{},this.state="initialized",this.connection=null,this.encrypted=!!b.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var c=this;Pusher.Network.bind("online",function(){c.timeline.info({netinfo:"online"}),("connecting"===c.state||"unavailable"===c.state)&&c.retryIn(0)}),Pusher.Network.bind("offline",function(){c.timeline.info({netinfo:"offline"}),c.connection&&c.sendActivityCheck()}),this.updateStrategy()}var b=a.prototype;Pusher.Util.extend(b,Pusher.EventsDispatcher.prototype),b.connect=function(){!this.connection&&!this.runner&&(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},b.send=function(a){return!!this.connection&&this.connection.send(a)},b.send_event=function(a,b,c){return!!this.connection&&this.connection.send_event(a,b,c)},b.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},b.isEncrypted=function(){return this.encrypted},b.startConnecting=function(){var a=this,b=function(c,d){c?a.runner=a.strategy.connect(0,b):"error"===d.action?(a.emit("error",{type:"HandshakeError",error:d.error}),a.timeline.error({handshakeError:d.error})):(a.abortConnecting(),a.handshakeCallbacks[d.action](d))};a.runner=a.strategy.connect(0,b)},b.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},b.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},b.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},b.retryIn=function(a){var b=this;b.timeline.info({action:"retry",delay:a}),0<a&&b.emit("connecting_in",Math.round(a/1e3)),b.retryTimer=new Pusher.Timer(a||0,function(){b.disconnectInternally(),b.connect()})},b.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},b.setUnavailableTimer=function(){var a=this;a.unavailableTimer=new Pusher.Timer(a.options.unavailableTimeout,function(){a.updateState("unavailable")})},b.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},b.sendActivityCheck=function(){var a=this;a.stopActivityCheck(),a.connection.ping(),a.activityTimer=new Pusher.Timer(a.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout}),a.retryIn(0)})},b.resetActivityCheck=function(){var a=this;a.stopActivityCheck(),a.connection.handlesActivityChecks()||(a.activityTimer=new Pusher.Timer(a.activityTimeout,function(){a.sendActivityCheck()}))},b.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},b.buildConnectionCallbacks=function(){var a=this;return{message:function(b){a.resetActivityCheck(),a.emit("message",b)},ping:function(){a.send_event("pusher:pong",{})},activity:function(){a.resetActivityCheck()},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(){a.abandonConnection(),a.shouldRetry()&&a.retryIn(1e3)}}},b.buildHandshakeCallbacks=function(a){var b=this;return Pusher.Util.extend({},a,{connected:function(a){b.activityTimeout=Math.min(b.options.activityTimeout,a.activityTimeout,a.connection.activityTimeout||1/0),b.clearUnavailableTimer(),b.setConnection(a.connection),b.socket_id=b.connection.id,b.updateState("connected",{socket_id:b.socket_id})}})},b.buildErrorCallbacks=function(){function a(a){return function(c){c.error&&b.emit("error",{type:"WebSocketError",error:c.error}),a(c)}}var b=this;return{ssl_only:a(function(){b.encrypted=!0,b.updateStrategy(),b.retryIn(0)}),refused:a(function(){b.disconnect()}),backoff:a(function(){b.retryIn(1e3)}),retry:a(function(){b.retryIn(0)})}},b.setConnection=function(a){this.connection=a;for(var b in this.connectionCallbacks)this.connection.bind(b,this.connectionCallbacks[b]);this.resetActivityCheck()},b.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);return a=this.connection,this.connection=null,a}},b.updateState=function(a,b){var c=this.state;this.state=a,c!==a&&(Pusher.debug("State changed",c+" -> "+a),this.timeline.info({state:a,params:b}),this.emit("state_change",{previous:c,current:a}),this.emit(a,b))},b.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},Pusher.ConnectionManager=a}.call(this),function(){function a(){Pusher.EventsDispatcher.call(this);var a=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){a.emit("online")},!1),window.addEventListener("offline",function(){a.emit("offline")},!1))}Pusher.Util.extend(a.prototype,Pusher.EventsDispatcher.prototype),a.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},Pusher.NetInfo=a,Pusher.Network=new a}.call(this),function(){function a(){this.reset()}var b=a.prototype;b.get=function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null},b.each=function(a){var b=this;Pusher.Util.objectApply(b.members,function(c,d){a(b.get(d))})},b.setMyID=function(a){this.myID=a},b.onSubscription=function(a){this.members=a.presence.hash,this.count=a.presence.count,this.me=this.get(this.myID)},b.addMember=function(a){return null===this.get(a.user_id)&&this.count++,this.members[a.user_id]=a.user_info,this.get(a.user_id)},b.removeMember=function(a){var b=this.get(a.user_id);return b&&(delete this.members[a.user_id],this.count--),b},b.reset=function(){this.members={},this.count=0,this.me=this.myID=null},Pusher.Members=a}.call(this),function(){function a(a,b){Pusher.EventsDispatcher.call(this,function(b,c){Pusher.debug("No callbacks on "+a+" for "+b)}),this.name=a,this.pusher=b,this.subscribed=!1}var b=a.prototype;Pusher.Util.extend(b,Pusher.EventsDispatcher.prototype),b.authorize=function(a,b){return b(!1,{})},b.trigger=function(a,b){if(0!==a.indexOf("client-"))throw new Pusher.Errors.BadEventName("Event '"+a+"' does not start with 'client-'");return this.pusher.send_event(a,b,this.name)},b.disconnect=function(){this.subscribed=!1},b.handleEvent=function(a,b){0===a.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===a&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",b)):this.emit(a,b)},b.subscribe=function(){var a=this;a.authorize(a.pusher.connection.socket_id,function(b,c){b?a.handleEvent("pusher:subscription_error",c):a.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:a.name})})},b.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=a}.call(this),function(){function a(a,b){Pusher.Channel.call(this,a,b)}var b=a.prototype;Pusher.Util.extend(b,Pusher.Channel.prototype),b.authorize=function(a,b){return new Pusher.Channel.Authorizer(this,this.pusher.config).authorize(a,b)},Pusher.PrivateChannel=a}.call(this),function(){function a(a,b){Pusher.PrivateChannel.call(this,a,b),this.members=new Pusher.Members}var b=a.prototype;Pusher.Util.extend(b,Pusher.PrivateChannel.prototype),b.authorize=function(a,b){var c=this;Pusher.PrivateChannel.prototype.authorize.call(c,a,function(a,d){if(!a){if(void 0===d.channel_data)return Pusher.warn("Invalid auth response for channel '"+c.name+"', expected 'channel_data' field"),void b("Invalid auth response");var e=JSON.parse(d.channel_data);c.members.setMyID(e.user_id)}b(a,d)})},b.handleEvent=function(a,b){switch(a){case"pusher_internal:subscription_succeeded":this.members.onSubscription(b),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var c=this.members.addMember(b);this.emit("pusher:member_added",c);break;case"pusher_internal:member_removed":(c=this.members.removeMember(b))&&this.emit("pusher:member_removed",c);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,a,b)}},b.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=a}.call(this),function(){function a(){this.channels={}}var b=a.prototype;b.add=function(a,b){if(!this.channels[a]){var c,d=this.channels;c=0===a.indexOf("private-")?new Pusher.PrivateChannel(a,b):0===a.indexOf("presence-")?new Pusher.PresenceChannel(a,b):new Pusher.Channel(a,b),d[a]=c}return this.channels[a]},b.all=function(a){return Pusher.Util.values(this.channels)},b.find=function(a){return this.channels[a]},b.remove=function(a){var b=this.channels[a];return delete this.channels[a],b},b.disconnect=function(){Pusher.Util.objectApply(this.channels,function(a){a.disconnect()})},Pusher.Channels=a}.call(this),function(){Pusher.Channel.Authorizer=function(a,b){this.channel=a,this.type=b.authTransport,this.options=b,this.authOptions=(b||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(a){a="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);for(var b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a},authorize:function(a,b){return Pusher.authorizers[this.type].call(this,a,b)}};var a=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(a,b){var c;c=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.open("POST",this.options.authEndpoint,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var d in this.authOptions.headers)c.setRequestHeader(d,this.authOptions.headers[d]);return c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){var a,d=!1;try{a=JSON.parse(c.responseText),d=!0}catch(e){b(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+c.responseText)}d&&b(!1,a)}else Pusher.warn("Couldn't get auth info from your webapp",c.status),b(!0,c.status)},c.send(this.composeQuery(a)),c},jsonp:function(b,c){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var d=a.toString();a++;var e=Pusher.Util.getDocument(),f=e.createElement("script");Pusher.auth_callbacks[d]=function(a){c(!1,a)},f.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+d+"']")+"&"+this.composeQuery(b),d=e.getElementsByTagName("head")[0]||e.documentElement,d.insertBefore(f,d.firstChild)}}}.call(this),Pusher}),function(a,b){a.PUBNUBVisitor=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a,b){return q.HmacSHA256(a,b).toString(q.enc.Base64)}function e(a){return document.getElementById(a)}function f(a){console.error(a)}function g(a,b){var c=[];return s.each(a.split(/\s+/),function(a){s.each((b||document).getElementsByTagName(a),function(a){c.push(a)})}),c}function h(a,b,c){s.each(a.split(","),function(a){var d=function(a){a||(a=window.event),c(a)||(a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())};b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent?b.attachEvent("on"+a,d):b["on"+a]=d})}function i(){return g("head")[0]}function j(a,b,c){if(!c)return a&&a.getAttribute&&a.getAttribute(b);a.setAttribute(b,c)}function k(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0&&"number"==typeof b[c]?"px":"")}catch(d){return}}function l(a){return document.createElement(a)}function m(a){var b,c,d=0,e=0,f=!0,g=a.timeout||s.DEF_TIMEOUT,h=a.data||{},i=a.fail||function(){},j=a.success||function(){},k=function(a,e){d||(d=1,clearTimeout(c),b&&(b.onerror=b.onload=null,b.abort&&b.abort(),b=null),a&&i(e))},l=function(){if(!e){var a;e=1,clearTimeout(c);try{a=JSON.parse(b.responseText)}catch(d){return k(1)}j(a)}};c=s.timeout(function(){k(1)},g);try{b="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,b.onerror=b.onabort=function(){k(1,b.responseText||{error:"Network Connection Error"})},b.onload=b.onloadend=l,h.pnsdk=u;var m=s.build_url(a.url,h);b.open("GET",m,f),f&&(b.timeout=g),b.send()}catch(n){k(1,{error:"XHR Failed",stacktrace:n})}return k}function n(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(a){return!0}}function o(a){return"sendBeacon"in navigator&&navigator.sendBeacon(a)}c(1);var p=c(2),q=c(3),r=c(4),s=c(5),t=c(8),u="PubNub-JS-Web/"+r.version;window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var v=function(){var a={},b=!1;try{b=window.localStorage}catch(f){return}var c=function(a){return-1===document.cookie.indexOf(a)?null:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||null},d=function(a,b){document.cookie=a+"="+b+"; expires=Thu, 1 Aug "+((new Date).getFullYear()+1)+" 20:00:00 UTC; path=/"},e=function(){try{return d("pnctest","1"),"1"===c("pnctest")}catch(f){return!1}}();return{get:function(d){try{return b?b.getItem(d):e?c(d):a[d]}catch(f){return a[d]}},set:function(c,f){try{if(b)return b.setItem(c,f)&&0;e&&d(c,f),a[c]=f}catch(f){a[c]=f}}}}(),w={list:{},unbind:function(a){w.list[a]=[]},bind:function(a,b){(w.list[a]=w.list[a]||[]).push(b)},fire:function(a,b){s.each(w.list[a]||[],function(a){a(b)})}},x=function(a){var b=a.leave_on_unload||0;a.xdr=m,a.db=v,a.error=a.error||f,a._is_online=n,a.hmac_SHA256=d,a.crypto_obj=p(),a.sendBeacon=o,a.params={pnsdk:u};var c=function(a){return x(a)},q=s.PN_API(a);for(var r in q)q.hasOwnProperty(r)&&(c[r]=q[r]);return c.css=k,c.$=e,c.create=l,c.bind=h,c.head=i,c.search=g,c.attr=j,c.events=w,c.init=c,c.secure=c,c.crypto_obj=p(),c.WS=t,c.PNmessage=s.PNmessage,c.supplant=s.supplant,h("beforeunload",window,function(){return b&&c["each-channel"](function(a){c.LEAVE(a.name,0)}),!0}),c.ready(),a.notest?c:(h("offline",window,c.offline),h("offline",document,c.offline),c)};x.init=x,x.secure=x,x.crypto_obj=p(),x.WS=t,x.db=v,x.PNmessage=s.PNmessage,x.uuid=s.uuid,x.css=k,x.$=e,x.create=e,x.bind=h,x.head=i,x.search=g,x.attr=j,x.events=w,x.map=s.map,x.each=s.each,x.grep=s.grep,x.supplant=s.supplant,x.now=s.now,x.unique=s.unique,x.updater=s.updater,window.jQuery&&(window.jQuery.PUBNUBVisitor=x),a.exports=x},function(module,exports){(function(){window.JSON&&window.JSON.stringify||function(){function toJSON(a){try{return this.valueOf()}catch(b){return null}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&(i=toJSON.call(i,a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof(d=rep[c])&&(e=str(d,i))&&g.push(quote(d)+(gap?": ":":")+e);else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i))&&g.push(quote(d)+(gap?": ":":")+e);return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}()}).call(window)},function(a,b,c){function d(){function a(a){return e.SHA256(a).toString(e.enc.Hex)}function b(a){return a=a||{},
a.hasOwnProperty("encryptKey")||(a.encryptKey=l.encryptKey),a.hasOwnProperty("keyEncoding")||(a.keyEncoding=l.keyEncoding),a.hasOwnProperty("keyLength")||(a.keyLength=l.keyLength),a.hasOwnProperty("mode")||(a.mode=l.mode),-1==i.indexOf(a.keyEncoding.toLowerCase())&&(a.keyEncoding=l.keyEncoding),-1==j.indexOf(parseInt(a.keyLength,10))&&(a.keyLength=l.keyLength),-1==k.indexOf(a.mode.toLowerCase())&&(a.mode=l.mode),a}function c(a,b){return"base64"===b.keyEncoding?e.enc.Base64.parse(a):"hex"===b.keyEncoding?e.enc.Hex.parse(a):a}function d(b,d){return b=c(b,d),d.encryptKey?e.enc.Utf8.parse(a(b).slice(0,32)):b}function f(a){return"ecb"===a.mode?e.mode.ECB:e.mode.CBC}function g(a){return"cbc"===a.mode?e.enc.Utf8.parse(h):null}var h="0123456789012345",i=["hex","utf8","base64","binary"],j=[128,256],k=["ecb","cbc"],l={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(a,c,h){if(!c)return a;h=b(h);var i=g(h),j=f(h),k=d(c,h),l=JSON.stringify(a);return e.AES.encrypt(l,k,{iv:i,mode:j}).ciphertext.toString(e.enc.Base64)||a},decrypt:function(a,c,h){if(!c)return a;h=b(h);var i=g(h),j=f(h),k=d(c,h);try{var l=e.enc.Base64.parse(a),m=e.AES.decrypt({ciphertext:l},k,{iv:i,mode:j}).toString(e.enc.Utf8);return JSON.parse(m)}catch(n){return}}}}var e=c(3);a.exports=d},function(a,b){var c=c||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-e%4*8&255)<<24-(d+e)%4*8;else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;d<b;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;i<b;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=c,d=b.lib,e=d.WordArray,f=d.Hasher,d=b.algo,g=[],h=[],i=function(a){return 4294967296*(a-(0|a))|0},j=2,k=0;64>k;){var l;a:{l=j;for(var m=a.sqrt(l),n=2;n<=m;n++)if(!(l%n)){l=!1;break a}l=!0}l&&(8>k&&(g[k]=i(a.pow(j,.5))),h[k]=i(a.pow(j,1/3)),k++),j++}var o=[],d=d.SHA256=f.extend({_doReset:function(){this._hash=new e.init(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)o[m]=0|a[b+m];else{var n=o[m-15],p=o[m-2];o[m]=((n<<25|n>>>7)^(n<<14|n>>>18)^n>>>3)+o[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+o[m-16]}n=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+h[m]+o[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=g+n|0,g=f,f=e,e=d,d=n+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[14+(e+64>>>9<<4)]=a.floor(d/4294967296),c[15+(e+64>>>9<<4)]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=f.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=f._createHelper(d),b.HmacSHA256=f._createHmacHelper(d)}(Math),function(){var a=c,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init,"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c)),c.clamp();for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,i=g.words,j=0;j<d;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var a=c,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;e<c;e+=3)for(var f=(b[e>>>2]>>>24-e%4*8&255)<<16|(b[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|b[e+2>>>2]>>>24-(e+2)%4*8&255,g=0;4>g&&e+.75*g<c;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&-1!=(e=a.indexOf(e))&&(c=e);for(var e=[],f=0,g=0;g<c;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<g%4*2,i=d.indexOf(a.charAt(g))>>>6-g%4*2;e[f>>>2]|=(h|i)<<24-f%4*8,f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return((a=a+(b&c|~b&d)+e+g)<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return((a=a+(b&d|c&~d)+e+g)<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return((a=a+(b^c^d)+e+g)<<f|a>>>32-f)+b}function f(a,b,c,d,e,f,g){return((a=a+(c^(b|~d))+e+g)<<f|a>>>32-f)+b}for(var g=c,h=g.lib,i=h.WordArray,j=h.Hasher,h=g.algo,k=[],l=0;64>l;l++)k[l]=4294967296*a.abs(a.sin(l+1))|0;h=h.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,c){for(var g=0;16>g;g++){var h=c+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[c+0],i=a[c+1],j=a[c+2],l=a[c+3],m=a[c+4],n=a[c+5],o=a[c+6],p=a[c+7],q=a[c+8],r=a[c+9],s=a[c+10],t=a[c+11],u=a[c+12],v=a[c+13],w=a[c+14],x=a[c+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,k[0]),B=b(B,y,z,A,i,12,k[1]),A=b(A,B,y,z,j,17,k[2]),z=b(z,A,B,y,l,22,k[3]),y=b(y,z,A,B,m,7,k[4]),B=b(B,y,z,A,n,12,k[5]),A=b(A,B,y,z,o,17,k[6]),z=b(z,A,B,y,p,22,k[7]),y=b(y,z,A,B,q,7,k[8]),B=b(B,y,z,A,r,12,k[9]),A=b(A,B,y,z,s,17,k[10]),z=b(z,A,B,y,t,22,k[11]),y=b(y,z,A,B,u,7,k[12]),B=b(B,y,z,A,v,12,k[13]),A=b(A,B,y,z,w,17,k[14]),z=b(z,A,B,y,x,22,k[15]),y=d(y,z,A,B,i,5,k[16]),B=d(B,y,z,A,o,9,k[17]),A=d(A,B,y,z,t,14,k[18]),z=d(z,A,B,y,h,20,k[19]),y=d(y,z,A,B,n,5,k[20]),B=d(B,y,z,A,s,9,k[21]),A=d(A,B,y,z,x,14,k[22]),z=d(z,A,B,y,m,20,k[23]),y=d(y,z,A,B,r,5,k[24]),B=d(B,y,z,A,w,9,k[25]),A=d(A,B,y,z,l,14,k[26]),z=d(z,A,B,y,q,20,k[27]),y=d(y,z,A,B,v,5,k[28]),B=d(B,y,z,A,j,9,k[29]),A=d(A,B,y,z,p,14,k[30]),z=d(z,A,B,y,u,20,k[31]),y=e(y,z,A,B,n,4,k[32]),B=e(B,y,z,A,q,11,k[33]),A=e(A,B,y,z,t,16,k[34]),z=e(z,A,B,y,w,23,k[35]),y=e(y,z,A,B,i,4,k[36]),B=e(B,y,z,A,m,11,k[37]),A=e(A,B,y,z,p,16,k[38]),z=e(z,A,B,y,s,23,k[39]),y=e(y,z,A,B,v,4,k[40]),B=e(B,y,z,A,h,11,k[41]),A=e(A,B,y,z,l,16,k[42]),z=e(z,A,B,y,o,23,k[43]),y=e(y,z,A,B,r,4,k[44]),B=e(B,y,z,A,u,11,k[45]),A=e(A,B,y,z,x,16,k[46]),z=e(z,A,B,y,j,23,k[47]),y=f(y,z,A,B,h,6,k[48]),B=f(B,y,z,A,p,10,k[49]),A=f(A,B,y,z,w,15,k[50]),z=f(z,A,B,y,n,21,k[51]),y=f(y,z,A,B,u,6,k[52]),B=f(B,y,z,A,l,10,k[53]),A=f(A,B,y,z,s,15,k[54]),z=f(z,A,B,y,i,21,k[55]),y=f(y,z,A,B,q,6,k[56]),B=f(B,y,z,A,x,10,k[57]),A=f(A,B,y,z,o,15,k[58]),z=f(z,A,B,y,v,21,k[59]),y=f(y,z,A,B,m,6,k[60]),B=f(B,y,z,A,t,10,k[61]),A=f(A,B,y,z,j,15,k[62]),z=f(z,A,B,y,r,21,k[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[15+(e+64>>>9<<4)]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[14+(e+64>>>9<<4)]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}}),g.MD5=j._createHelper(h),g.HmacMD5=j._createHmacHelper(h)}(Math),function(){var a=c,b=a.lib,d=b.Base,e=b.WordArray,b=a.algo,f=b.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,d=c.hasher.create(),f=e.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&d.update(i);var i=d.update(a).finalize(b);d.reset();for(var j=1;j<c;j++)i=d.finalize(i),d.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return f.create(c).compute(a,b)}}(),c.lib.Cipher||function(a){var b=c,d=b.lib,e=d.Base,f=d.WordArray,g=d.BufferedBlockAlgorithm,h=b.enc.Base64,i=b.algo.EvpKDF,j=d.Cipher=g.extend({cfg:e.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?p:o).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?p:o).decrypt(a,b,c,d)}}}});d.StreamCipher=j.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var k=b.mode={},l=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;f<d;f++)b[c+f]^=e[f]},m=(d.BlockCipherMode=e.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();m.Encryptor=m.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;l.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),m.Decryptor=m.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),l.call(this,a,b,d),this._prevBlock=e}}),k=k.CBC=m,m=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,e=[],g=0;g<c;g+=4)e.push(d);c=f.create(e,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},d.BlockCipher=j.extend({cfg:j.cfg.extend({mode:k,padding:m}),reset:function(){j.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=e.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),k=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?f.create([1398893684,1701076831]).concat(a).concat(b):b).toString(h)},parse:function(a){a=h.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=f.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},o=d.SerializableCipher=e.extend({cfg:e.extend({format:k}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,n.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=f.random(8)),a=i.create({keySize:b+c}).compute(a,d),c=f.create(a.words.slice(b),4*c),a.sigBytes=4*b,n.create({key:a,iv:c,salt:d})}},p=d.PasswordBasedCipher=o.extend({cfg:o.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=o.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,o.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=c,b=a.lib.BlockCipher,d=a.algo,e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=0;256>p;p++)o[p]=128>p?p<<1:p<<1^283;for(var q=0,r=0,p=0;256>p;p++){var s=r^r<<1^r<<2^r<<3^r<<4,s=s>>>8^255&s^99;e[q]=s,f[s]=q;var t=o[q],u=o[t],v=o[u],w=257*o[s]^16843008*s;g[q]=w<<24|w>>>8,h[q]=w<<16|w>>>16,i[q]=w<<8|w>>>24,j[q]=w,w=16843009*v^65537*u^257*t^16843008*q,k[s]=w<<24|w>>>8,l[s]=w<<16|w>>>16,m[s]=w<<8|w>>>24,n[s]=w,q?(q=t^o[o[o[v^t]]],r^=o[o[r]]):q=r=1}var x=[0,1,2,4,8,16,32,64,128,27,54],d=d.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),d=this._keySchedule=[],f=0;f<a;f++)if(f<c)d[f]=b[f];else{var g=d[f-1];f%c?6<c&&4==f%c&&(g=e[g>>>24]<<24|e[g>>>16&255]<<16|e[g>>>8&255]<<8|e[255&g]):(g=g<<8|g>>>24,g=e[g>>>24]<<24|e[g>>>16&255]<<16|e[g>>>8&255]<<8|e[255&g],g^=x[f/c|0]<<24),d[f]=d[f-c]^g}for(b=this._invKeySchedule=[],c=0;c<a;c++)f=a-c,g=c%4?d[f]:d[f-4],b[c]=4>c||4>=f?g:k[e[g>>>24]]^l[e[g>>>16&255]]^m[e[g>>>8&255]]^n[e[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,g,h,i,j,e)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,k,l,m,n,f),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;o<i;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(d)}(),c.mode.ECB=function(){var a=c.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(a,b){this._cipher.encryptBlock(a,b)}}),a.Decryptor=a.extend({processBlock:function(a,b){this._cipher.decryptBlock(a,b)}}),a}(),a.exports=c},function(a,b){a.exports={name:"pubnub",preferGlobal:!1,version:"3.15.2",author:"PubNub <support@pubnub.com>",description:"Publish & Subscribe Real-time Messaging with PubNub",contributors:[{name:"Stephen Blum",email:"stephen@pubnub.com"}],bin:{},scripts:{test:"grunt test --force"},main:"./node.js/pubnub.js",browser:"./modern/dist/pubnub.js",repository:{type:"git",url:"git://github.com/pubnub/javascript.git"},keywords:["cloud","publish","subscribe","websockets","comet","bosh","xmpp","real-time","messaging"],dependencies:{agentkeepalive:"~0.2",lodash:"^4.1.0"},noAnalyze:!1,devDependencies:{chai:"^3.5.0",eslint:"2.4.0","eslint-config-airbnb":"^6.0.2","eslint-plugin-flowtype":"^2.1.0","eslint-plugin-mocha":"^2.0.0","eslint-plugin-react":"^4.1.0","flow-bin":"^0.22.0",grunt:"^0.4.5","grunt-contrib-clean":"^1.0.0","grunt-contrib-copy":"^0.8.2","grunt-contrib-uglify":"^0.11.1","grunt-env":"^0.4.4","grunt-eslint":"^18.0.0","grunt-flow":"^1.0.3","grunt-karma":"^0.12.1","grunt-mocha-istanbul":"^3.0.1","grunt-text-replace":"^0.4.0","grunt-webpack":"^1.0.11","imports-loader":"^0.6.5",isparta:"^4.0.0","json-loader":"^0.5.4",karma:"^0.13.21","karma-chai":"^0.1.0","karma-mocha":"^0.2.1","karma-phantomjs-launcher":"^1.0.0","karma-spec-reporter":"0.0.24","load-grunt-tasks":"^3.4.0",mocha:"^2.4.5",nock:"^1.1.0","node-uuid":"^1.4.7",nodeunit:"^0.9.0","phantomjs-prebuilt":"^2.1.4",proxyquire:"^1.7.4",sinon:"^1.17.2","uglify-js":"^2.6.1",underscore:"^1.7.0",webpack:"^1.12.13","webpack-dev-server":"^1.14.1"},bundleDependencies:[],license:"MIT",engine:{node:">=0.8"},files:["core","node.js","modern","CHANGELOG","FUTURE.md","LICENSE","README.md"]}},function(a,b,c){function d(){return"x"+ ++m+ +new Date}function e(a,b){var c=[];return l.each(a,function(a,d){b?a.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function f(a,b){var c=[];return l.each(a,function(a,d){b?a.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function g(){n||(n=1,l.each(o,function(a){a()}))}function h(a){var b=a||{apns:{}};return b.getPubnubMessage=function(){var a={};if(Object.keys(b.apns).length){a.pn_apns={aps:{alert:b.apns.alert,badge:b.apns.badge}};for(var c in b.apns)a.pn_apns[c]=b.apns[c];var d=["badge","alert"];for(var c in d)delete a.pn_apns[d[c]]}b.gcm&&(a.pn_gcm={data:b.gcm});for(var c in b)a[c]=b[c];var e=["apns","gcm","publish","channel","callback","error"];for(var c in e)delete a[e[c]];return a},b.publish=function(){var a=b.getPubnubMessage();b.pubnub&&b.channel&&b.pubnub.publish({message:a,channel:b.channel,callback:b.callback,error:b.error})},b}function i(a){function b(a){return a||(a={}),l.each(ta,function(b,c){b in a||(a[b]=c)}),a}function c(a){var b=[];return l.each(a,function(a,c){b.push(a)}),b}function h(a){return c(a).sort()}function i(a){var b="",c=h(a);for(var d in c){var e=c[d];b+=e+"="+l.pamEncode(a[e]),d!=c.length-1&&(b+="&")}return b}function j(a,b,c){var d=!1;if(void 0===a)return b;if("number"==typeof a)d=!(a>u||0==a);else{if("boolean"==typeof a)return a?v:0;d=!0}return d?(c&&c("Presence Heartbeat value invalid. Valid range ( x > "+u+" or x = 0). Current Value : "+(b||u)),b||u):a}function k(a,b){return Fa.encrypt(a,b||ya)||a}function m(a,b){return Fa.decrypt(a,b||ya)||Fa.decrypt(a,ya)||a}function y(){if(clearTimeout(ma),!oa||oa>=500||oa<1||!e(ja,!0).length&&!f(ka,!0).length)return void(pa=!1);pa=!0,Ga.presence_heartbeat({callback:function(a){ma=l.timeout(y,oa*t)},error:function(a){ua&&ua("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(a)),ma=l.timeout(y,oa*t)}})}function z(){!pa&&y()}function A(a){if(qa){if(!aa.length)return}else{if(a&&(aa.sending=0),aa.sending||!aa.length)return;aa.sending=1}sa(aa.shift())}function B(a){var b=0;return l.each(f(ka),function(c){var d=ka[c];d&&(b++,(a||function(){})(d))}),b}function C(a){var b=0;return l.each(e(ja),function(c){var d=ja[c];d&&(b++,(a||function(){})(d))}),b}function D(a,b,c){if("object"==typeof a){if(a.error){var d={};return a.message&&(d.message=a.message),a.payload&&(d.payload=a.payload),void(c&&c(d))}if(a.payload)return void(a.next_page?b&&b(a.payload,a.next_page):b&&b(a.payload))}b&&b(a)}function E(a,b){if("object"==typeof a&&a.error){var c={};return a.message&&(c.message=a.message),a.payload&&(c.payload=a.payload),void(b&&b(c))}b&&b(a)}function F(a,c,d,e){var c=a.callback||c,f=a.error||ua,g=wa();e=e||{},e.auth||(e.auth=a.auth_key||U);var h=[Z,"v1","channel-registration","sub-key",T];h.push.apply(h,d),g&&(e.callback=g),sa({callback:g,data:b(e),success:function(a){D(a,c,f)},fail:function(a){E(a,f)},url:h})}function G(){va()||I(1,{error:"Offline. Please check your network settings."}),L&&clearTimeout(L),L=l.timeout(G,t)}function H(){Q&&Ga.time(function(a){K(function(){},a),a||I(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),M&&clearTimeout(M),M=l.timeout(H,P)})}function I(a,b){fa&&fa(a,b),fa=null,clearTimeout(L),clearTimeout(M)}function J(a){return l.rnow()-ca-a/1e4}function K(a,b){function c(b){if(b){var c=b/1e4,e=(l.rnow()-d)/2;ca=l.rnow()-(c+e),a&&a(ca)}}var d=l.rnow();b&&c(b)||Ga.time(c)}var L,M,N=+a.windowing||q,O=(+a.timeout||r)*t,P=(+a.keepalive||s)*t,Q=a.timecheck||0,R=a.noleave||0,S=a.publish_key,T=a.subscribe_key,U=a.auth_key||"",V=a.secret_key||"",W=a.hmac_SHA256,X=a.ssl?"s":"",Y="http"+X+"://"+(a.origin||"pubsub.pubnub.com"),Z=x(Y),$=x(Y),_=function(){},aa=[],ba=!0,ca=0,da=0,ea=0,fa=0,ga=a.restore||0,ha=0,ia=!1,ja={},ka={},la={},ma=null,na=j(a.heartbeat||a.pnexpires||0,a.error),oa=a.heartbeat_interval||na/2-1,pa=!1,qa=a.no_wait_for_pending,ra=a["compatible_3.5"]||!1,sa=a.xdr,ta=a.params||{},ua=a.error||function(){},va=a._is_online||function(){return 1},wa=a.jsonp_cb||function(){return 0},xa=a.db||{get:function(){},set:function(){}},ya=a.cipher_key,za=a.uuid||!a.unique_uuid&&xa&&xa.get(T+"uuid")||"",Aa=a.instance_id||!1,Ba="",Ca=a.shutdown,Da=void 0===a.use_send_beacon||a.use_send_beacon,Ea=Da?a.sendBeacon:null;2===na&&(oa=1);var Fa=a.crypto_obj||{encrypt:function(a,b){return a},decrypt:function(a,b){return a}},Ga={LEAVE:function(a,c,d,e,f){var g,h,i={uuid:za,auth:d||U},j=x(Y),e=e||function(){},k=f||function(){},m=wa();if(a.indexOf(p)>0)return!0;if(ra){if(!X)return!1;if("0"==m)return!1}if(R)return!1;if("0"!=m&&(i.callback=m),Aa&&(i.instanceid=Ba),g=[j,"v2","presence","sub_key",T,"channel",l.encode(a),"leave"],h=b(i),Ea){var n=l.buildURL(g,h);if(Ea(n))return e&&e({status:200,action:"leave",message:"OK",service:"Presence"}),!0}return sa({blocking:c||X,callback:m,data:h,success:function(a){D(a,e,k)},fail:function(a){E(a,k)},url:g}),!0},LEAVE_GROUP:function(a,c,d,e,f){var g,h,i={uuid:za,auth:d||U},j=x(Y),e=e||function(){},k=f||function(){},m=wa();if(a.indexOf(p)>0)return!0;if(ra){if(!X)return!1;if("0"==m)return!1}if(R)return!1;if("0"!=m&&(i.callback=m),a&&a.length>0&&(i["channel-group"]=a),Aa&&(i.instanceid=Ba),g=[j,"v2","presence","sub_key",T,"channel",l.encode(","),"leave"],h=b(i),Ea){var n=l.buildURL(g,h);if(Ea(n))return e&&e({status:200,action:"leave",message:"OK",service:"Presence"}),!0}return sa({blocking:c||X,callback:m,data:h,success:function(a){D(a,e,k)},fail:function(a){E(a,k)},url:g}),!0},set_resumed:function(a){ia=a},get_cipher_key:function(){return ya},set_cipher_key:function(a){ya=a},raw_encrypt:function(a,b){return k(a,b)},raw_decrypt:function(a,b){return m(a,b)},get_heartbeat:function(){return na},set_heartbeat:function(a,b){na=j(a,na,ua),oa=b||na/2-1,2==na&&(oa=1),_(),y()},get_heartbeat_interval:function(){return oa},set_heartbeat_interval:function(a){oa=a,y()},get_version:function(){return w},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b={aps:{badge:1,alert:""}};for(var c in a)c[b]=a[c];return b},_add_param:function(a,b){ta[a]=b},channel_group:function(a,b){var c,d,e=a.channel_group,b=b||a.callback,f=a.channels||a.channel,g=a.cloak,h=[],i={},j=a.mode||"add";if(e){var k=e.split(":");k.length>1?(c="*"===k[0]?null:k[0],d=k[1]):d=k[0]}c&&h.push("namespace")&&h.push(l.encode(c)),h.push("channel-group"),d&&"*"!==d&&h.push(d),f?(l.isArray(f)&&(f=f.join(",")),i[j]=f,i.cloak=ba?"true":"false"):"remove"===j&&h.push("remove"),void 0!==g&&(i.cloak=g?"true":"false"),F(a,b,h,i)},channel_group_list_groups:function(a,b){var c;c=a.namespace||a.ns||a.channel_group||null,c&&(a.channel_group=c+":*"),Ga.channel_group(a,b)},channel_group_list_channels:function(a,b){if(!a.channel_group)return ua("Missing Channel Group");Ga.channel_group(a,b)},channel_group_remove_channel:function(a,b){return a.channel_group?a.channel||a.channels?(a.mode="remove",void Ga.channel_group(a,b)):ua("Missing Channel"):ua("Missing Channel Group")},channel_group_remove_group:function(a,b){return a.channel_group?a.channel?ua("Use channel_group_remove_channel if you want to remove a channel from a group."):(a.mode="remove",void Ga.channel_group(a,b)):ua("Missing Channel Group")},channel_group_add_channel:function(a,b){return a.channel_group?a.channel||a.channels?void Ga.channel_group(a,b):ua("Missing Channel"):ua("Missing Channel Group")},channel_group_cloak:function(a,b){if(void 0===a.cloak)return void b(ba);ba=a.cloak,Ga.channel_group(a,b)},channel_group_list_namespaces:function(a,b){F(a,b,["namespace"])},channel_group_remove_namespace:function(a,b){F(a,b,["namespace",a.namespace,"remove"])},history:function(a,c){var c=a.callback||c,d=a.count||a.limit||100,e=a.reverse||"false",f=a.error||function(){},g=a.auth_key||U,h=a.cipher_key,i=a.channel,j=a.channel_group,k=a.start,n=a.end,o=a.include_token,p=a.string_message_token||!1,q={},r=wa();return i||j?c?T?(q.stringtoken="true",q.count=d,q.reverse=e,q.auth=g,j&&(q["channel-group"]=j,i||(i=",")),r&&(q.callback=r),k&&(q.start=k),n&&(q.end=n),o&&(q.include_token="true"),p&&(q.string_message_token="true"),void sa({callback:r,data:b(q),success:function(a){if("object"==typeof a&&a.error)return void f({message:a.message,payload:a.payload});for(var b=a[0],d=[],e=0;e<b.length;e++)if(o){var g=m(b[e].message,h),i=b[e].timetoken;try{d.push({message:JSON.parse(g),timetoken:i})}catch(j){d.push({message:g,timetoken:i})}}else{var g=m(b[e],h);try{d.push(JSON.parse(g))}catch(j){d.push(g)}}c([d,a[1],a[2]])},fail:function(a){E(a,f)},url:[Z,"v2","history","sub-key",T,"channel",l.encode(i)]})):ua("Missing Subscribe Key"):ua("Missing Callback"):ua("Missing Channel")},replay:function(a,c){var d,c=c||a.callback||function(){},e=a.auth_key||U,f=a.source,g=a.destination,h=a.error||a.error||function(){},i=a.stop,j=a.start,k=a.end,l=a.reverse,m=a.limit,n=wa(),o={};return f?g?S?T?("0"!=n&&(o.callback=n),i&&(o.stop="all"),l&&(o.reverse="true"),j&&(o.start=j),k&&(o.end=k),m&&(o.count=m),o.auth=e,d=[Z,"v1","replay",S,T,f,g],void sa({callback:n,success:function(a){D(a,c,h)},fail:function(){c([0,"Disconnected"])},url:d,data:b(o)})):ua("Missing Subscribe Key"):ua("Missing Publish Key"):ua("Missing Destination Channel"):ua("Missing Source Channel")},auth:function(a){U=a,_()},time:function(a){var c=wa(),d={uuid:za,auth:U};Aa&&(d.instanceid=Ba),sa({callback:c,data:b(d),url:[Z,"time",c],success:function(b){a(b[0])},fail:function(){a(0)}})},publish:function(a,c){var d=a.message;if(!d)return ua("Missing Message");var e,f,c=c||a.callback||d.callback||a.success||function(){},g=a.channel||d.channel,h=a.meta||a.metadata,i=a.auth_key||U,j=a.cipher_key,m=a.error||d.error||function(){},n=a.post||!1,o=!("store_in_history"in a)||a.store_in_history,p=!("replicate"in a)||a.replicate,q=wa(),r="push";return a.prepend&&(r="unshift"),g?S?T?(d.getPubnubMessage&&(d=d.getPubnubMessage()),d=JSON.stringify(k(d,j)),f=[Z,"publish",S,T,0,l.encode(g),q,l.encode(d)],e={uuid:za,auth:i},h&&"object"==typeof h&&(e.meta=JSON.stringify(h)),o||(e.store="0"),p||(e.norep="true"),Aa&&(e.instanceid=Ba),aa[r]({callback:q,url:f,data:b(e),fail:function(a){E(a,m),A(1)},success:function(a){D(a,c,m),A(1)},mode:n?"POST":"GET"}),void A()):ua("Missing Subscribe Key"):ua("Missing Publish Key"):ua("Missing Channel")},fire:function(a,b){a.store_in_history=!1,a.replicate=!1,Ga.publish(a,b)},unsubscribe:function(a,b){var c=a.channel,d=a.channel_group,e=a.auth_key||U,b=b||a.callback||function(){},f=a.error||function(){};if(!c&&!d)return ua("Missing Channel or Channel Group");if(!T)return ua("Missing Subscribe Key");if(c){var g=l.isArray(c)?c:(""+c).split(","),h=[],i=[];if(l.each(g,function(a){ja[a]&&h.push(a)}),0==h.length)return void b({action:"leave"});l.each(h,function(a){i.push(a+p)}),l.each(h.concat(i),function(a){a in ja&&delete ja[a],a in la&&delete la[a]}),0===ja.length&&0===ka.length&&(ha=0);var j=!0;n&&(j=Ga.LEAVE(h.join(","),0,e,b,f)),j||b({action:"leave"})}if(d){var k=l.isArray(d)?d:(""+d).split(","),m=[],o=[];if(l.each(k,function(a){ka[a]&&m.push(a)}),0==m.length)return void b({action:"leave"});l.each(m,function(a){o.push(a+p)}),l.each(m.concat(o),function(a){a in ka&&delete ka[a],a in la&&delete la[a]}),0===ja.length&&0===ka.length&&(ha=0);var j=!0;n&&(j=Ga.LEAVE_GROUP(m.join(","),0,e,b,f)),j||b({action:"leave"})}_()},subscribe:function(a,c){function d(a){a?l.timeout(_,D):(Z=x(Y,1),$=x(Y,1),l.timeout(function(){Ga.time(d)},t)),C(function(b){if(a&&b.disconnected)return b.disconnected=0,b.reconnect(b.name);a||b.disconnected||(b.disconnected=1,b.disconnect(b.name))}),B(function(b){if(a&&b.disconnected)return b.disconnected=0,b.reconnect(b.name);a||b.disconnected||(b.disconnected=1,b.disconnect(b.name))})}function g(){var a=wa(),c=e(ja).join(","),h=f(ka).join(",");if(c||h){c||(c=","),I();var i=b({uuid:za,auth:U});h&&(i["channel-group"]=h);JSON.stringify(la).length>2&&(i.state=JSON.stringify(la)),na&&(i.heartbeat=na),Aa&&(i.instanceid=Ba),z(),fa=sa({timeout:A,callback:a,fail:function(a){a&&a.error&&a.service?(E(a,r),d(!1)):Ga.time(function(b){!b&&E(a,r),d(b)})},data:b(i),url:[$,"subscribe",T,l.encode(c),a,ha],success:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return r(a),l.timeout(_,t);if(s(a[1]),ha=!ha&&ga&&xa.get(T)||a[1],C(function(a){a.connected||(a.connected=1,a.connect(a.name))}),B(function(a){a.connected||(a.connected=1,a.connect(a.name))}),ia&&!ga)return ha=0,ia=!1,xa.set(T,0),void l.timeout(g,D);w&&(ha=1e4,w=0),xa.set(T,a[1]);var b=function(){var b="",c="";a.length>3?(b=a[3],c=a[2]):b=a.length>2?a[2]:l.map(e(ja),function(b){return l.map(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var d=b.split(","),f=c?c.split(","):[];return function(){var a=d.shift()||ea,b=f.shift(),c={};b?(a&&a.indexOf("-pnpres")>=0&&b.indexOf("-pnpres")<0&&(b+="-pnpres"),c=ka[b]||ja[b]||{callback:function(){}}):c=ja[a];var e=[c.callback||da,a.split(p)[0]];return b&&e.push(b.split(p)[0]),e}}(),c=J(+a[1]);l.each(a[0],function(d){var e=b(),f=m(d,ja[e[1]]?ja[e[1]].cipher_key:null);e[0]&&e[0](f,a,e[2]||e[1],c,e[1])}),l.timeout(g,D)}})}}var h=a.channel,i=a.channel_group,c=c||a.callback,c=c||a.message,j=a.connect||function(){},k=a.reconnect||function(){},q=a.disconnect||function(){},r=a.error||r||function(){},s=a.idle||function(){},u=a.presence||0,v=a.noheresync||0,w=a.backfill||0,y=a.timetoken||0,A=a.timeout||O,D=a.windowing||N,F=a.state,G=a.heartbeat||a.pnexpires,H=a.heartbeat_interval,K=a.restore||ga;return U=a.auth_key||U,ga=K,ha=y,h||i?c?T?((G||0===G||H||0===H)&&Ga.set_heartbeat(G,H),h&&l.each((h.join?h.join(","):""+h).split(","),function(d){var e=ja[d]||{};ja[ea=d]={name:d,connected:e.connected,disconnected:e.disconnected,subscribed:1,callback:da=c,cipher_key:a.cipher_key,connect:j,
disconnect:q,reconnect:k},F&&(la[d]=d in F?F[d]:F),u&&(Ga.subscribe({channel:d+p,callback:u,restore:K}),e.subscribed||v||Ga.here_now({channel:d,data:b({uuid:za,auth:U}),callback:function(a){l.each("uuids"in a?a.uuids:[],function(b){u({action:"join",uuid:b,timestamp:Math.floor(l.rnow()/1e3),occupancy:a.occupancy||1},a,d)})}}))}),i&&l.each((i.join?i.join(","):""+i).split(","),function(d){var e=ka[d]||{};ka[d]={name:d,connected:e.connected,disconnected:e.disconnected,subscribed:1,callback:da=c,cipher_key:a.cipher_key,connect:j,disconnect:q,reconnect:k},u&&(Ga.subscribe({channel_group:d+p,callback:u,restore:K,auth_key:U}),e.subscribed||v||Ga.here_now({channel_group:d,data:b({uuid:za,auth:U}),callback:function(a){l.each("uuids"in a?a.uuids:[],function(b){u({action:"join",uuid:b,timestamp:Math.floor(l.rnow()/1e3),occupancy:a.occupancy||1},a,d)})}}))}),_=function(){I(),l.timeout(g,D)},n?void _():o.push(_)):ua("Missing Subscribe Key"):ua("Missing Callback"):ua("Missing Channel")},here_now:function(a,c){var c=a.callback||c,d=a.debug,e=a.error||function(){},f=a.auth_key||U,g=a.channel,h=a.channel_group,i=wa(),j=!("uuids"in a)||a.uuids,k=a.state,m={uuid:za,auth:f};if(j||(m.disable_uuids=1),k&&(m.state=1),!c)return ua("Missing Callback");if(!T)return ua("Missing Subscribe Key");var n=[Z,"v2","presence","sub_key",T];g&&n.push("channel")&&n.push(l.encode(g)),"0"!=i&&(m.callback=i),h&&(m["channel-group"]=h,!g&&n.push("channel")&&n.push(",")),Aa&&(m.instanceid=Ba),sa({callback:i,data:b(m),success:function(a){D(a,c,e)},fail:function(a){E(a,e)},debug:d,url:n})},where_now:function(a,c){var c=a.callback||c,d=a.error||function(){},e=a.auth_key||U,f=wa(),g=a.uuid||za,h={auth:e};return c?T?("0"!=f&&(h.callback=f),Aa&&(h.instanceid=Ba),void sa({callback:f,data:b(h),success:function(a){D(a,c,d)},fail:function(a){E(a,d)},url:[Z,"v2","presence","sub_key",T,"uuid",l.encode(g)]})):ua("Missing Subscribe Key"):ua("Missing Callback")},state:function(a,c){var d,c=a.callback||c||function(a){},e=a.error||function(){},f=a.auth_key||U,g=wa(),h=a.state,i=a.uuid||za,j=a.channel,k=a.channel_group,m=b({auth:f});return T?i?j||k?("0"!=g&&(m.callback=g),void 0!==j&&ja[j]&&ja[j].subscribed&&h&&(la[j]=h),void 0!==k&&ka[k]&&ka[k].subscribed&&(h&&(la[k]=h),m["channel-group"]=k,j||(j=",")),m.state=JSON.stringify(h),Aa&&(m.instanceid=Ba),d=h?[Z,"v2","presence","sub-key",T,"channel",j,"uuid",i,"data"]:[Z,"v2","presence","sub-key",T,"channel",j,"uuid",l.encode(i)],void sa({callback:g,data:b(m),success:function(a){D(a,c,e)},fail:function(a){E(a,e)},url:d})):ua("Missing Channel"):ua("Missing UUID"):ua("Missing Subscribe Key")},grant:function(a,c){var c=a.callback||c,d=a.error||function(){},e=a.channel||a.channels,f=a.channel_group,g=wa(),h=a.ttl,j=a.read?"1":"0",k=a.write?"1":"0",m=a.manage?"1":"0",n=a.auth_key||a.auth_keys;if(!c)return ua("Missing Callback");if(!T)return ua("Missing Subscribe Key");if(!S)return ua("Missing Publish Key");if(!V)return ua("Missing Secret Key");var o=Math.floor((new Date).getTime()/1e3),p=T+"\n"+S+"\ngrant\n",q={w:k,r:j,timestamp:o};a.manage&&(q.m=m),l.isArray(e)&&(e=e.join(",")),l.isArray(n)&&(n=n.join(",")),void 0!==e&&null!=e&&e.length>0&&(q.channel=e),void 0!==f&&null!=f&&f.length>0&&(q["channel-group"]=f),"0"!=g&&(q.callback=g),(h||0===h)&&(q.ttl=h),n&&(q.auth=n),q=b(q),n||delete q.auth,p+=i(q);var r=W(p,V);r=r.replace(/\+/g,"-"),r=r.replace(/\//g,"_"),q.signature=r,sa({callback:g,data:q,success:function(a){D(a,c,d)},fail:function(a){E(a,d)},url:[Z,"v1","auth","grant","sub-key",T]})},mobile_gw_provision:function(a){var b,c,d=a.callback||function(){},e=a.auth_key||U,f=a.error||function(){},g=wa(),h=a.channel,i=a.op,j=a.gw_type,k=a.device_id;return k?j?i?h?T?(c=[Z,"v1/push/sub-key",T,"devices",k],b={uuid:za,auth:e,type:j},"add"==i?b.add=h:"remove"==i&&(b.remove=h),Aa&&(b.instanceid=Ba),void sa({callback:g,data:b,success:function(a){D(a,d,f)},fail:function(a){E(a,f)},url:c})):ua("Missing Subscribe Key"):ua("Missing gw destination Channel (channel)"):ua("Missing GW Operation (op: add or remove)"):ua("Missing GW Type (gw_type: gcm or apns)"):ua("Missing Device ID (device_id)")},audit:function(a,c){var c=a.callback||c,d=a.error||function(){},e=a.channel,f=a.channel_group,g=a.auth_key,h=wa();if(!c)return ua("Missing Callback");if(!T)return ua("Missing Subscribe Key");if(!S)return ua("Missing Publish Key");if(!V)return ua("Missing Secret Key");var j=Math.floor((new Date).getTime()/1e3),k=T+"\n"+S+"\naudit\n",l={timestamp:j};"0"!=h&&(l.callback=h),void 0!==e&&null!=e&&e.length>0&&(l.channel=e),void 0!==f&&null!=f&&f.length>0&&(l["channel-group"]=f),g&&(l.auth=g),l=b(l),g||delete l.auth,k+=i(l);var m=W(k,V);m=m.replace(/\+/g,"-"),m=m.replace(/\//g,"_"),l.signature=m,sa({callback:h,data:l,success:function(a){D(a,c,d)},fail:function(a){E(a,d)},url:[Z,"v1","auth","audit","sub-key",T]})},revoke:function(a,b){a.read=!1,a.write=!1,Ga.grant(a,b)},set_uuid:function(a){za=a,_()},get_uuid:function(){return za},isArray:function(a){return l.isArray(a)},get_subscribed_channels:function(){return e(ja,!0)},presence_heartbeat:function(a){var c=a.callback||function(){},d=a.error||function(){},g=wa(),h={uuid:za,auth:U};JSON.stringify(la).length>2&&(h.state=JSON.stringify(la)),na>0&&na<320&&(h.heartbeat=na),"0"!=g&&(h.callback=g);var i=l.encode(e(ja,!0).join(",")),j=f(ka,!0).join(",");i||(i=","),j&&(h["channel-group"]=j),Aa&&(h.instanceid=Ba),sa({callback:g,data:b(h),url:[Z,"v2","presence","sub-key",T,"channel",i,"heartbeat"],success:function(a){D(a,c,d)},fail:function(a){E(a,d)}})},stop_timers:function(){clearTimeout(L),clearTimeout(M),clearTimeout(ma)},shutdown:function(){Ga.stop_timers(),Ca&&Ca()},xdr:sa,ready:g,db:xa,uuid:l.generateUUID,map:l.map,each:l.each,"each-channel":C,grep:l.grep,offline:function(){I(1,{message:"Offline. Please check your network settings."})},supplant:l.supplant,now:l.rnow,unique:d,updater:l.updater};return za||(za=Ga.uuid()),Ba||(Ba=Ga.uuid()),xa.set(T+"uuid",za),L=l.timeout(G,t),M=l.timeout(H,P),ma=l.timeout(z,(oa-3)*t),K(),Ga}var j=c(4),k=c(6),l=c(7),m=1,n=!1,o=[],p="-pnpres",q=10,r=310,s=60,t=1e3,u=5,v=30,w=j.version,x=function(){var a=20,b=Math.floor(Math.random()*a);return function(c,d){return c.indexOf("pubsub.")>0&&c.replace("pubsub","ps"+(d?l.generateUUID().split("-")[0]:++b<a?b:b=1))||c}}();a.exports={PN_API:i,unique:d,PNmessage:h,DEF_TIMEOUT:15e3,timeout:l.timeout,build_url:l.buildURL,each:l.each,uuid:l.generateUUID,URLBIT:k.URLBIT,grep:l.grep,supplant:l.supplant,now:l.rnow,updater:l.updater,map:l.map}},function(a,b){a.exports={PARAMSBIT:"&",URLBIT:"/"}},function(a,b,c){function d(){return+new Date}function e(a){return!!a&&"string"!=typeof a&&(Array.isArray&&Array.isArray(a)||"number"==typeof a.length)}function f(a,b){if(a&&b)if(e(a))for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(var c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function g(a){return encodeURIComponent(a)}function h(a,b){var c=a.join(p.URLBIT),d=[];return b?(f(b,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;void 0!==b&&null!==b&&g(c).length>0&&d.push(a+"="+g(c))}),c+="?"+d.join(p.PARAMSBIT)):c}function i(a,b){var c,e=0,f=function(){e+b>d()?(clearTimeout(c),c=setTimeout(f,b)):(e=d(),a())};return f}function j(a,b){var c=[];return f(a||[],function(a){b(a)&&c.push(a)}),c}function k(a,b){return a.replace(q,function(a,c){return b[c]||a})}function l(a,b){if("undefined"!=typeof setTimeout)return setTimeout(a,b)}function m(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)});return a&&a(b),b}function n(a,b){var c=[];return f(a||[],function(a,d){c.push(b(a,d))}),c}function o(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}var p=c(6),q=/{([\w\-]+)}/g;a.exports={buildURL:h,encode:g,each:f,updater:i,rnow:d,isArray:e,map:n,pamEncode:o,generateUUID:m,timeout:l,supplant:k,grep:j}},function(a,b){var c=function(a,b){if(!(this instanceof c))return new c(a,b);var d=this,a=d.url=a||"",e=(d.protocol=b||"Sec-WebSocket-Protocol",a.split("/")),f={ssl:"wss:"===e[0],origin:e[2],publish_key:e[3],subscribe_key:e[4],channel:e[5]};if(d.CONNECTING=0,d.OPEN=1,d.CLOSING=2,d.CLOSED=3,d.CLOSE_NORMAL=1e3,d.CLOSE_GOING_AWAY=1001,d.CLOSE_PROTOCOL_ERROR=1002,d.CLOSE_UNSUPPORTED=1003,d.CLOSE_TOO_LARGE=1004,d.CLOSE_NO_STATUS=1005,d.CLOSE_ABNORMAL=1006,d.onclose=d.onerror=d.onmessage=d.onopen=d.onsend=function(){},d.binaryType="",d.extensions="",d.bufferedAmount=0,d.trasnmitting=!1,d.buffer=[],d.readyState=d.CONNECTING,!a)return d.readyState=d.CLOSED,d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),d;d.pubnub=PUBNUBVisitor.init(f),d.pubnub.setup=f,d.setup=f,d.pubnub.subscribe({restore:!1,channel:f.channel,disconnect:d.onerror,reconnect:d.onopen,error:function(){d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(a){d.onmessage({data:a})},connect:function(){d.readyState=d.OPEN,d.onopen()}})};c.prototype.send=function(a){var b=this;b.pubnub.publish({channel:b.pubnub.setup.channel,message:a,callback:function(a){b.onsend({data:a})}})},c.prototype.close=function(){var a=this;a.pubnub.unsubscribe({channel:a.pubnub.setup.channel}),a.readyState=a.CLOSED,a.onclose({})},a.exports=c}])}),!jsonStringify){var jsonStringify=JSON.stringify;JSON.stringify=function(){var a=Array.prototype.toJSON;delete Array.prototype.toJSON;var b=jsonStringify.apply(this,arguments);return Object.defineProperty(Array.prototype,"toJSON",{enumerable:!1,value:a,configurable:!0}),b}}!function(a,b){function c(a){var b,c,d=K[a]={};for(a=a.split(/\s+/),b=0,c=a.length;b<c;b++)d[a[b]]=!0;return d}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(N,"-$1").toLowerCase();if("string"==typeof(d=a.getAttribute(e))){try{d="true"===d||"false"!==d&&("null"===d?null:J.isNumeric(d)?+d:M.test(d)?J.parseJSON(d):d)}catch(f){}J.data(a,c,d)}else d=b}return d}function e(a){for(var b in a)if(("data"!==b||!J.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=J._data(a,d);!g||"queue"!==c&&J._data(a,e)||"mark"!==c&&J._data(a,f)||setTimeout(function(){J._data(a,e)||J._data(a,f)||(J.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function h(){return!0}function i(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function j(a,b,c){if(b=b||0,J.isFunction(b))return J.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return J.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=J.grep(a,function(a){return 1===a.nodeType});if(ka.test(b))return J.filter(b,d,!c);b=J.filter(b,d)}return J.grep(a,function(a,d){return J.inArray(a,b)>=0===c})}function k(a){var b=oa.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return J.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,b){if(1===b.nodeType&&J.hasData(a)){var c,d,e,f=J._data(a),g=J._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)J.event.add(b,c,h[c][d])}g.data&&(g.data=J.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(J.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function o(a){return void 0!==a.getElementsByTagName?a.getElementsByTagName("*"):void 0!==a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){"checkbox"!==a.type&&"radio"!==a.type||(a.defaultChecked=a.checked)}function q(a){var b=(a.nodeName||"").toLowerCase();"input"===b?p(a):"script"!==b&&void 0!==a.getElementsByTagName&&J.grep(a.getElementsByTagName("input"),p)}function r(a){var b=G.createElement("div");return Ca.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0,f=4;if(d>0){if("border"!==c)for(;e<f;e+=2)c||(d-=parseFloat(J.css(a,"padding"+Oa[e]))||0),"margin"===c?d+=parseFloat(J.css(a,c+Oa[e]))||0:d-=parseFloat(J.css(a,"border"+Oa[e]+"Width"))||0;return d+"px"}if(d=Da(a,b),(d<0||null==d)&&(d=a.style[b]),Ka.test(d))return d;if(d=parseFloat(d)||0,c)for(;e<f;e+=2)d+=parseFloat(J.css(a,"padding"+Oa[e]))||0,"padding"!==c&&(d+=parseFloat(J.css(a,"border"+Oa[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(J.css(a,c+Oa[e]))||0);return d+"px"}function t(a){return function(b,c){if("string"!=typeof b&&(c=b,b="*"),J.isFunction(c))for(var d,e,f,g=b.toLowerCase().split(bb),h=0,i=g.length;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function u(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===fb;j<k&&(l||!h);j++)"string"==typeof(h=i[j](c,d,e))&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=u(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=u(a,c,d,e,"*",g)),h}function v(a,c){var d,e,f=J.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&J.extend(!0,a,e)}function w(a,b,c,d){if(J.isArray(b))J.each(b,function(b,e){c||Sa.test(a)?d(a,e):w(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==J.type(b))d(a,b);else for(var e in b)w(a+"["+e+"]",b[e],c,d)}function x(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function y(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d,e,f,g,h,i,j,k,l=a.dataTypes,m={},n=l.length,o=l[0];for(d=1;d<n;d++){if(1===d)for(e in a.converters)"string"==typeof e&&(m[e.toLowerCase()]=a.converters[e]);if(g=o,"*"===(o=l[d]))o=g;else if("*"!==g&&g!==o){if(h=g+" "+o,!(i=m[h]||m["* "+o])){k=b;for(j in m)if(f=j.split(" "),(f[0]===g||"*"===f[0])&&(k=m[f[1]+" "+o])){j=m[j],!0===j?i=k:!0===k&&(i=j);break}}i||k||J.error("No conversion from "+h.replace(" "," to ")),!0!==i&&(c=i?i(c):k(j(c)))}}return c}function z(){try{return new a.XMLHttpRequest}catch(b){}}function A(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function B(){return setTimeout(C,0),qb=J.now()}function C(){qb=b}function D(a,b){var c={};return J.each(ub.concat.apply([],ub.slice(0,b)),function(){c[this]=a}),c}function E(a){if(!rb[a]){var b=G.body,c=J("<"+a+">").appendTo(b),d=c.css("display");c.remove(),"none"!==d&&""!==d||(nb||(nb=G.createElement("iframe"),nb.frameBorder=nb.width=nb.height=0),b.appendChild(nb),ob&&nb.createElement||(ob=(nb.contentWindow||nb.contentDocument).document,ob.write((J.support.boxModel?"<!doctype html>":"")+"<html><body>"),ob.close()),c=ob.createElement(a),ob.body.appendChild(c),d=J.css(c,"display"),b.removeChild(nb)),rb[a]=d}return rb[a]}function F(a){return J.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var G=a.document,H=a.navigator,I=a.location,J=function(){function c(){if(!h.isReady){try{G.documentElement.doScroll("left")}catch(a){return void setTimeout(c,1)}h.ready()}}var d,e,f,g,h=function(a,b){return new h.fn.init(a,b,d)},i=a.jQuery,j=a.$,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,m=/^\s+/,n=/\s+$/,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,q=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,t=/(webkit)[ \/]([\w.]+)/,u=/(opera)(?:.*version)?[ \/]([\w.]+)/,v=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,x=/-([a-z]|[0-9])/gi,y=/^-ms-/,z=function(a,b){return(b+"").toUpperCase()},A=H.userAgent,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,I=Array.prototype.indexOf,J={};return h.fn=h.prototype={constructor:h,init:function(a,c,d){var e,f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&G.body)return this.context=G,this[0]=G.body,this.selector=a,this.length=1,this;if("string"==typeof a){if(!(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:k.exec(a))||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof h?c[0]:c,i=c?c.ownerDocument||c:G,g=o.exec(a),g?h.isPlainObject(c)?(a=[G.createElement(g[1])],h.fn.attr.call(a,c,!0)):a=[i.createElement(g[1])]:(g=h.buildFragment([e[1]],[i]),a=(g.cacheable?h.clone(g.fragment):g.fragment).childNodes),h.merge(this,a);if((f=G.getElementById(e[2]))&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=G,this.selector=a,this}return h.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),h.makeArray(a,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return h.isArray(a)?D.apply(d,a):h.merge(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return h.each(this,a,b)},ready:function(a){return h.bindReady(),f.add(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(h.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},h.fn.init.prototype=h.fn,h.extend=h.fn.extend=function(){var a,c,d,e,f,g,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||h.isFunction(i)||(i={}),k===j&&(i=this,--j);j<k;j++)if(null!=(a=arguments[j]))for(c in a)d=i[c],e=a[c],i!==e&&(l&&e&&(h.isPlainObject(e)||(f=h.isArray(e)))?(f?(f=!1,g=d&&h.isArray(d)?d:[]):g=d&&h.isPlainObject(d)?d:{},i[c]=h.extend(l,g,e)):e!==b&&(i[c]=e));return i},h.extend({noConflict:function(b){return a.$===h&&(a.$=j),b&&a.jQuery===h&&(a.jQuery=i),h},isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(!0===a&&!--h.readyWait||!0!==a&&!h.isReady){if(!G.body)return setTimeout(h.ready,1);if(h.isReady=!0,!0!==a&&--h.readyWait>0)return;f.fireWith(G,[h]),h.fn.trigger&&h(G).trigger("ready").off("ready")}},bindReady:function(){if(!f){if(f=h.Callbacks("once memory"),"complete"===G.readyState)return setTimeout(h.ready,1);if(G.addEventListener)G.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",h.ready,!1);else if(G.attachEvent){G.attachEvent("onreadystatechange",g),a.attachEvent("onload",h.ready);var b=!1;try{b=null==a.frameElement}catch(d){}G.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}var c;for(c in a);return c===b||C.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){return"string"==typeof b&&b?(b=h.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):p.test(b.replace(q,"@").replace(r,"]").replace(s,""))?new Function("return "+b)():void h.error("Invalid JSON: "+b)):null},parseXML:function(c){if("string"!=typeof c||!c)return null;var d,e;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&l.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(y,"ms-").replace(x,z)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,i=g===b||h.isFunction(a);if(d)if(i){for(e in a)if(!1===c.apply(a[e],d))break}else for(;f<g&&!1!==c.apply(a[f++],d););else if(i){for(e in a)if(!1===c.call(a[e],e,a[e]))break}else for(;f<g&&!1!==c.call(a[f],f,a[f++]););return a},trim:F?function(a){return null==a?"":F.call(a)}:function(a){return null==a?"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var d=h.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||h.isWindow(a)?D.call(c,a):h.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;e<f;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d,e=[];c=!!c;for(var f=0,g=a.length;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],i=0,j=a.length;if(a instanceof h||j!==b&&"number"==typeof j&&(j>0&&a[0]&&a[j-1]||0===j||h.isArray(a)))for(;i<j;i++)null!=(e=c(a[i],i,d))&&(g[g.length]=e);else for(f in a)null!=(e=c(a[f],f,d))&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){if("string"==typeof c){var d=a[c];c=a,a=d}if(!h.isFunction(a))return b;var e=E.call(arguments,2),f=function(){return a.apply(c,e.concat(E.call(arguments)))};return f.guid=a.guid=a.guid||f.guid||h.guid++,f},access:function(a,c,d,e,f,g,i){var j,k=null==d,l=0,m=a.length;if(d&&"object"==typeof d){for(l in d)h.access(a,c,l,d[l],1,g,e);f=1}else if(e!==b){if(j=i===b&&h.isFunction(e),k&&(j?(j=c,c=function(a,b,c){return j.call(h(a),c)}):(c.call(a,e),c=null)),c)for(;l<m;l++)c(a[l],d,j?e.call(a[l],l,c(a[l],d)):e,i);f=1}return f?a:k?c.call(a):m?c(a[0],d):g},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=t.exec(a)||u.exec(a)||v.exec(a)||a.indexOf("compatible")<0&&w.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}h.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof h&&!(d instanceof a)&&(d=a(d)),h.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(G);return a},browser:{}}),h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),e=h.uaMatch(A),e.browser&&(h.browser[e.browser]=!0,h.browser.version=e.version),h.browser.webkit&&(h.browser.safari=!0),l.test("")&&(m=/^[\s\xA0]+/,n=/[\s\xA0]+$/),d=h(G),G.addEventListener?g=function(){G.removeEventListener("DOMContentLoaded",g,!1),h.ready()}:G.attachEvent&&(g=function(){"complete"===G.readyState&&(G.detachEvent("onreadystatechange",g),h.ready())}),h}(),K={};J.Callbacks=function(a){a=a?K[a]||c(a):{};var d,e,f,g,h,i,j=[],k=[],l=function(b){var c,d,e,f;for(c=0,d=b.length;c<d;c++)e=b[c],f=J.type(e),"array"===f?l(e):"function"===f&&(a.unique&&n.has(e)||j.push(e))},m=function(b,c){for(c=c||[],d=!a.memory||[b,c],e=!0,f=!0,i=g||0,g=0,h=j.length;j&&i<h;i++)if(!1===j[i].apply(b,c)&&a.stopOnFalse){d=!0;break}f=!1,j&&(a.once?!0===d?n.disable():j=[]:k&&k.length&&(d=k.shift(),n.fireWith(d[0],d[1])))},n={add:function(){if(j){var a=j.length;l(arguments),f?h=j.length:d&&!0!==d&&(g=a,m(d[0],d[1]))}return this},remove:function(){if(j)for(var b=arguments,c=0,d=b.length;c<d;c++)for(var e=0;e<j.length&&(b[c]!==j[e]||(f&&e<=h&&(h--,e<=i&&i--),j.splice(e--,1),!a.unique));e++);return this},has:function(a){if(j)for(var b=0,c=j.length;b<c;b++)if(a===j[b])return!0;return!1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d&&!0!==d||n.disable(),this},locked:function(){return!k},fireWith:function(b,c){return k&&(f?a.once||k.push([b,c]):a.once&&d||m(b,c)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!e}};return n};var L=[].slice;J.extend({Deferred:function(a){var b,c=J.Callbacks("once memory"),d=J.Callbacks("once memory"),e=J.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return J.Deferred(function(d){J.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c,e=b[0],f=b[1];J.isFunction(e)?i[a](function(){c=e.apply(this,arguments),c&&J.isFunction(c.promise)?c.promise().then(d.resolve,d.reject,d.notify):d[f+"With"](this===i?d:this,[c])}):i[a](d[f])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(b in g)i[b]=g[b].fire,i[b+"With"]=g[b].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),a&&a.call(i,i),i},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?L.call(arguments,0):b,--h||i.resolveWith(i,d)}}function c(a){return function(b){g[a]=arguments.length>1?L.call(arguments,0):b,i.notifyWith(j,g)}}var d=L.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,i=f<=1&&a&&J.isFunction(a.promise)?a:J.Deferred(),j=i.promise();if(f>1){for(;e<f;e++)d[e]&&d[e].promise&&J.isFunction(d[e].promise)?d[e].promise().then(b(e),i.reject,c(e)):--h;h||i.resolveWith(i,d)}else i!==a&&i.resolveWith(i,f?[a]:[]);return j}}),J.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=G.createElement("div");G.documentElement;if(m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],!c||!c.length||!d)return{};e=G.createElement("select"),f=e.appendChild(G.createElement("option")),g=m.getElementsByTagName("input")[0],b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!G.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},J.boxModel=b.boxModel="CSS1Compat"===G.compatMode,g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),g=G.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=G.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(k in{submit:1,change:1,focusin:1})j="on"+k,l=j in m,l||(m.setAttribute(j,"return;"),l="function"==typeof m[j]),b[k+"Bubbles"]=l;return h.removeChild(m),h=e=f=m=g=null,J(function(){var c,d,e,f,g,h,j,k,n,o,p,q,r=G.getElementsByTagName("body")[0];r&&(j=1,q="padding:0;margin:0;border:",o="position:absolute;top:0;left:0;width:1px;height:1px;",p=q+"0;visibility:hidden;",k="style='"+o+q+"5px solid #000;",n="<div "+k+"display:block;'><div style='"+q+"0;display:block;overflow:hidden;'></div></div><table "+k+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c=G.createElement("div"),c.style.cssText=p+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(c,r.firstChild),m=G.createElement("div"),c.appendChild(m),m.innerHTML="<table><tr><td style='"+q+"0;display:none'></td><td>t</td></tr></table>",i=m.getElementsByTagName("td"),l=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",b.reliableHiddenOffsets=l&&0===i[0].offsetHeight,a.getComputedStyle&&(m.innerHTML="",h=G.createElement("div"),h.style.width="0",h.style.marginRight="0",m.style.width="2px",m.appendChild(h),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)),void 0!==m.style.zoom&&(m.innerHTML="",m.style.width=m.style.padding="1px",m.style.border=0,m.style.overflow="hidden",m.style.display="inline",m.style.zoom=1,b.inlineBlockNeedsLayout=3===m.offsetWidth,m.style.display="block",m.style.overflow="visible",m.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=3!==m.offsetWidth),m.style.cssText=o+p,m.innerHTML=n,d=m.firstChild,e=d.firstChild,f=d.nextSibling.firstChild.firstChild,g={doesNotAddBorder:5!==e.offsetTop,doesAddBorderForTableAndCells:5===f.offsetTop},e.style.position="fixed",e.style.top="20px",g.fixedPosition=20===e.offsetTop||15===e.offsetTop,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",g.subtractsBorderForOverflowNotVisible=-5===e.offsetTop,g.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,a.getComputedStyle&&(m.style.marginTop="1%",b.pixelMargin="1%"!==(a.getComputedStyle(m,null)||{marginTop:0}).marginTop),void 0!==c.style.zoom&&(c.style.zoom=1),r.removeChild(c),h=m=c=null,J.extend(b,g))}),b}();var M=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;J.extend({cache:{},uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return!!(a=a.nodeType?J.cache[a[J.expando]]:a[J.expando])&&!e(a)},data:function(a,c,d,e){if(J.acceptData(a)){var f,g,h,i=J.expando,j="string"==typeof c,k=a.nodeType,l=k?J.cache:a,m=k?a[i]:a[i]&&i,n="events"===c;if(m&&l[m]&&(n||e||l[m].data)||!j||d!==b)return m||(k?a[i]=m=++J.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=J.noop)),"object"!=typeof c&&"function"!=typeof c||(e?l[m]=J.extend(l[m],c):l[m].data=J.extend(l[m].data,c)),f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[J.camelCase(c)]=d),n&&!g[c]?f.events:(j?null==(h=g[c])&&(h=g[J.camelCase(c)]):h=g,h)}},removeData:function(a,b,c){if(J.acceptData(a)){var d,f,g,h=J.expando,i=a.nodeType,j=i?J.cache:a,k=i?a[h]:h;if(j[k]){if(b&&(d=c?j[k]:j[k].data)){J.isArray(b)||(b in d?b=[b]:(b=J.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:J.isEmptyObject)(d))return}(c||(delete j[k].data,e(j[k])))&&(J.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(J.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null))}}},_data:function(a,b,c){return J.data(a,b,c,!0)},
acceptData:function(a){if(a.nodeName){var b=J.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}}),J.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=J.data(j),1===j.nodeType&&!J._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;k<i;k++)h=g[k].name,0===h.indexOf("data-")&&(h=J.camelCase(h.substring(5)),d(j,h,l[h]));J._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){J.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",J.access(this,function(c){if(c===b)return l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=J.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l;e[1]=c,this.each(function(){var b=J(this);b.triggerHandler("setData"+f,e),J.data(this,a,c),b.triggerHandler("changeData"+f,e)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){J.removeData(this,a)})}}),J.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",J._data(a,b,(J._data(a,b)||0)+1))},_unmark:function(a,b,c){if(!0!==a&&(c=b,b=a,a=!1),b){c=c||"fx";var d=c+"mark",e=a?0:(J._data(b,d)||1)-1;e?J._data(b,d,e):(J.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=J._data(a,b),c&&(!d||J.isArray(c)?d=J._data(a,b,J.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=J.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),J._data(a,b+".run",e),d.call(a,function(){J.dequeue(a,b)},e)),c.length||(J.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}}),J.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?J.queue(this[0],a):c===b?this:this.each(function(){var b=J.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&J.dequeue(this,a)})},dequeue:function(a){return this.each(function(){J.dequeue(this,a)})},delay:function(a,b){return a=J.fx?J.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--i||f.resolveWith(g,[g])}"string"!=typeof a&&(c=a,a=b),a=a||"fx";for(var e,f=J.Deferred(),g=this,h=g.length,i=1,j=a+"defer",k=a+"queue",l=a+"mark";h--;)(e=J.data(g[h],j,b,!0)||(J.data(g[h],k,b,!0)||J.data(g[h],l,b,!0))&&J.data(g[h],j,J.Callbacks("once memory"),!0))&&(i++,e.add(d));return d(),f.promise(c)}});var O,P,Q,R=/[\n\t\r]/g,S=/\s+/,T=/\r/g,U=/^(?:button|input)$/i,V=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea)?$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Y=J.support.getSetAttribute;J.fn.extend({attr:function(a,b){return J.access(this,J.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){J.removeAttr(this,a)})},prop:function(a,b){return J.access(this,J.prop,a,b,arguments.length>1)},removeProp:function(a){return a=J.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(J.isFunction(a))return this.each(function(b){J(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(S),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=J.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(J.isFunction(a))return this.each(function(b){J(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(S),d=0,e=this.length;d<e;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){for(g=(" "+f.className+" ").replace(R," "),h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=J.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return J.isFunction(a)?this.each(function(c){J(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=J(this),h=b,i=a.split(S);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else"undefined"!==c&&"boolean"!==c||(this.className&&J._data(this,"__className__",this.className),this.className=this.className||!1===a?"":J._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(R," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=J.isFunction(a),this.each(function(d){var f,g=J(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":J.isArray(f)&&(f=J.map(f,function(a){return null==a?"":a+""})),(c=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return(c=J.valHooks[f.type]||J.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(T,""):null==d?"":d)}}}),J.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(f<0)return null;for(c=i?f:0,d=i?f+1:h.length;c<d;c++)if(e=h[c],e.selected&&(J.support.optDisabled?!e.disabled:null===e.getAttribute("disabled"))&&(!e.parentNode.disabled||!J.nodeName(e.parentNode,"optgroup"))){if(b=J(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?J(h[f]).val():g},set:function(a,b){var c=J.makeArray(b);return J(a).find("option").each(function(){this.selected=J.inArray(J(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&c in J.attrFn?J(a)[c](d):void 0===a.getAttribute?J.prop(a,c,d):(h=1!==i||!J.isXMLDoc(a),h&&(c=c.toLowerCase(),g=J.attrHooks[c]||(X.test(c)?P:O)),d!==b?null===d?void J.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g,h=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(S),f=d.length;h<f;h++)(e=d[h])&&(c=J.propFix[e]||e,g=X.test(e),g||J.attr(a,e,""),a.removeAttribute(Y?e:c),g&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(U.test(a.nodeName)&&a.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&"radio"===b&&J.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return O&&J.nodeName(a,"button")?O.get(a,b):b in a?a.value:null},set:function(a,b,c){if(O&&J.nodeName(a,"button"))return O.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!J.isXMLDoc(a),g&&(c=J.propFix[c]||c,f=J.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):V.test(a.nodeName)||W.test(a.nodeName)&&a.href?0:b}}}}),J.attrHooks.tabindex=J.propHooks.tabIndex,P={get:function(a,c){var d,e=J.prop(a,c);return!0===e||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){var d;return!1===b?J.removeAttr(a,c):(d=J.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Y||(Q={name:!0,id:!0,coords:!0},O=J.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(Q[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=G.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},J.attrHooks.tabindex.set=O.set,J.each(["width","height"],function(a,b){J.attrHooks[b]=J.extend(J.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),J.attrHooks.contenteditable={get:O.get,set:function(a,b,c){""===b&&(b="false"),O.set(a,b,c)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(a,c){J.attrHooks[c]=J.extend(J.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),J.support.style||(J.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(a,b){if(J.isArray(b))return a.checked=J.inArray(J(a).val(),b)>=0}})});var Z=/^(?:textarea|input|select)$/i,$=/^([^\.]*)?(?:\.(.+))?$/,_=/(?:^|\s)hover(\.\S+)?\b/,aa=/^key/,ba=/^(?:mouse|contextmenu)|click/,ca=/^(?:focusinfocus|focusoutblur)$/,da=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ea=function(a){var b=da.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},fa=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c.class||{}).value))},ga=function(a){return J.event.special.hover?a:a.replace(_,"mouseenter$1 mouseleave$1")};J.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=J._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=J.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return void 0===J||a&&J.event.triggered===a.type?b:J.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=J.trim(ga(c)).split(" "),j=0;j<c.length;j++)k=$.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=J.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=J.event.special[l]||{},n=J.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&ea(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&!1!==q.setup.call(a,e,m,h)||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),J.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=J.hasData(a)&&J._data(a);if(r&&(m=r.events)){for(b=J.trim(ga(b||"")).split(" "),f=0;f<b.length;f++)if(g=$.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=J.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,p=m[h]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=0;l<p.length;l++)q=p[l],!e&&i!==q.origType||c&&c.guid!==q.guid||j&&!j.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q));0===p.length&&k!==p.length&&(n.teardown&&!1!==n.teardown.call(a,j)||J.removeEvent(a,h,r.handle),delete m[h])}else for(h in m)J.event.remove(a,h+b[f],c,d,!0);J.isEmptyObject(m)&&(o=r.handle,o&&(o.elem=null),J.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!ca.test(q+J.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!J.event.customEvent[q]||J.event.global[q]))if(c="object"==typeof c?c[J.expando]?c:new J.Event(q,c):new J.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?J.makeArray(d):[],d.unshift(c),m=J.event.special[q]||{},!m.trigger||!1!==m.trigger.apply(e,d)){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!J.isWindow(e)){for(p=m.delegateType||q,j=ca.test(p+q)?e:e.parentNode,k=null;j;j=j.parentNode)o.push([j,p]),k=j;k&&k===e.ownerDocument&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=(J._data(j,"events")||{})[c.type]&&J._data(j,"handle"),n&&n.apply(j,d),(n=l&&j[l])&&J.acceptData(j)&&!1===n.apply(j,d)&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===q&&J.nodeName(e,"a")||!J.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!J.isWindow(e)&&(k=e[l],k&&(e[l]=null),J.event.triggered=q,e[q](),J.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=J.cache;for(i in g)g[i].events&&g[i].events[q]&&J.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=J.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(J._data(this,"events")||{})[c.type]||[],o=n.delegateCount,p=[].slice.call(arguments,0),q=!c.exclusive&&!c.namespace,r=J.event.special[c.type]||{},s=[];if(p[0]=c,c.delegateTarget=this,!r.preDispatch||!1!==r.preDispatch.call(this,c)){if(o&&(!c.button||"click"!==c.type))for(g=J(this),g.context=this.ownerDocument||this,f=c.target;f!=this;f=f.parentNode||this)if(!0!==f.disabled){for(i={},k=[],g[0]=f,d=0;d<o;d++)l=n[d],m=l.selector,i[m]===b&&(i[m]=l.quick?fa(f,l.quick):g.is(m)),i[m]&&k.push(l);k.length&&s.push({elem:f,matches:k})}for(n.length>o&&s.push({elem:this,matches:n.slice(o)}),d=0;d<s.length&&!c.isPropagationStopped();d++)for(j=s[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(q||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,(h=((J.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,p))!==b&&(c.result=h,!1===h&&(c.preventDefault(),c.stopPropagation())));return r.postDispatch&&r.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||G,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[J.expando])return a;var c,d,e=a,f=J.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;for(a=J.Event(e),c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||G),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:J.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){J.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=J.extend(new J.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?J.event.trigger(e,null,b):J.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=G.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},J.Event=function(a,b){if(!(this instanceof J.Event))return new J.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?h:g):this.type=a,b&&J.extend(this,b),this.timeStamp=a&&a.timeStamp||J.now(),this[J.expando]=!0},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){J.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector;return e&&(e===d||J.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){if(J.nodeName(this,"form"))return!1;J.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=J.nodeName(c,"input")||J.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(J.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&J.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(J.nodeName(this,"form"))return!1;J.event.remove(this,"._submit")}}),J.support.changeBubbles||(J.event.special.change={setup:function(){if(Z.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(J.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,J.event.simulate("change",this,a,!0))})),!1;J.event.add(this,"beforeactivate._change",function(a){var b=a.target;Z.test(b.nodeName)&&!b._change_attached&&(J.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||J.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return J.event.remove(this,"._change"),Z.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){J.event.simulate(b,a.target,J.event.fix(a),!0)};J.event.special[b]={setup:function(){0==c++&&G.addEventListener(a,d,!0)},teardown:function(){0==--c&&G.removeEventListener(a,d,!0)}}}),J.fn.extend({on:function(a,c,d,e,f){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),!1===e)e=g;else if(!e)return this;return 1===f&&(h=e,e=function(a){return J().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=J.guid++)),this.each(function(){J.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return J(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if("object"==typeof a){for(var f in a)this.off(f,c,a[f]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=b),!1===d&&(d=g),this.each(function(){J.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return J(this.context).on(a,this.selector,b,c),this},die:function(a,b){return J(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){J.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return J.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||J.guid++,d=0,e=function(c){var e=(J._data(this,"lastToggle"+a.guid)||0)%d;return J._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){J.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},J.attrFn&&(J.attrFn[b]=!0),aa.test(b)&&(J.event.fixHooks[b]=J.event.keyHooks),ba.test(b)&&(J.event.fixHooks[b]=J.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1!==j.nodeType||g||(j[e]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1===j.nodeType)if(g||(j[e]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||G;var f=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),w=[],x=a;do{if(d.exec(""),(h=d.exec(x))&&(x=h[3],w.push(h[1]),h[2])){k=h[3];break}}while(h);if(w.length>1&&p.exec(a))if(2===w.length&&o.relative[w[0]])i=v(w[0]+w[1],b,e);else for(i=o.relative[w[0]]?[b]:m(w.shift(),b);w.length;)a=w.shift(),o.relative[a]&&(a+=w.shift()),i=v(a,i,e);else if(!e&&w.length>1&&9===b.nodeType&&!u&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(l=m.find(w.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]),b)for(l=e?{expr:w.pop(),set:s(e)}:m.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,w.length>0?j=s(i):t=!1;w.length;)n=w.pop(),q=n,o.relative[n]?q=w.pop():n="",null==q&&(q=b),o.relative[n](j,q,u);else j=w=[];if(j||(j=i),j||m.error(n||a),"[object Array]"===g.call(j))if(t)if(b&&1===b.nodeType)for(r=0;null!=j[r];r++)j[r]&&(!0===j[r]||1===j[r].nodeType&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;null!=j[r];r++)j[r]&&1===j[r].nodeType&&c.push(i[r]);else c.push.apply(c,j);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(t&&(h=i,a.sort(t),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++)if(h=o.order[e],(g=o.leftMatch[h].exec(a))&&(i=g[1],g.splice(1,1),"\\"!==i.substr(i.length-1)&&(g[1]=(g[1]||"").replace(j,""),null!=(d=o.find[h](g,b,c))))){a=a.replace(o.match[h],"");break}return d||(d=void 0!==b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){for(var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);a&&c.length;){for(h in o.filter)if(null!=(f=o.leftMatch[h].exec(a))&&f[2]){if(k=o.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"===l.substr(l.length-1))continue;if(s===r&&(r=[]),o.preFilter[h])if(f=o.preFilter[h](f,s,d,r,e,t)){if(!0===f)continue}else g=i=!0;if(f)for(n=0;null!=(j=s[n]);n++)j&&(i=k(j,f,n,s),p=e^i,d&&null!=i?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){if(d||(s=r),a=a.replace(o.match[h],""),!g)return[];break}}if(a===q){if(null!=g)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d||11===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;g<h;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!l.test(b)){for(b=b.toLowerCase();e<f;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b&&g}}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if(void 0!==b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(void 0!==b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if(void 0!==b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(j,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if("not"===a[1]){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=m(a[3],null,null,b)}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2==0},odd:function(a,b){return b%2==1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],d=b[3],1===c&&0===d)return!0;if(f=b[0],(g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[e]=f}return i=a.nodeIndex-d,0===c?0===i:i%c==0&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&m.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f&&(e===g||e.substr(0,g.length+1)===g+"-"):e&&!1!==d},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(G.documentElement.childNodes,0)[0].nodeType}catch(w){s=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var t,u
;G.documentElement.compareDocumentPosition?t=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(t=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return u(a,b);if(!g)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return u(e[k],f[k]);return k===c?u(a,f[k],-1):u(e[k],b,1)},u=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=G.createElement("div"),c="script"+(new Date).getTime(),d=G.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),G.getElementById(c)&&(o.find.ID=function(a,c,d){if(void 0!==c.getElementById&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||void 0!==e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=G.createElement("div");a.appendChild(G.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&void 0!==a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),G.querySelectorAll&&function(){var a=m,b=G.createElement("div");if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){m=function(b,c,d,e){if(c=c||G,!e&&!m.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return s(c.getElementsByTagName(b),d);if(f[2]&&o.find.CLASS&&c.getElementsByClassName)return s(c.getElementsByClassName(f[2]),d)}if(9===c.nodeType){if("body"===b&&c.body)return s([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(!g||!g.parentNode)return s([],d);if(g.id===f[3])return s([g],d)}try{return s(c.querySelectorAll(b),d)}catch(n){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var h=c,i=c.getAttribute("id"),j=i||"__sizzle__",k=c.parentNode,l=/^\s*[+~]/.test(b);i?j=j.replace(/'/g,"\\$&"):c.setAttribute("id",j),l&&k&&(c=c.parentNode);try{if(!l||k)return s(c.querySelectorAll("[id='"+j+"'] "+b),d)}catch(p){}finally{i||h.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)m[c]=a[c];b=null}}(),function(){var a=G.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(G.createElement("div"),"div"),d=!1;try{b.call(G.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(w){}return m(e,null,null,[a]).length>0}}}(),function(){var a=G.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(void 0!==b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))}(),G.documentElement.contains?m.contains=function(a,b){return a!==b&&(!a.contains||a.contains(b))}:G.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return!!b&&"HTML"!==b.nodeName};var v=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=o.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=J.attr,m.selectors.attrMap={},J.find=m,J.expr=m.selectors,J.expr[":"]=J.expr.filters,J.unique=m.uniqueSort,J.text=m.getText,J.isXMLDoc=m.isXML,J.contains=m.contains}();var ha=/Until$/,ia=/^(?:parents|prevUntil|prevAll)/,ja=/,/,ka=/^.[^:#\[\.,]*$/,la=Array.prototype.slice,ma=J.expr.match.globalPOS,na={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(a){var b,c,d=this;if("string"!=typeof a)return J(a).filter(function(){for(b=0,c=d.length;b<c;b++)if(J.contains(d[b],this))return!0});var e,f,g,h=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++)if(e=h.length,J.find(a,this[b],h),b>0)for(f=e;f<h.length;f++)for(g=0;g<e;g++)if(h[g]===h[f]){h.splice(f--,1);break}return h},has:function(a){var b=J(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(J.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?ma.test(a)?J(a,this.context).index(this[0])>=0:J.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d,e=[],f=this[0];if(J.isArray(a)){for(var g=1;f&&f.ownerDocument&&f!==b;){for(c=0;c<a.length;c++)J(f).is(a[c])&&e.push({selector:a[c],elem:f,level:g});f=f.parentNode,g++}return e}var h=ma.test(a)||"string"!=typeof a?J(a,b||this.context):0;for(c=0,d=this.length;c<d;c++)for(f=this[c];f;){if(h?h.index(f)>-1:J.find.matchesSelector(f,a)){e.push(f);break}if(!(f=f.parentNode)||!f.ownerDocument||f===b||11===f.nodeType)break}return e=e.length>1?J.unique(e):e,this.pushStack(e,"closest",a)},index:function(a){return a?"string"==typeof a?J.inArray(this[0],J(a)):J.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?J(a,b):J.makeArray(a&&a.nodeType?[a]:a),d=J.merge(this.get(),c);return this.pushStack(i(c[0])||i(d[0])?d:J.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),J.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return J.dir(a,"parentNode")},parentsUntil:function(a,b,c){return J.dir(a,"parentNode",c)},next:function(a){return J.nth(a,2,"nextSibling")},prev:function(a){return J.nth(a,2,"previousSibling")},nextAll:function(a){return J.dir(a,"nextSibling")},prevAll:function(a){return J.dir(a,"previousSibling")},nextUntil:function(a,b,c){return J.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return J.dir(a,"previousSibling",c)},siblings:function(a){return J.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return J.sibling(a.firstChild)},contents:function(a){return J.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:J.makeArray(a.childNodes)}},function(a,b){J.fn[a]=function(c,d){var e=J.map(this,b,c);return ha.test(a)||(d=c),d&&"string"==typeof d&&(e=J.filter(d,e)),e=this.length>1&&!na[a]?J.unique(e):e,(this.length>1||ja.test(d))&&ia.test(a)&&(e=e.reverse()),this.pushStack(e,a,la.call(arguments).join(","))}}),J.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?J.find.matchesSelector(b[0],a)?[b[0]]:[]:J.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!J(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;for(var e=0;a&&(1!==a.nodeType||++e!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var oa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pa=/ jQuery\d+="(?:\d+|null)"/g,qa=/^\s+/,ra=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,sa=/<([\w:]+)/,ta=/<tbody/i,ua=/<|&#?\w+;/,va=/<(?:script|style)/i,wa=/<(?:script|object|embed|option|style)/i,xa=new RegExp("<(?:"+oa+")[\\s/>]","i"),ya=/checked\s*(?:[^=]|=\s*.checked.)/i,za=/\/(java|ecma)script/i,Aa=/^\s*<!(?:\[CDATA\[|\-\-)/,Ba={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ca=k(G);Ba.optgroup=Ba.option,Ba.tbody=Ba.tfoot=Ba.colgroup=Ba.caption=Ba.thead,Ba.th=Ba.td,J.support.htmlSerialize||(Ba._default=[1,"div<div>","</div>"]),J.fn.extend({text:function(a){return J.access(this,function(a){return a===b?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(J.isFunction(a))return this.each(function(b){J(this).wrapAll(a.call(this,b))});if(this[0]){var b=J(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return J.isFunction(a)?this.each(function(b){J(this).wrapInner(a.call(this,b))}):this.each(function(){var b=J(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=J.isFunction(a);return this.each(function(c){J(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=J.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,J.clean(arguments)),a}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)a&&!J.filter(a,[c]).length||(b||1!==c.nodeType||(J.cleanData(c.getElementsByTagName("*")),J.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&J.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return J.clone(this,a,b)})},html:function(a){return J.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(pa,""):null;if("string"==typeof a&&!va.test(a)&&(J.support.leadingWhitespace||!qa.test(a))&&!Ba[(sa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ra,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(J.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return this[0]&&this[0].parentNode?J.isFunction(a)?this.each(function(b){var c=J(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=J(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;J(this).remove(),b?J(b).before(a):J(c).append(a)})):this.length?this.pushStack(J(J.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!J.support.checkClone&&3===arguments.length&&"string"==typeof i&&ya.test(i))return this.each(function(){J(this).domManip(a,c,d,!0)});if(J.isFunction(i))return this.each(function(e){var f=J(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(h=i&&i.parentNode,e=J.support.parentNode&&h&&11===h.nodeType&&h.childNodes.length===this.length?{fragment:h}:J.buildFragment(a,this,j),g=e.fragment,f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&J.nodeName(f,"tr");for(var k=0,m=this.length,n=m-1;k<m;k++)d.call(c?l(this[k],f):this[k],e.cacheable||m>1&&k<n?J.clone(g,!0,!0):g)}j.length&&J.each(j,function(a,b){b.src?J.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):J.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Aa,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),J.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=G),!(1===a.length&&"string"==typeof h&&h.length<512&&g===G&&"<"===h.charAt(0))||wa.test(h)||!J.support.checkClone&&ya.test(h)||!J.support.html5Clone&&xa.test(h)||(e=!0,(f=J.fragments[h])&&1!==f&&(d=f)),d||(d=g.createDocumentFragment(),J.clean(a,g,d,c)),e&&(J.fragments[h]=f?d:1),{fragment:d,cacheable:e}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){J.fn[a]=function(c){var d=[],e=J(c),f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===e.length)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();J(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),J.extend({clone:function(a,b,c){var d,e,f,g=J.support.html5Clone||J.isXMLDoc(a)||!xa.test("<"+a.nodeName+">")?a.cloneNode(!0):r(a);if(!(J.support.noCloneEvent&&J.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||J.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h=[];b=b||G,void 0===b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||G);for(var i,j=0;null!=(i=a[j]);j++)if("number"==typeof i&&(i+=""),i){if("string"==typeof i)if(ua.test(i)){i=i.replace(ra,"<$1></$2>");var l,m=(sa.exec(i)||["",""])[1].toLowerCase(),n=Ba[m]||Ba._default,o=n[0],p=b.createElement("div"),r=Ca.childNodes;for(b===G?Ca.appendChild(p):k(b).appendChild(p),p.innerHTML=n[1]+i+n[2];o--;)p=p.lastChild;if(!J.support.tbody){var s=ta.test(i),t="table"!==m||s?"<table>"!==n[1]||s?[]:p.childNodes:p.firstChild&&p.firstChild.childNodes;for(g=t.length-1;g>=0;--g)J.nodeName(t[g],"tbody")&&!t[g].childNodes.length&&t[g].parentNode.removeChild(t[g])}!J.support.leadingWhitespace&&qa.test(i)&&p.insertBefore(b.createTextNode(qa.exec(i)[0]),p.firstChild),i=p.childNodes,p&&(p.parentNode.removeChild(p),r.length>0&&(l=r[r.length-1])&&l.parentNode&&l.parentNode.removeChild(l))}else i=b.createTextNode(i);var u;if(!J.support.appendChecked)if(i[0]&&"number"==typeof(u=i.length))for(g=0;g<u;g++)q(i[g]);else q(i);i.nodeType?h.push(i):h=J.merge(h,i)}if(c)for(e=function(a){return!a.type||za.test(a.type)},j=0;h[j];j++)if(f=h[j],d&&J.nodeName(f,"script")&&(!f.type||za.test(f.type)))d.push(f.parentNode?f.parentNode.removeChild(f):f);else{if(1===f.nodeType){var v=J.grep(f.getElementsByTagName("script"),e);h.splice.apply(h,[j+1,0].concat(v))}c.appendChild(f)}return h},cleanData:function(a){for(var b,c,d,e=J.cache,f=J.event.special,g=J.support.deleteExpando,h=0;null!=(d=a[h]);h++)if((!d.nodeName||!J.noData[d.nodeName.toLowerCase()])&&(c=d[J.expando])){if((b=e[c])&&b.events){for(var i in b.events)f[i]?J.event.remove(d,i):J.removeEvent(d,i,b.handle);b.handle&&(b.handle.elem=null)}g?delete d[J.expando]:d.removeAttribute&&d.removeAttribute(J.expando),delete e[c]}}});var Da,Ea,Fa,Ga=/alpha\([^)]*\)/i,Ha=/opacity=([^)]*)/,Ia=/([A-Z]|^ms)/g,Ja=/^[\-+]?(?:\d*\.)?\d+$/i,Ka=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,La=/^([\-+])=([\-+.\de]+)/,Ma=/^margin/,Na={position:"absolute",visibility:"hidden",display:"block"},Oa=["Top","Right","Bottom","Left"];J.fn.css=function(a,c){return J.access(this,function(a,c,d){return d!==b?J.style(a,c,d):J.css(a,c)},a,c,arguments.length>1)},J.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Da(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:J.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h=J.camelCase(c),i=a.style,j=J.cssHooks[h];if(c=J.cssProps[h]||h,d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];if(!(g=typeof d,"string"===g&&(f=La.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(J.css(a,c)),g="number"),null==d||"number"===g&&isNaN(d)||("number"!==g||J.cssNumber[h]||(d+="px"),j&&"set"in j&&(d=j.set(a,d))===b)))try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;return c=J.camelCase(c),f=J.cssHooks[c],c=J.cssProps[c]||c,"cssFloat"===c&&(c="float"),f&&"get"in f&&(e=f.get(a,!0,d))!==b?e:Da?Da(a,c):void 0},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),J.curCSS=J.css,G.defaultView&&G.defaultView.getComputedStyle&&(Ea=function(a,b){var c,d,e,f,g=a.style;return b=b.replace(Ia,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(""!==(c=e.getPropertyValue(b))||J.contains(a.ownerDocument.documentElement,a)||(c=J.style(a,b))),!J.support.pixelMargin&&e&&Ma.test(b)&&Ka.test(c)&&(f=g.width,g.width=c,c=e.width,g.width=f),c}),G.documentElement.currentStyle&&(Fa=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return null==f&&g&&(e=g[b])&&(f=e),Ka.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),""===f?"auto":f}),Da=Ea||Fa,J.each(["height","width"],function(a,b){J.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?s(a,b,d):J.swap(a,Na,function(){return s(a,b,d)})},set:function(a,b){return Ja.test(b)?b+"px":b}}}),J.support.opacity||(J.cssHooks.opacity={get:function(a,b){return Ha.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=J.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===J.trim(f.replace(Ga,""))&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=Ga.test(f)?f.replace(Ga,e):f+" "+e)}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(a,b){return J.swap(a,{display:"inline-block"},function(){return b?Da(a,"margin-right"):a.style.marginRight})}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return 0===b&&0===c||!J.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||J.css(a,"display"))},J.expr.filters.visible=function(a){return!J.expr.filters.hidden(a)}),J.each({margin:"",padding:"",border:"Width"},function(a,b){J.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+Oa[d]+b]=e[d]||e[d-2]||e[0];return f}}});var Pa,Qa,Ra=/%20/g,Sa=/\[\]$/,Ta=/\r?\n/g,Ua=/#.*$/,Va=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Wa=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Xa=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ya=/^(?:GET|HEAD)$/,Za=/^\/\//,$a=/\?/,_a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ab=/^(?:select|textarea)/i,bb=/\s+/,cb=/([?&])_=[^&]*/,db=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,eb=J.fn.load,fb={},gb={},hb=["*/"]+["*"];try{Pa=I.href}catch(yb){Pa=G.createElement("a"),Pa.href="",Pa=Pa.href}Qa=db.exec(Pa.toLowerCase())||[],J.fn.extend({load:function(a,c,d){if("string"!=typeof a&&eb)return eb.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(J.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=J.param(c,J.ajaxSettings.traditional),g="POST"));var h=this;return J.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?J("<div>").append(c.replace(_a,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ab.test(this.nodeName)||Wa.test(this.type))}).map(function(a,b){var c=J(this).val();return null==c?null:J.isArray(c)?J.map(c,function(a,c){return{name:b.name,value:a.replace(Ta,"\r\n")}}):{name:b.name,value:c.replace(Ta,"\r\n")}}).get()}}),J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){J.fn[b]=function(a){return this.on(b,a)}}),J.each(["get","post"],function(a,c){J[c]=function(a,d,e,f){return J.isFunction(d)&&(f=f||e,e=d,d=b),J.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),J.extend({getScript:function(a,c){return J.get(a,b,c,"script")},getJSON:function(a,b,c){return J.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?v(a,J.ajaxSettings):(b=a,a=J.ajaxSettings),v(a,b),a},ajaxSettings:{url:Pa,isLocal:Xa.test(Qa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":hb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:t(fb),ajaxTransport:t(gb),ajax:function(a,c){function d(a,c,d,g){if(2!==v){v=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0;var j,l,s,t,u,z=c,A=d?x(m,w,d):b;if(a>=200&&a<300||304===a)if(m.ifModified&&((t=w.getResponseHeader("Last-Modified"))&&(J.lastModified[e]=t),(u=w.getResponseHeader("Etag"))&&(J.etag[e]=u)),304===a)z="notmodified",j=!0;else try{l=y(m,A),z="success",j=!0}catch(yb){z="parsererror",s=yb}else s=z,z&&!a||(z="error",a<0&&(a=0));w.status=a,w.statusText=""+(c||z),j?p.resolveWith(n,[l,z,w]):p.rejectWith(n,[w,z,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,z]),k&&(o.trigger("ajaxComplete",[w,m]),--J.active||J.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=J.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof J)?J(n):J.event,p=J.Deferred(),q=J.Callbacks("once memory"),r=m.statusCode||{},s={},t={},v=0,w={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===v?f:null},getResponseHeader:function(a){var c;if(2===v){if(!g)for(g={};c=Va.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(m.mimeType=a),this},abort:function(a){return a=a||"abort",h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.then(b,b)}return this},m.url=((a||m.url)+"").replace(Ua,"").replace(Za,Qa[1]+"//"),m.dataTypes=J.trim(m.dataType||"*").toLowerCase().split(bb),null==m.crossDomain&&(j=db.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]==Qa[1]&&j[2]==Qa[2]&&(j[3]||("http:"===j[1]?80:443))==(Qa[3]||("http:"===Qa[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=J.param(m.data,m.traditional)),u(fb,m,c,w),2===v)return!1;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Ya.test(m.type),k&&0==J.active++&&J.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=($a.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,!1===m.cache)){var z=J.now(),A=m.url.replace(cb,"$1_="+z);m.url=A+(A===m.url?($a.test(m.url)?"&":"?")+"_="+z:"")}(m.data&&m.hasContent&&!1!==m.contentType||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,J.lastModified[e]&&w.setRequestHeader("If-Modified-Since",J.lastModified[e]),J.etag[e]&&w.setRequestHeader("If-None-Match",J.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+hb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(!1===m.beforeSend.call(n,w,m)||2===v))return w.abort(),!1;for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=u(gb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{v=1,h.send(s,d)}catch(yb){if(!(v<2))throw yb;d(-1,yb)}}else d(-1,"No Transport");return w},param:function(a,c){var d=[],e=function(a,b){b=J.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=J.ajaxSettings.traditional),J.isArray(a)||a.jquery&&!J.isPlainObject(a))J.each(a,function(){e(this.name,this.value)});else for(var f in a)w(f,a[f],c,e);return d.join("&").replace(Ra,"+")}}),J.extend({active:0,lastModified:{},etag:{}});var ib=J.now(),jb=/(\=)\?(&|$)|\?\?/i;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return J.expando+"_"+ib++}}),J.ajaxPrefilter("json jsonp",function(b,c,d){var e="string"==typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(jb.test(b.url)||e&&jb.test(b.data))){var f,g=b.jsonpCallback=J.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return!1!==b.jsonp&&(i=i.replace(jb,k),b.url===i&&(e&&(j=j.replace(jb,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&J.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||J.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return J.globalEval(a),a}}}),J.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),J.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(e,f){c=G.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var kb,lb=!!a.ActiveXObject&&function(){for(var a in kb)kb[a](0,1)},mb=0;J.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&z()||A()}:z,function(a){J.extend(J.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(c){if(!c.crossDomain||J.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(_){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=J.noop,lb&&delete kb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(yb){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,j,l,k)},c.async&&4!==i.readyState?(g=++mb,lb&&(kb||(kb={},J(a).unload(lb)),kb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var nb,ob,pb,qb,rb={},sb=/^(?:toggle|show|hide)$/,tb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ub=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];J.fn.extend({show:function(a,b,c){var d,e;if(a||0===a)return this.animate(D("show",3),a,b,c);for(var f=0,g=this.length;f<g;f++)d=this[f],d.style&&(e=d.style.display,J._data(d,"olddisplay")||"none"!==e||(e=d.style.display=""),(""===e&&"none"===J.css(d,"display")||!J.contains(d.ownerDocument.documentElement,d))&&J._data(d,"olddisplay",E(d.nodeName)));for(f=0;f<g;f++)d=this[f],d.style&&(""!==(e=d.style.display)&&"none"!==e||(d.style.display=J._data(d,"olddisplay")||""));return this},hide:function(a,b,c){if(a||0===a)return this.animate(D("hide",3),a,b,c);for(var d,e,f=0,g=this.length;f<g;f++)d=this[f],d.style&&("none"===(e=J.css(d,"display"))||J._data(d,"olddisplay")||J._data(d,"olddisplay",e));for(f=0;f<g;f++)this[f].style&&(this[f].style.display="none");return this},_toggle:J.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;return J.isFunction(a)&&J.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:J(this).is(":hidden");J(this)[b?"show":"hide"]()}):this.animate(D("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){!1===f.queue&&J._mark(this);var b,c,d,e,g,h,i,j,k,l,m,n=J.extend({},f),o=1===this.nodeType,p=o&&J(this).is(":hidden");n.animatedProperties={};for(d in a)if(b=J.camelCase(d),d!==b&&(a[b]=a[d],delete a[d]),(g=J.cssHooks[b])&&"expand"in g){h=g.expand(a[b]),delete a[b];for(d in h)d in a||(a[d]=h[d])}for(b in a){if(c=a[b],J.isArray(c)?(n.animatedProperties[b]=c[1],c=a[b]=c[0]):n.animatedProperties[b]=n.specialEasing&&n.specialEasing[b]||n.easing||"swing","hide"===c&&p||"show"===c&&!p)return n.complete.call(this);!o||"height"!==b&&"width"!==b||(n.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===J.css(this,"display")&&"none"===J.css(this,"float")&&(J.support.inlineBlockNeedsLayout&&"inline"!==E(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=n.overflow&&(this.style.overflow="hidden");for(d in a)e=new J.fx(this,n,d),c=a[d],sb.test(c)?(m=J._data(this,"toggle"+d)||("toggle"===c?p?"show":"hide":0),m?(J._data(this,"toggle"+d,"show"===m?"hide":"show"),e[m]()):e[c]()):(i=tb.exec(c),j=e.cur(),i?(k=parseFloat(i[2]),l=i[3]||(J.cssNumber[d]?"":"px"),"px"!==l&&(J.style(this,d,(k||1)+l),j=(k||1)/e.cur()*j,J.style(this,d,j+l)),i[1]&&(k=("-="===i[1]?-1:1)*k+j),e.custom(j,k,l)):e.custom(j,c,""));return!0}var f=J.speed(b,c,d);return J.isEmptyObject(a)?this.each(f.complete,[!1]):(a=J.extend({},a),!1===f.queue?this.each(e):this.queue(f.queue,e))},stop:function(a,c,d){return"string"!=typeof a&&(d=c,c=a,a=b),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];J.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=J.timers,g=J._data(this);if(d||J._unmark(!0,this),null==a)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));d&&e||J.dequeue(this,a)})}}),J.each({slideDown:D("show",1),slideUp:D("hide",1),slideToggle:D("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){J.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),J.extend({speed:function(a,b,c){
var d=a&&"object"==typeof a?J.extend({},a):{complete:c||!c&&b||J.isFunction(a)&&a,duration:a,easing:c&&b||b&&!J.isFunction(b)&&b};return d.duration=J.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in J.fx.speeds?J.fx.speeds[d.duration]:J.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(a){J.isFunction(d.old)&&d.old.call(this),d.queue?J.dequeue(this,d.queue):!1!==a&&J._unmark(this)},d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),J.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(J.fx.step[this.prop]||J.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=J.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=J.fx;this.startTime=qb||B(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(J.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){J._data(f.elem,"fxshow"+f.prop)===b&&(f.options.hide?J._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&J._data(f.elem,"fxshow"+f.prop,f.end))},e()&&J.timers.push(e)&&!pb&&(pb=setInterval(g.tick,g.interval))},show:function(){var a=J._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||J.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),J(this.elem).show()},hide:function(){this.options.orig[this.prop]=J._data(this.elem,"fxshow"+this.prop)||J.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=qb||B(),f=!0,g=this.elem,h=this.options;if(a||e>=h.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),h.animatedProperties[this.prop]=!0;for(b in h.animatedProperties)!0!==h.animatedProperties[b]&&(f=!1);if(f){if(null==h.overflow||J.support.shrinkWrapBlocks||J.each(["","X","Y"],function(a,b){g.style["overflow"+b]=h.overflow[a]}),h.hide&&J(g).hide(),h.hide||h.show)for(b in h.animatedProperties)J.style(g,b,h.orig[b]),J.removeData(g,"fxshow"+b,!0),J.removeData(g,"toggle"+b,!0);d=h.complete,d&&(h.complete=!1,d.call(g))}return!1}return h.duration==1/0?this.now=e:(c=e-this.startTime,this.state=c/h.duration,this.pos=J.easing[h.animatedProperties[this.prop]](this.state,c,0,1,h.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},J.extend(J.fx,{tick:function(){for(var a,b=J.timers,c=0;c<b.length;c++)(a=b[c])()||b[c]!==a||b.splice(c--,1);b.length||J.fx.stop()},interval:13,stop:function(){clearInterval(pb),pb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){J.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),J.each(ub.concat.apply([],ub),function(a,b){b.indexOf("margin")&&(J.fx.step[b]=function(a){J.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),J.expr&&J.expr.filters&&(J.expr.filters.animated=function(a){return J.grep(J.timers,function(b){return a===b.elem}).length});var vb,wb=/^t(?:able|d|h)$/i,xb=/^(?:body|html)$/i;vb="getBoundingClientRect"in G.documentElement?function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(yb){}if(!d||!J.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var e=b.body,f=F(b),g=c.clientTop||e.clientTop||0,h=c.clientLeft||e.clientLeft||0,i=f.pageYOffset||J.support.boxModel&&c.scrollTop||e.scrollTop,j=f.pageXOffset||J.support.boxModel&&c.scrollLeft||e.scrollLeft;return{top:d.top+i-g,left:d.left+j-h}}:function(a,b,c){for(var d,e=a.offsetParent,f=b.body,g=b.defaultView,h=g?g.getComputedStyle(a,null):a.currentStyle,i=a.offsetTop,j=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!J.support.fixedPosition||"fixed"!==h.position);)d=g?g.getComputedStyle(a,null):a.currentStyle,i-=a.scrollTop,j-=a.scrollLeft,a===e&&(i+=a.offsetTop,j+=a.offsetLeft,!J.support.doesNotAddBorder||J.support.doesAddBorderForTableAndCells&&wb.test(a.nodeName)||(i+=parseFloat(d.borderTopWidth)||0,j+=parseFloat(d.borderLeftWidth)||0),e,e=a.offsetParent),J.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&(i+=parseFloat(d.borderTopWidth)||0,j+=parseFloat(d.borderLeftWidth)||0),h=d;return"relative"!==h.position&&"static"!==h.position||(i+=f.offsetTop,j+=f.offsetLeft),J.support.fixedPosition&&"fixed"===h.position&&(i+=Math.max(c.scrollTop,f.scrollTop),j+=Math.max(c.scrollLeft,f.scrollLeft)),{top:i,left:j}},J.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){J.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?J.offset.bodyOffset(c):vb(c,d,d.documentElement):null},J.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(J.css(a,"marginTop"))||0,c+=parseFloat(J.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=J.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=J(a),h=g.offset(),i=J.css(a,"top"),j=J.css(a,"left"),k=("absolute"===d||"fixed"===d)&&J.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),J.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},J.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=xb.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(J.css(a,"marginTop"))||0,c.left-=parseFloat(J.css(a,"marginLeft"))||0,d.top+=parseFloat(J.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(J.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||G.body;a&&!xb.test(a.nodeName)&&"static"===J.css(a,"position");)a=a.offsetParent;return a})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);J.fn[a]=function(e){return J.access(this,function(a,e,f){var g=F(a);if(f===b)return g?c in g?g[c]:J.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:a[e];g?g.scrollTo(d?J(g).scrollLeft():f,d?f:J(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,f="offset"+a;J.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(J.css(a,c,"padding")):this[c]():null},J.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(J.css(b,c,a?"margin":"border")):this[c]():null},J.fn[c]=function(a){return J.access(this,function(a,c,g){var h,i,j,k;return J.isWindow(a)?(h=a.document,i=h.documentElement[d],J.support.boxModel&&i||h.body&&h.body[d]||i):9===a.nodeType?(h=a.documentElement,h[d]>=h[e]?h[d]:Math.max(a.body[e],h[e],a.body[f],h[f])):g===b?(j=J.css(a,c),k=parseFloat(j),J.isNumeric(k)?k:j):void J(a).css(c,g)},c,a,arguments.length,null)}}),a.jQuery=a.$=J}(window),function(){$&&$.noConflict&&$.noConflict(),jQuery&&jQuery.noConflict&&(window.livechat=window.livechat||{},window.livechat.jQuery=jQuery.noConflict(!0))}(),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};a._=x,window._=x,x.VERSION="1.4.3";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};x.contains=x.include=function(a,b){return null!=a&&(s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b}))},x.invoke=function(a,b){var c=h.call(arguments,2);return x.map(a,function(a){return(x.isFunction(b)?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b){return x.isEmpty(b)?[]:x.filter(a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;f<g;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;d<b;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);e<d;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.bindAll=function(a){var b=h.call(arguments,1);return 0==b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=F(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;e<a;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+(0|Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=""+ ++I;return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){c=x.defaults({},c,x.templateSettings);var d=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(L,function(a){return"\\"+K[a]}),c&&(f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(f+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),g&&(f+="';\n"+g+"\n__p+='"),e=h+b.length,b}),f+="';\n",c.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(i){throw i.source=f,i}if(b)return g(b,x);var h=function(a){return g.call(this,a,x)};return h.source="function("+(c.variable||"obj")+"){\n"+f+"}",h},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){"undefined"!=typeof _&&_.noConflict&&(window.livechat._=_.noConflict())}(),function(a){var b=function(){return{TIME:{AGENT_LEFT:6e4,CHAT_EXPIRE:3e5,CHECK_CHAT:9e5,AUTO_CONNECT:18e4,FORCE_DISCONNECT:12e5,CHAT_INACTIVE:12e5,TYPING:1e4,WAIT_MESSAGE:6e4,NON_AVAILABILITY:12e4,MISSED_CHAT_FORM:18e4,REFRESH:3e4,PING_STORAGE_TIMEOUT:3e5,PING_STORAGE_GRACE_TIME:6e4,CURRENT_VISITOR_TIME_OUT:3e5,CHANGE_VISITOR_TIME_OUT:5e3,AGENT_NETWORK_DISCONNECT:6e4,CB_REQ_TIMEOUT:12e4}}};a.Constants=new b,b=null}(window.livechat),function(a){var b=function(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};b.prototype.encode=function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=a.Base64._utf8_encode(b);k<b.length;)c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return j},b.prototype.decode=function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<b.length;)f=this._keyStr.indexOf(b.charAt(k++)),g=this._keyStr.indexOf(b.charAt(k++)),h=this._keyStr.indexOf(b.charAt(k++)),i=this._keyStr.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));return j=a.Base64._utf8_decode(j)},b.prototype._utf8_encode=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},b.prototype._utf8_decode=function(a){var b,c,d,e="",f=0;for(b=c=d=0;f<a.length;)b=a.charCodeAt(f),b<128?(e+=String.fromCharCode(b),f++):b>191&&b<224?(c=a.charCodeAt(f+1),e+=String.fromCharCode((31&b)<<6|63&c),f+=2):(c=a.charCodeAt(f+1),d=a.charCodeAt(f+2),e+=String.fromCharCode((15&b)<<12|(63&c)<<6|63&d),f+=3);return e},a.Base64=new b}(window.livechat),function(a,b){a.Autolinker=b()}(window.livechat,function(){var a=function(a){a=a||{};for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};return a.prototype={constructor:a,newWindow:!0,stripPrefix:!1,twitter:!1,email:!1,urls:!0,className:"",matcherRegex:function(){var a=/(^|[^\w])@(\w{1,15})/,b=/(?:[\-;:&=\+\$,\w\.]+@)/,c=/(?:[A-Za-z]{3,9}:(?:\/\/)?)/,d=/(?:www\.)/,e=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,f=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,g=/(?:[\-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|])?/;return new RegExp(["(",a.source,")","|","(",b.source,e.source,f.source,")","|","(","(?:","(?:",c.source,e.source,")","|","(?:","(.?//)?",d.source,e.source,")","|","(?:","(.?//)?",e.source,f.source,")",")",g.source,")"].join(""),"gi")}(),protocolRelativeRegex:/(.)?\/\//,htmlRegex:function(){var a=/[0-9a-zA-Z:]+/,b=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,c=/(?:".*?"|'.*?'|[^'"=<>`\s]+)/;return new RegExp(["<(/)?","("+a.source+")","(?:","\\s+",b.source,"(?:\\s*=\\s*"+c.source+")?",")*","\\s*/?",">"].join(""),"g")}(),urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,link:function(a){return this.processHtml(a)},processHtml:function(a){for(var b,c,d=this.htmlRegex,e=0,f=0,g=[];null!==(b=d.exec(a));){var h=b[0],i=b[2],j=!!b[1];c=a.substring(e,b.index),e=b.index+h.length,"a"===i?j?0===(f=Math.max(f-1,0))&&g.push(c):(f++,g.push(this.processTextNode(c))):0===f?g.push(this.processTextNode(c)):g.push(c),g.push(h)}if(e<a.length){var k=this.processTextNode(a.substring(e));g.push(k)}return g.join("")},processTextNode:function(a){var b=this,c=this.matcherRegex,d=this.twitter,e=this.email,f=this.urls;return a.replace(c,function(a,c,g,h,i,j,k,l){var m=c,n=g,o=h,p=i,q=j,r=k||l,s="",t="";if(m&&!d||p&&!e||q&&!f||q&&-1===q.indexOf(".")||q&&/^[A-Za-z]{3,9}:/.test(q)&&!/:.*?[A-Za-z]/.test(q)||r&&/^[\w]\/\//.test(r))return a;if(")"===a.charAt(a.length-1)){var u=a.match(/\(/g),v=a.match(/\)/g);(u&&u.length||0)<(v&&v.length||0)&&(a=a.substr(0,a.length-1),t=")")}var w,x=a,y=a;if(m)w="twitter",s=n,x="https://twitter.com/"+o,y="@"+o;else if(p)w="email",x="mailto:"+p,y=p;else if(w="url",r){var z=new RegExp("^"+b.protocolRelativeRegex.source),A=r.match(z)[1]||"";s=A+s,x=x.replace(z,"//"),y=y.replace(z,"")}else/^[A-Za-z]{3,9}:/i.test(x)||(x="http://"+x);return s+b.createAnchorTag(w,x,y)+t})},createAnchorTag:function(a,b,c){var d=this.createAnchorAttrsStr(a,b);return c=this.processAnchorText(c),"<a "+d+">"+c+"</a>"},createAnchorAttrsStr:function(a,b){var c=['href="'+b+'"',' rel="noopener noreferrer" '],d=this.createCssClass(a);return d&&c.push('class="'+d+'"'),this.newWindow&&c.push('target="_blank"'),c.join(" ")},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return this.stripPrefix&&(a=this.stripUrlPrefix(a)),a=this.removeTrailingSlash(a),a=this.doTruncate(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},removeTrailingSlash:function(a){return"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a},doTruncate:function(a){var b=this.truncate;return b&&a.length>b&&(a=a.substring(0,b-2)+".."),a}},a.link=function(b,c){return new a(c).link(b)},a}),function(){function a(b,c){function f(a){if(f[a]!==q)return f[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=f("json-stringify")&&f("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=c.stringify,k="function"==typeof i&&t;if(k){(d=function(){return 1}).toJSON=d;try{k="0"===i(0)&&"0"===i(new g)&&'""'==i(new h)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(d)&&"[1]"==i([d])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[d,!0,!1,null,"\0\b\n\f\r\t"]})==e&&"1"===i(null,d)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new j(-1))}catch(n){k=!1}}b=k}if("json-parse"==a){var l=c.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){d=l(e);var m=5==d.a.length&&1===d.a[0];if(m){try{m=!l('"\t"')}catch(n){}if(m)try{m=1!==l("01")}catch(n){}if(m)try{m=1!==l("1.")}catch(n){}}}}catch(n){m=!1}b=m}}return f[a]=!!b}b||(b=e.Object()),c||(c=e.Object());var g=b.Number||e.Number,h=b.String||e.String,i=b.Object||e.Object,j=b.Date||e.Date,k=b.SyntaxError||e.SyntaxError,l=b.TypeError||e.TypeError,m=b.Math||e.Math,n=b.JSON||e.JSON;"object"==typeof n&&n&&(c.stringify=n.stringify,c.parse=n.parse);var o,p,q,r=i.prototype,s=r.toString,t=new j(-0xc782b5b800cec);try{t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(T){}if(!f("json")){var u="[object Function]",v="[object Date]",w="[object Number]",x="[object String]",y="[object Array]",z="[object Boolean]",A=f("bug-string-char-index");if(!t)var B=m.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(a,b){return C[b]+365*(a-1970)+B((a-1969+(b=+(b>1)))/4)-B((a-1901+b)/100)+B((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var c,e,f,g=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,e=new c;for(f in e)o.call(e,f)&&g++;return c=e=null,g?p=2==g?function(a,b){var c,d={},e=s.call(a)==u;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==u;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(e=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var c,f,g=s.call(a)==u,h=!g&&"function"!=typeof a.constructor&&d[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(c in a)g&&"prototype"==c||!h.call(a,c)||b(c);for(f=e.length;c=e[--f];h.call(a,c)&&b(c));}),p(a,b)},!f("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F="000000",G=function(a,b){return(F+(b||0)).slice(-a)},H="\\u00",I=function(a){for(var b='"',c=0,d=a.length,e=!A||d>10,f=e&&(A?a.split(""):a);c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=E[g];break;default:if(g<32){b+=H+G(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},J=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,A,C,E,F,H,K,L;try{h=b[a]}catch(T){}if("object"==typeof h&&h)if((i=s.call(h))!=v||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=w&&i!=x&&i!=y||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(D){for(m=B(h/864e5),j=B(m/365.2425)+1970-1;D(j+1,0)<=m;j++);for(k=B((m-D(j,0))/30.42);D(j,k+1)<=m;k++);m=1+m-D(j,k),n=(h%864e5+864e5)%864e5,r=B(n/36e5)%24,t=B(n/6e4)%60,u=B(n/1e3)%60,A=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),
u=h.getUTCSeconds(),A=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+G(6,j<0?-j:j):G(4,j))+"-"+G(2,k+1)+"-"+G(2,m)+"T"+G(2,r)+":"+G(2,t)+":"+G(2,u)+"."+G(3,A)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if((i=s.call(h))==z)return""+h;if(i==w)return h>-1/0&&h<1/0?""+h:"null";if(i==x)return I(""+h);if("object"==typeof h){for(H=g.length;H--;)if(g[H]===h)throw l();if(g.push(h),C=[],K=f,f+=e,i==y){for(F=0,H=h.length;F<H;F++)E=J(F,h,c,d,e,f,g),C.push(E===q?"null":E);L=C.length?e?"[\n"+f+C.join(",\n"+f)+"\n"+K+"]":"["+C.join(",")+"]":"[]"}else p(d||h,function(a){var b=J(a,h,c,d,e,f,g);b!==q&&C.push(I(a)+":"+(e?" ":"")+b)}),L=C.length?e?"{\n"+f+C.join(",\n"+f)+"\n"+K+"}":"{"+C.join(",")+"}":"{}";return g.pop(),L}};c.stringify=function(a,b,c){var e,f,g,h;if(d[typeof b]&&b)if((h=s.call(b))==u)f=b;else if(h==y){g={};for(var i,j=0,k=b.length;j<k;i=b[j++],((h=s.call(i))==x||h==w)&&(g[i]=1));}if(c)if((h=s.call(c))==w){if((c-=c%1)>0)for(e="",c>10&&(c=10);e.length<c;e+=" ");}else h==x&&(e=c.length<=10?c:c.slice(0,10));return J("",(i={},i[""]=a,i),f,g,e,"",[])}}if(!f("json-parse")){var K,L,M=h.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},O=function(){throw K=L=null,k()},P=function(){for(var a,b,c,d,e,f=L,g=f.length;K<g;)switch(e=f.charCodeAt(K)){case 9:case 10:case 13:case 32:K++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=A?f.charAt(K):f[K],K++,a;case 34:for(a="@",K++;K<g;)if((e=f.charCodeAt(K))<32)O();else if(92==e)switch(e=f.charCodeAt(++K)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=N[e],K++;break;case 117:for(b=++K,c=K+4;K<c;K++)(e=f.charCodeAt(K))>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||O();a+=M("0x"+f.slice(b,K));break;default:O()}else{if(34==e)break;for(e=f.charCodeAt(K),b=K;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++K);a+=f.slice(b,K)}if(34==f.charCodeAt(K))return K++,a;O();default:if(b=K,45==e&&(d=!0,e=f.charCodeAt(++K)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(K+1))>=48&&e<=57&&O(),d=!1;K<g&&(e=f.charCodeAt(K))>=48&&e<=57;K++);if(46==f.charCodeAt(K)){for(c=++K;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==K&&O(),K=c}if(101==(e=f.charCodeAt(K))||69==e){for(e=f.charCodeAt(++K),43!=e&&45!=e||K++,c=K;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==K&&O(),K=c}return+f.slice(b,K)}if(d&&O(),"true"==f.slice(K,K+4))return K+=4,!0;if("false"==f.slice(K,K+5))return K+=5,!1;if("null"==f.slice(K,K+4))return K+=4,null;O()}return"$"},Q=function(a){var b,c;if("$"==a&&O(),"string"==typeof a){if("@"==(A?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];"]"!=(a=P());c||(c=!0))c&&(","==a?"]"==(a=P())&&O():O()),","==a&&O(),b.push(Q(a));return b}if("{"==a){for(b={};"}"!=(a=P());c||(c=!0))c&&(","==a?"}"==(a=P())&&O():O()),","!=a&&"string"==typeof a&&"@"==(A?a.charAt(0):a[0])&&":"==P()||O(),b[a.slice(1)]=Q(P());return b}O()}return a},R=function(a,b,c){var d=S(a,b,c);d===q?delete a[b]:a[b]=d},S=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(s.call(e)==y)for(d=e.length;d--;)R(e,d,c);else p(e,function(a){R(e,a,c)});return c.call(a,b,e)};c.parse=function(a,b){var c,d;return K=0,L=""+a,c=Q(P()),"$"!=P()&&O(),K=L=null,b&&s.call(b)==u?S((d={},d[""]=c,d),"",b):c}}}return c.runInContext=a,c}var b,c=!1,d={function:!0,object:!0},e=d[typeof window]&&window||this,f=b&&d[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!f||f.global!==f&&f.window!==f&&f.self!==f||(e=f),b&&!c)a(e,b);else{var g=e.JSON,h=e.JSON3,i=!1,j=a(e,e.JSON3={noConflict:function(){return i||(i=!0,e.JSON=g,e.JSON3=h,g=h=null),j}});e.JSON={parse:j.parse,stringify:j.stringify}}c&&define(function(){return j})}.call(this),function(a){var b=function(){};b.prototype.setItem=function(a,b){localStorage.setItem(a,this.encode(b))},b.prototype.getItem=function(a){return this.decode(localStorage.getItem(a))},b.prototype.removeItem=function(a){localStorage.removeItem(a)},b.prototype.encode=function(b){return b?a.Base64.encode(b):b},b.prototype.decode=function(b){return b?a.Base64.decode(b):b},a.Cache=new b,b=null}(window.livechat),function(a){var b=function(){};b.prototype.getCookie=function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},b.prototype.setCookie=function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:if(c===1/0)g="; expires=Fri, 31 Dec 9999 23:59:59 GMT";else{var h=new Date;h.setTime(h.getTime()+c),g="; expires="+h.toUTCString()}break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(f?"; domain="+f:"")+(d?"; path="+d:"; path=/")+(e?"; secure":""),!0},b.prototype.removeCookie=function(a,b,c){return!!this.hasCookie(a)&&(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:"; path=/"),!0)},b.prototype.hasCookie=function(a){return!!a&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},b.prototype.cookieKeys=function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a},a.Cookies=new b,b=null}(window.livechat),function(a){var b=function(){this.timezone={"International Date Line West":{tz:"-11",dst:"0"},"Midway Island":{tz:"-11",dst:"0"},"American Samoa":{tz:"-11",dst:"0"},Hawaii:{tz:"-10",dst:"0"},Alaska:{tz:"-9",dst:"3"},"America/Los_Angeles":{tz:"-8",dst:"3"},"Pacific Time (US & Canada)":{tz:"-8",dst:"3"},Tijuana:{tz:"-8",dst:"3"},Arizona:{tz:"-7",dst:"0"},Chihuahua:{tz:"-7",dst:"4"},Mazatlan:{tz:"-7",dst:"4"},"Mountain Time (US & Canada)":{tz:"-7",dst:"3"},"America/Chicago":{tz:"-6",dst:"3"},"Central America":{tz:"-6",dst:"3"},"Central Time (US & Canada)":{tz:"-6",dst:"3"},Guadalajara:{tz:"-6",dst:"4"},"Mexico City":{tz:"-6",dst:"4"},Monterrey:{tz:"-6",dst:"4"},Saskatchewan:{tz:"-6",dst:"0"},"America/Bogota":{tz:"-5",dst:"0"},Bogota:{tz:"-5",dst:"0"},"Eastern Time (US & Canada)":{tz:"-5",dst:"3"},"Indiana (East)":{tz:"-5",dst:"3"},Lima:{tz:"-5",dst:"0"},Quito:{tz:"-5",dst:"0"},Caracas:{tz:"-4.5",dst:"0"},"Atlantic Time (Canada)":{tz:"-4",dst:"3"},"La Paz":{tz:"-4",dst:"0"},Santiago:{tz:"-4",dst:"10"},Newfoundland:{tz:"-3.5",dst:"3"},Brasilia:{tz:"-3",dst:"9"},"Buenos Aires":{tz:"-3",dst:"0"},Georgetown:{tz:"-4",dst:"0"},Greenland:{tz:"-3",dst:"12"},"Mid-Atlantic":{tz:"-2",dst:"0"},Azores:{tz:"-1",dst:"11"},"Cape Verde Is.":{tz:"-1",dst:"0"},Casablanca:{tz:"0",dst:"1"},Dublin:{tz:"0",dst:"11"},Edinburgh:{tz:"0",dst:"11"},"Europe/London":{tz:"0",dst:"11"},Lisbon:{tz:"0",dst:"11"},London:{tz:"0",dst:"11"},Monrovia:{tz:"0",dst:"0"},UTC:{tz:"0",dst:"0"},Amsterdam:{tz:"1",dst:"1"},Belgrade:{tz:"1",dst:"1"},Berlin:{tz:"1",dst:"1"},Bern:{tz:"1",dst:"1"},Bratislava:{tz:"1",dst:"1"},Brussels:{tz:"1",dst:"1"},Budapest:{tz:"1",dst:"1"},Copenhagen:{tz:"1",dst:"1"},Ljubljana:{tz:"1",dst:"1"},Madrid:{tz:"1",dst:"1"},Paris:{tz:"1",dst:"1"},Prague:{tz:"1",dst:"1"},Rome:{tz:"1",dst:"1"},Sarajevo:{tz:"1",dst:"1"},Skopje:{tz:"1",dst:"1"},Stockholm:{tz:"1",dst:"1"},Vienna:{tz:"1",dst:"1"},Warsaw:{tz:"1",dst:"1"},"West Central Africa":{tz:"1",dst:"0"},Zagreb:{tz:"1",dst:"1"},Athens:{tz:"2",dst:"2"},Bucharest:{tz:"2",dst:"2"},Cairo:{tz:"2",dst:"0"},Harare:{tz:"2",dst:"0"},Helsinki:{tz:"2",dst:"2"},Istanbul:{tz:"2",dst:"2"},Jerusalem:{tz:"2",dst:"8"},Kyiv:{tz:"2",dst:"2"},Minsk:{tz:"2",dst:"13"},Pretoria:{tz:"2",dst:"0"},Riga:{tz:"2",dst:"2"},Sofia:{tz:"2",dst:"2"},Tallinn:{tz:"2",dst:"2"},Vilnius:{tz:"2",dst:"2"},Baghdad:{tz:"3",dst:"0"},Kuwait:{tz:"3",dst:"0"},Moscow:{tz:"3",dst:"13"},Nairobi:{tz:"3",dst:"0"},Riyadh:{tz:"3",dst:"0"},"St. Petersburg":{tz:"3",dst:"13"},Volgograd:{tz:"3",dst:"13"},Tehran:{tz:"3.5",dst:"7"},"Abu Dhabi":{tz:"4",dst:"0"},Baku:{tz:"4",dst:"1"},Muscat:{tz:"4",dst:"0"},Tbilisi:{tz:"4",dst:"0"},Yerevan:{tz:"4",dst:"0"},Kabul:{tz:"4.5",dst:"0"},Ekaterinburg:{tz:"5",dst:"13"},Islamabad:{tz:"5",dst:"0"},Karachi:{tz:"5",dst:"0"},Tashkent:{tz:"5",dst:"0"},Chennai:{tz:"5.5",dst:"0"},Kolkata:{tz:"5.5",dst:"0"},Mumbai:{tz:"5.5",dst:"0"},"New Delhi":{tz:"5.5",dst:"0"},"Sri Jayawardenepura":{tz:"5.5",dst:"0"},Kathmandu:{tz:"5.75",dst:"0"},Almaty:{tz:"6",dst:"0"},Astana:{tz:"6",dst:"0"},Dhaka:{tz:"6",dst:"0"},Novosibirsk:{tz:"6",dst:"13"},Rangoon:{tz:"6.5",dst:"0"},Bangkok:{tz:"7",dst:"0"},Hanoi:{tz:"7",dst:"0"},Jakarta:{tz:"7",dst:"0"},Krasnoyarsk:{tz:"7",dst:"13"},Beijing:{tz:"8",dst:"0"},Chongqing:{tz:"8",dst:"0"},"Hong Kong":{tz:"8",dst:"0"},Irkutsk:{tz:"8",dst:"13"},"Kuala Lumpur":{tz:"8",dst:"0"},Perth:{tz:"8",dst:"0"},Singapore:{tz:"8",dst:"0"},Taipei:{tz:"8",dst:"0"},"Ulaan Bataar":{tz:"8",dst:"0"},Urumqi:{tz:"8",dst:"0"},Osaka:{tz:"9",dst:"0"},Sapporo:{tz:"9",dst:"0"},Seoul:{tz:"9",dst:"0"},Tokyo:{tz:"9",dst:"0"},Yakutsk:{tz:"9",dst:"13"},"Adelaide (CT)":{tz:"9.5",dst:"5"},Adelaide:{tz:"9.5",dst:"5"},Darwin:{tz:"9.5",dst:"0"},Brisbane:{tz:"10",dst:"0"},Canberra:{tz:"10",dst:"5"},Guam:{tz:"10",dst:"0"},Hobart:{tz:"10",dst:"5"},Melbourne:{tz:"10",dst:"5"},"Port Moresby":{tz:"10",dst:"0"},Sydney:{tz:"10",dst:"5"},Vladivostok:{tz:"10",dst:"13"},Magadan:{tz:"11",dst:"13"},"New Caledonia":{tz:"11",dst:"0"},"Solomon Is.":{tz:"11",dst:"0"},Auckland:{tz:"12",dst:"6"},Fiji:{tz:"12",dst:"0"},Kamchatka:{tz:"12",dst:"0"},"Marshall Is.":{tz:"12",dst:"0"},Wellington:{tz:"12",dst:"6"},"Nuku'alofa":{tz:"13",dst:"0"}},this.dstTypes={1:{startMonth:"2",endMonth:"9",startPeriod:"31",endPeriod:"31",startHour:"2",endHour:"3",startDay:"0",endDay:"0"},2:{startMonth:"2",endMonth:"9",startPeriod:"31",endPeriod:"31",startHour:"3",endHour:"4",startDay:"0",endDay:"0"},3:{startMonth:"2",endMonth:"10",startPeriod:"14",endPeriod:"7",startHour:"2",endHour:"2",startDay:"0",endDay:"0"},4:{startMonth:"3",endMonth:"9",startPeriod:"7",endPeriod:"30",startHour:"2",endHour:"2",startDay:"0",endDay:"0"},5:{startMonth:"3",endMonth:"9",startPeriod:"7",endPeriod:"7",startHour:"3",endHour:"2",startDay:"0",endDay:"0"},6:{startMonth:"3",endMonth:"8",startPeriod:"7",endPeriod:"30",startHour:"3",endHour:"2",startDay:"0",endDay:"0"},7:{startMonth:"2",endMonth:"8",startHour:"0",endHour:"0"},8:{startMonth:"2",endMonth:"9",startPeriod:"31",endPeriod:"31",startHour:"2",endHour:"2",startDay:"5",endDay:"0"},9:{startMonth:"1",endMonth:"9",startPeriod:"29",endPeriod:"31",startHour:"0",endHour:"0",startDay:"0",endDay:"0"},10:{startMonth:"3",endMonth:"8",startPeriod:"30",endPeriod:"7",startHour:"0",endHour:"0",startDay:"0",endDay:"0"},11:{startMonth:"2",endMonth:"9",startPeriod:"31",endPeriod:"31",startHour:"1",endHour:"2",startDay:"0",endDay:"0"},12:{startMonth:"2",endMonth:"9",startPeriod:"31",endPeriod:"31",startHour:"22",endHour:"23",startDay:"6",endDay:"6"}}};b.prototype.getMonthName=function(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]},b.prototype.timeFormat=function(a){var b=Number(a.match(/^(\d+)/)[1]),c=Number(a.match(/:(\d+)/)[1]),d=a.match(/\s(.*)$/)[1];return"pm"==d&&b<12&&(b+=12),"am"==d&&12==b&&(b-=12),60*b+c},b.prototype.setDST=function(a,b,c,d,e,f,g){var h=new Date,i=h.getFullYear();if(b.setFullYear(i),c.setFullYear(i),7==a)b.setDate(d),c.setDate(e);else{b.setDate(d);var j=b.getDay(),k=Number(d)-j,l=k-7+Number(f);j!=f&&(8==a||12==a?f<=d-k?b.setDate(k+Number(f)):b.setDate(l):b.setDate(k-Number(f))),c.setDate(e);var j=c.getDay();k=e-j,l=k-7+Number(g),j!=g&&(12==a?g<=e-k?c.setDate(k+Number(g)):c.setDate(l):c.setDate(k-Number(g)))}},b.prototype.dstTime=function(a){var b=!1,c=new Date,d=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()),e=d.getTime()-c.getTime(),f=new Date,g=Math.floor(60*this.timezone[a].tz*60*1e3),h=this.timezone[a].dst;if(0==h||13==h)13==h&&(b=!0);else{var i=this.dstTypes[h],j=new Date;j.setTime(j.getTime()+e);var k=new Date,l=new Date;new Date;switch(k.setMonth(i.startMonth),k.setHours(1),k.setMinutes(0),k.setSeconds(0),k.setMilliseconds(0),l.setMonth(i.endMonth),l.setHours(1),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),Number(h)){case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 9:case 10:case 11:case 12:"Baku"==a?(k.setHours(4),l.setHours(5)):"Azores"==a?(k.setHours(12),l.setHours(1)):(k.setHours(i.startHour),l.setHours(i.endHour)),this.setDST(h,k,l,i.startPeriod,i.endPeriod,i.startDay,i.endDay);break;case 7:k.setHours(i.startHour),l.setHours(i.endHour);var m=end=22;this.setDST(h,k,l,m,end)}5==h||6==h||9==h||10==h?j.getTime()>k.getTime()&&j.getTime()<l.getTime()||(b=!0):j.getTime()>k.getTime()&&j.getTime()<l.getTime()&&(b=!0)}return f.setTime(f.getTime()+g+e+(b?36e5:0)),f},b.prototype.isBusinessHour=function(a){if("null"==a||!a)return!0;var b=JSON.parse(a),c=this.dstTime(b.time_zone),d=new Date(c),e=d.getDate(),f=this.getMonthName(d.getMonth()),g=b.holiday_data;for(var h in g)if(g.hasOwnProperty(h)&&g[h][0]==f+" "+e)return!1;var i=d.getDay(),j=d.getHours(),k=d.getMinutes(),l=b.business_time_data,m=l.working_hours[i];if(!m)return!1;var n=m.beginning_of_workday,o=this.timeFormat(n),p=m.end_of_workday,q=this.timeFormat(p);return!((j=60*j+k)<o||j>=q)},a.BusinessHours=new b}(window.livechat),function(a){var b=(a.jQuery,function(){});b.prototype.parseAddress=function(a){var b=a[0].address_components;if(b&&b instanceof Array){for(var c={latitude:window.Geo.lat,longitude:window.Geo.lon,source:"google",ipAddress:window.Geo.IP},d={},e=0;e<b.length;e++){if(b[e].types&&b[e].types instanceof Array)switch(b[e].types[0]){case"locality":d.city=b[e].long_name;break;case"administrative_area_level_1":d.region=b[e].long_name;break;case"country":d.country=b[e].long_name,d.country_code=b[e].short_name}c.address=d}return c}},b.prototype.trimInvalidData=function(b){return a.JSON3.parse(a.JSON3.stringify(b).replace("undefined",""))},b.prototype.fetch=function(a){},a.Location=new b,b=null}(window.livechat),function(a){var b=(a.jQuery,function(){this.data={browser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identitiy:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Android",identity:"Android"}]}});b.prototype.detect=function(a){a({browser:this.search(this.data.browser),version:this.search(navigator.userAgent)||this.search(navigator.appVersion),os:this.search(this.data.os)})},b.prototype.search=function(a){if("object"!=typeof a){var b=a.indexOf(this.version_string);if(-1==b)return;return parseFloat(a.substr(b+this.version_string.length+1))}for(var c=0;c<a.length;c++){var d=a[c].string,e=a[c].prop;if(this.version_string=a[c].versionSearch||a[c].identity,d){if(-1!=d.indexOf(a[c].subString))return a[c].identity}else if(e)return a[c].identity}},a.Browser=new b}(window.livechat),function(a){var b=function(){this.token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,this.timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,this.timezoneClip=/[^-+\dA-Z]/g,this.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},this.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}};b.prototype.pad=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},b.prototype.format=function(a,b,c){if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(b=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");b=String(this.masks[b]||b||this.masks.default),"UTC:"==b.slice(0,4)&&(b=b.slice(4),c=!0);var d=c?"getUTC":"get",e=a[d+"Date"](),f=a[d+"Day"](),g=a[d+"Month"](),h=a[d+"FullYear"](),i=a[d+"Hours"](),j=a[d+"Minutes"](),k=a[d+"Seconds"](),l=a[d+"Milliseconds"](),m=c?0:a.getTimezoneOffset(),n={d:e,dd:this.pad(e),ddd:this.i18n.dayNames[f],dddd:this.i18n.dayNames[f+7],m:g+1,mm:this.pad(g+1),mmm:this.i18n.monthNames[g],mmmm:this.i18n.monthNames[g+12],yy:String(h).slice(2),yyyy:h,h:i%12||12,hh:this.pad(i%12||12),H:i,HH:this.pad(i),M:j,MM:this.pad(j),s:k,ss:this.pad(k),l:this.pad(l,3),L:this.pad(l>99?Math.round(l/10):l),t:i<12?"a":"p",tt:i<12?"am":"pm",T:i<12?"A":"P",TT:i<12?"AM":"PM",Z:c?"UTC":(String(a).match(this.timezone)||[""]).pop().replace(this.timezoneClip,""),o:(m>0?"-":"+")+this.pad(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][e%10>3?0:(e%100-e%10!=10)*e%10]};return b.replace(this.token,function(a){return a in n?n[a]:a.slice(1,a.length-1)})},a.DateFormatter=new b,b=null}(window.livechat),function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype;this.globalEventListeners=[],d.globalEventListeners=this.globalEventListeners,d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.addGlobalListener=function(a){var c="object"==typeof a;-1==b(window.livechat.globalEventListeners,a)&&window.livechat.globalEventListeners.push(c?a:{listener:a,once:!1})},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&-1!==(d=b(f[e],c))&&f[e].splice(d,1);return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f=this.getListenersAsObject(a);for(e in f)if(f.hasOwnProperty(e))for(d=f[e].length;d--;)c=f[e][d],!0===c.once&&this.removeListener(a,c.listener),c.listener.apply(this,b||[])===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.triggerGloablEvent=function(a,b){var c,d=window.livechat.globalEventListeners.length,e=[a];Array.prototype.push.apply(e,b);for(var f=0;f<d;f++)c=window.livechat.globalEventListeners[f],c.listener.apply(this,e)},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},d._getEvents=function(){return this._events||(this._events={})},this.EventEmitter=a}.call(window.livechat),"undefined"!=typeof exports&&"undefined"!=typeof require&&"undefined"==typeof setTimeout&&(setTimeout=require("timers").setTimeout,clearTimeout=require("timers").clearTimeout),AbstractChannel.subclass=function(a){var b=function(){this.constructor.apply(this,arguments),this.baseConstructor.apply(this,arguments)};b.prototype=new AbstractChannel;for(var c in a)a.hasOwnProperty(c)&&(b.prototype[c]=a[c]);return b},AbstractChannel.prototype={onmessage:null,rawdata:!1,onclose:null,onopen:null,closed:!1,baseConstructor:function(){this._buffer=[],this._setupConnection()},send:function(a){if(this.closed)throw"Cannot send to a closed connection";if(!this._ready())return void this._buffer.push(a);this._send(a)},_flush:function(){for(var a=0;a<this._buffer.length;a++)this._send(this._buffer[a]);this._buffer=[]},_incoming:function(a){if("o"!=a){if(!this.rawdata&&"object"!=typeof a)try{a=JSON.parse(a)}catch(b){throw console.error("Got invalid JSON data:",a.substr(0,40)),b}this.onmessage&&this.onmessage(a)}}};var WebSocketChannel=AbstractChannel.subclass({constructor:function(a){0===a.search(/^https?:/i)&&(a=a.replace(/^http/i,"ws")),this.address=a,this.socket=null,this._reopening=!1,this.pingIntervalId=null},toString:function(){var a="[WebSocketChannel to "+this.address;return this.socket?a+=" readyState: "+this.socket.readyState:a+=" (socket unopened)",this.closed&&(a+=" CLOSED"),a+"]"},close:function(){this.closed=!0,this.socket?this.socket.close():this.onclose&&this.onclose()},_send:function(a){this.socket.send(a)},_ready:function(){return this.socket&&this.socket.readyState==this.socket.OPEN},_setupConnection:function(){this.closed||(this.socket=new WebSocket(this.address),this.socket.onopen=function(){function a(){pingSocket.send("h")}this._flush(),!this._reopening&&this.onopen&&this.onopen(),pingSocket=this.socket,this.pingIntervalId=setInterval(function(){a()},3e4),this._reopening=!1}.bind(this),this.socket.onclose=function(a){this.socket=null,clearInterval(this.pingIntervalId),console.error("WebSocket close",a.wasClean?"clean":"unclean","code:",a.code,"reason:",a.reason||"none"),this.closed||(this._reopening=!0,this._setupConnection())}.bind(this),this.socket.onmessage=function(a){this._incoming(a.data)}.bind(this),this.socket.onerror=function(a){console.error("WebSocket error:",a.data)}.bind(this))}}),SocketIoChannel=AbstractChannel.subclass({constructor:function(a,b,c,d,e,f){this.socket=null,this.room=a,this.role=b,this.viewerId=c,this.sdata=d,this.siteId=e,this.chatId=f},toString:function(){var a="[SocketIoChannel to "+this.address;return this.socket?this.socket.connected?a+=" CONNECTED":a+=" CLOSED":a+=" (socket unopened)",a+"]"},close:function(){this.socket&&(this.closed=!0,this.socket.disconnect())},_send:function(a){try{"websocket"!=this.socket.io.engine.transport.name&&a.body&&(a.body=encodeURIComponent(JSON.stringify(a.body)),a.datatype="bytearray"),this.socket.emit("message",a)}catch(b){console.error(b)}},_ready:function(){return this.socket&&this.socket.connected},_setupConnection:function(){var a;a=livechat&&livechat.io?livechat.io:io;var b=["?role=",this.role,"&i=",this.viewerId.toString(),"&s=",this.sdata,"&siteId=",this.siteId,"&room=",this.room.toString()].join("");this.socket=a(OneClickCbUtils.safeSessionGetItem("cobrowsingChannel")+b,{forceNew:!0});var c=function(){this.socket.emit("join",{room:this.room,role:this.role,i:this.viewerId.toString(),s:this.sdata,siteId:this.siteId,chatId:this.chatId}),this._flush()}.bind(this);this.socket.on("connect",c);var d=function(a){this._incoming(a)}.bind(this);this.socket.on("message",d)}}),PostMessageChannel=AbstractChannel.subclass({_pingPollPeriod:100,_pingPollIncrease:100,_pingMax:2e3,constructor:function(a,b){this.expectedOrigin=b,this._pingReceived=!1,this._receiveMessage=this._receiveMessage.bind(this),a&&this.bindWindow(a,!0),this._pingFailures=0},toString:function(){var a="[PostMessageChannel";return this.window?a+=" to window "+this.window:a+=" not bound to a window",this.window&&!this._pingReceived&&(a+=" still establishing"),a+"]"},bindWindow:function(a,b){this.window&&(this.close(),this.closed=!1),a&&a.contentWindow&&(a=a.contentWindow),this.window=a;var c=this.window;"undefined"!=typeof window&&(c=window),c.addEventListener("message",this._receiveMessage,!1),b||this._setupConnection()},_send:function(a){this.window.postMessage(a,this.expectedOrigin||"*")},_ready:function(){return this.window&&this._pingReceived},_setupConnection:function(){if(!this.closed&&!this._pingReceived&&this.window){this._pingFailures++,this._send("hello");var a=this._pingPollPeriod+this._pingPollIncrease*this._pingFailures;a=a>this._pingPollMax?this._pingPollMax:a,this._pingTimeout=setTimeout(this._setupConnection.bind(this),a)}},_receiveMessage:function(a){if(a.source===this.window){if(this.expectedOrigin&&a.origin!=this.expectedOrigin)return void console.info("Expected message from",this.expectedOrigin,"but got message from",a.origin);if(this.expectedOrigin||(this.expectedOrigin=a.origin),"hello"==a.data)return this._pingReceived=!0,this._pingTimeout&&(clearTimeout(this._pingTimeout),this._pingTimeout=null),this.onopen&&this.onopen(),void this._flush();this._incoming(a.data)}},close:function(){this.closed=!0,this._pingReceived=!1,this._pingTimeout&&clearTimeout(this._pingTimeout),window.removeEventListener("message",this._receiveMessage,!1),this.onclose&&this.onclose()}}),PostMessageIncomingChannel=AbstractChannel.subclass({constructor:function(a){this.source=null,this.expectedOrigin=a,this._receiveMessage=this._receiveMessage.bind(this),window.addEventListener("message",this._receiveMessage,!1)},toString:function(){var a="[PostMessageIncomingChannel";return this.source?a+=" bound to source "+a:a+=" awaiting source",a+"]"},_send:function(a){for(var b=0;b<this._buffer.length;b++)this.source.postMessage(this._buffer[b],this.expectedOrigin);this._buffer=[],this.source.postMessage(a,this.expectedOrigin)},_ready:function(){return!!this.source},_setupConnection:function(){},_receiveMessage:function(a){return this.expectedOrigin&&"*"!=this.expectedOrigin&&a.origin!=this.expectedOrigin?void console.info("Expected message from",this.expectedOrigin,"but got message from",a.origin):(this.expectedOrigin||(this.expectedOrigin=a.origin),this.source||(this.source=a.source),"hello"==a.data?void this.source.postMessage("hello",this.expectedOrigin):void this._incoming(a.data))},close:function(){this.closed=!0,window.removeEventListener("message",this._receiveMessage,!1),this._pingTimeout&&clearTimeout(this._pingTimeout),this.onclose&&this.onclose()}}),CHROME_CHANNEL_EVENT="BrowserMirrorChromeChannel",ChromePostMessageChannel=AbstractChannel.subclass({_pingPollPeriod:100,constructor:function(a,b,c){this.expectedOrigin=c,this._pingReceived=!1,this.doc=b,a&&this.bindWindow(a,!0),this._receiveMessage=this._receiveMessage.bind(this),this.doc.addEventListener(CHROME_CHANNEL_EVENT,this._receiveMessage,!1,!0)},toString:function(){var a="[ChromePostMessageChannel";return this.window?a+=" to window "+this.window:a+=" not bound to a window",this.window&&!this._pingReceived&&(a+=" still establishing"),a+"]"},bindWindow:function(a,b){this.window&&this.close(),a&&a.contentWindow&&(a=a.contentWindow),this.window=a,b||this._setupConnection()},_send:function(a){this.window.postMessage(a,this.expectedOrigin||"*")},_ready:function(){return this.window&&this.pingReceived},_setupConnection:function(){this.closed||this._pingReceived||!this.window||(this._send("hello"),this._pingTimeout=setTimeout(this._setupConnection.bind(this),this._pingPollPeriod))},_receiveMessage:function(a){var b=a.target,c=b.getAttribute("data-payload");if(b.parentNode.removeChild(b),b=null,"hello"==c)return this._pingReceived=!0,this._pingTimeout&&(clearTimeout(this._pingTimeout),this._pingTimeout=null),this.onopen&&this.onopen(),void this._flush();self._incoming(c)},close:function(){this.closed=!0,this.doc.remoteEventListener(CHROME_CHANNEL_EVENT,this._receiveMessage,!1,!0),this._pingTimeout&&clearTimeout(this._pingTimeout),this.onclose&&this.onclose()}}),ChromePostMessageIncomingChannel=AbstractChannel.subclass({constructor:function(){this._receiveMessage=this._receiveMessage.bind(this),window.addEventListener("message",this._receiveMessage,!1)},toString:function(){return"[ChromePostMessageIncomingChannel]"},_ready:function(){return!!document.head},_send:function(a){var b=document.createEvent("Events");b.initEvent(CHROME_CHANNEL_EVENT,!0,!1);var c=document.createElement("BrowserMirrorPayloadElement");c.setAttribute("data-payload",a),document.head.appendChild(c),c.dispatchEvent(b)},_setupConnection:function(){},_receiveMessage:function(a){if(!a.source&&!a.origin)return"hello"==a.data?void(this._ready()?this._send("hello"):setTimeout(function(){this._receiveMessage(a)}.bind(this),100)):void this._incoming(a.data)},close:function(){this.closed=!0,window.removeEventListener("message",this._receiveMessage,!1),this.onclose&&this.onclose()}}),PortChannel=AbstractChannel.subclass({constructor:function(a,b){this.prefix=b||"",this.port=a,this._incoming=this._incoming.bind(this),this._remoteOpened=this._remoteOpened.bind(this),this._remoteClosed=this._remoteClosed.bind(this),this._gotHello=!1},toString:function(){var a="[PortChannel";return a+=" port: "+this.port.toString(),this.prefix&&(a+=' prefix: "'+this.prefix+'"'),a+="]"},_setupConnection:function(){this.port.on(this.prefix+"Send",this._incoming),this.port.on(this.prefix+"Opened",this._remoteOpened),this.port.on(this.prefix+"Closed",this._remoteClosed),this.port.emit("Opened")},destroy:function(){this.port.removeListener(this.prefix+"Send",this._incoming),this.port.removeListener(this.prefix+"Opened",this._remoteOpened),this.port.removeListener(this.prefix+"Closed",this._remoteClosed)},_ready:function(){return this._gotHello},_remoteOpened:function(a){this._gotHello=!0,a||this.port.emit("Opened",!0),this.onopen&&this.onopen(),this._flush()},_remoteClosed:function(){this._gotHello=!1,this.onclose&&this.onclose(),this.destroy()},close:function(){this.port.emit("Closed"),this._remoteClosed()},_send:function(a){this.port.emit("Send",a)}}),PortProxyChannel=AbstractChannel.subclass({constructor:function(a,b){this.prefix=a||"",this.self=b||self,this._incoming=this._incoming.bind(this),this._remoteOpened=this._remoteOpened.bind(this)},toString:function(){var a="[PortProxyChannel";return"undefined"!=typeof self&&this.self===self||(a+=" bound to self "+this.self),this.prefix&&(a+=' with prefix "'+this.prefix+'"'),a+"]"},_setupConnection:function(){
this.self.port.on(this.prefix+"IncomingData",this._incoming),this.self.port.on(this.prefix+"Opened",this._remoteOpened)},_ready:function(){return!0},_send:function(a){this.self.port.emit(this.prefix+"SendData",a)},close:function(){try{this.self.port.emit(this.prefix+"Close")}catch(a){console.log("Error on close",a,a.name)}this.self.port.removeListener(this.prefix+"IncomingData",this._incoming),this.self.port.removeListener(this.prefix+"Opened",this._remoteOpened),this.closed=!0,this.onclose&&this.onclose()},_remoteOpened:function(){this.onopen&&this.onopen()}});"undefined"!=typeof exports&&(exports.EchoProxy=EchoProxy,exports.PostMessageChannel=PostMessageChannel,exports.ChromePostMessageChannel=ChromePostMessageChannel,exports.PostMessageIncomingChannel=PostMessageIncomingChannel,exports.PortChannel=PortChannel,exports.PortProxyChannel=PortProxyChannel);var TEMPORARY_HIGHLIGHT_DELAY=1e4,chatjQuery=chatjQuery||livechat.jQuery||jQuery;if(!window.Freeze)var Freeze={};Freeze._inputTags={INPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0},Freeze.eventListenerWrapper=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent("on"+b,c)},Freeze.removeEventListener=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.removeEvent("on"+b,c)},Freeze.isMaster=function(){return!(!Freeze.elementTracker||!Freeze.elementTracker.cbMaster)},Freeze.scrolledElements=[],setInterval(function(){if(Freeze.isMaster()&&Freeze.scrolledElements.length){msg={type:"elScroll",body:{elScroll:{}}};var a=!1;for(i=0;i<Freeze.scrolledElements.length;i++)el=Freeze.scrolledElements[i],9==el.nodeType?Freeze.elementTracker.scrollEventListener():(msg.body.elScroll[el.jsmirrorId]={top:el.scrollTop,left:el.scrollLeft},a=!0);a&&Freeze.elementTracker.send(msg),Freeze.scrolledElements=[]}},100),Freeze._scrollEvents=function(a){var b=a.target||a.scrElement;-1==Freeze.scrolledElements.indexOf(b)&&Freeze.scrolledElements.push(b)},Freeze._changeEvent=function(a){Freeze.isMaster()&&Freeze.elementTracker.send({type:"change",body:{target:a.target.jsmirrorId,value:a.target.value}})},Freeze.attachChangeEvent=function(a){try{if(Freeze._inputTags[a.tagName]){var b;if("INPUT"==a.tagName){if(a.type&&"password"==a.type.toLowerCase())return;var c=chatjQuery(a).attr("value");void 0!==c&&0!=c||(current_value=chatjQuery(a).val(),chatjQuery(a).attr("value",current_value))}b=Freeze.canSendValue(a)?"keyup":"change",Freeze.eventListenerWrapper(a,b,Freeze._changeEvent,!1)}else a.isContentEditable&&Freeze.eventListenerWrapper(a,"change",Freeze._changeEvent,!1)}catch(d){console.log("changeEvent error"+d)}},Freeze.modifierPressed=!1,Freeze.attachKeyBoardEvents=function(a){downResponder=function(a){var b=a.target||a.srcElement,c=a.keyCode||a.which;return"Meta"==a.keyIdentifier||"Meta"==a.key||17==c?(this.modifierPressed=!0,allow=!0):this.modifierPressed?(this.modifierPressed=!1,allow=!0):allow="lc_chat_input_container"==b.id||OneClickCbUtils.allowKeyBoardEvents()||"msg-box"==b.id,allow},eventResponder=function(a){var b=a.target||a.srcElement;return"lc_chat_input_container"==b.id||OneClickCbUtils.allowKeyBoardEvents()||"msg-box"==b.id},a.onkeypress=a.onkeyup=eventResponder,a.onkeydown=downResponder,Freeze.eventListenerWrapper(a,"keydown",downResponder,!0),Freeze.eventListenerWrapper(a,"keyup",eventResponder,!0),Freeze.eventListenerWrapper(a,"keypress",eventResponder,!0)},Freeze.makeId=function a(b){return this.attachChangeEvent(b),this.attachKeyBoardEvents(b),this.eventListenerWrapper(b,"scroll",this._scrollEvents,!1),"el"+a.counter++},Freeze.makeId.counter=1e3,Freeze.skipElementsOKEmpty={LINK:!0,STYLE:!0,HEAD:!0,META:!0,BODY:!0,APPLET:!0,BASE:!0,BASEFONT:!0,BDO:!0,BR:!0,OBJECT:!0,TD:!0,TR:!0,TH:!0,THEAD:!0,TITLE:!0,I:!0,B:!0,SPAN:!0,A:!0,INPUT:!0},Freeze.voidElements={AREA:!0,BASE:!0,BR:!0,COL:!0,COMMAND:!0,EMBED:!0,HR:!0,IMG:!0,INPUT:!0,KEYGEN:!0,LINK:!0,META:!0,PARAM:!0,SOURCE:!0,TRACK:!0,WBR:!0},Freeze.skipElementsBadTags={SCRIPT:!0,NOSCRIPT:!0,IFRAME:!0},Freeze.skipElement=function(a){if(a.isSVG&&1==a.isSVG)return!1;var b=a.tagName;if(Freeze.skipElementsBadTags[b]||a.jsmirrorHide||"webSocketContainer"==a.id)return!0;if(a.id){var c=["cb-block-canvas","oneclick-canvas-wrapper","oneclick-canvas-wrapper","oneclick-background-canvas","oneclick-annotation-button","oneclick-annotation-canvas","oneclick-annotation-toolbar","oneclick-master-cursor","oneclick-client-cursor","oneclick-cobrowse-button","oneclick-cobrowse-url","oneclick-cobrowse-tc","oneclick-cobrowse-gc","lc_chat_layout","lc_cb_actions","livechat_layout","scroll-to-top"];try{for(var d=0;d<c.length;d++)if(-1!=a.id.search(c[d]))return!0}catch(e){console.log("error: search for ",c[d],"undefined")}}return!((!a.style||"none"!=a.style.display||chatjQuery(a).is(":visible"))&&(0!==a.clientWidth||0!==a.clientHeight||Freeze.skipElementsOKEmpty[b]||a.childNodes.length))},Freeze.serializeDocument=function(){for(var a=document,b=a.childNodes[0],c=0;c<a.childNodes.length;c++)if(a.childNodes[c].tagName&&("HTML"==a.childNodes[c].tagName||"html"==a.childNodes[c].tagName)){b=a.childNodes[c];break}return{href:location.href,htmlAttrs:Freeze.serializeAttributes(b),head:Freeze.serializeElement(a.head),body:Freeze.serializeElement(a.body),hash:location.hash||""}},Freeze.cssTextList=[],Freeze.getInlineCSS=function(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a];b.href||this.addCSSRules(b)}return this.cssTextList},Freeze.addCSSRules=function(a){for(var b=0;b<a.cssRules.length;b++){var c=a.cssRules[b];c.type==c.MEDIA_RULE?this.addCSSRules(c):c.type==c.STYLE_RULE&&-1!=c.cssText.search("grid-stack")&&this.cssTextList.push(c.cssText)}},Freeze.elementTracker={},Freeze.trackElement=function(a){var b=this.makeId(a);a.jsmirrorId=b,this.elementTracker.elements[b]=a},Freeze.serializeElement=function(a,b){if("svg"==a.tagName&&(a.isSVG=!0),a.jsmirrorId||Freeze.trackElement(a),"CANVAS"==a.tagName)return["IMG",a.jsmirrorId,{src:a.toDataURL("image/png")},[]];var c,d=this.serializeAttributes(a);if("IFRAME"==a.tagName){c=[];var e;try{e=this.staticHTML(a.contentWindow.document.documentElement)}catch(j){return console.warn("Had to skip iframe for permission reasons:",j+"","src:",a.src),["SPAN",a.jsmirrorId,{},[]]}d.src=this.encodeData("text/html",e)}else{c=this.normalChildren(a);for(var f=c.length,g=0;g<f;g++){"string"!=typeof c[g]&&(c[g]=this.serializeElement(c[g]))}}var h=a.tagName.replace(/[^a-zA-Z0-9]/g,""),i=[h,a.jsmirrorId,d,c,a.parentNode.jsmirrorId];return b&&i.push(a.innerHTML),i},Freeze.normalChildren=function(a){for(var b=[],c=a.childNodes,d=c.length,e=0;e<d;e++){var f=c[e];if(f.isSVG=a.isSVG,!this.skipElement(f))if(f.nodeType==this.TEXT_NODE){var g=f.nodeValue;if(!g)continue;e&&"string"==typeof b[b.length-1]?b[b.length-1]+=g:b.push(g)}else f.nodeType==this.ELEMENT_NODE&&b.push(f)}return b},Freeze.filterInnerHTML=function(a){for(var b=[a[0],a[1],a[2],[]],c=0;c<a[3].length;c++)"string"==typeof a[3][c]?b[3].push(a[3][c]):b[3].push(this.filterInnerHTML(a[3][c]));return b},Freeze.canSendValue=function(a){return!("TEXTAREA"!=a.tagName&&("INPUT"!=a.tagName||!a.type||"text"!=a.type.toLowerCase()&&"email"!=a.type.toLowerCase()))},Freeze.isCheckedElement=function(a){return!(!a||"INPUT"!=a.tagName||!a.type||"checkbox"!=a.type.toLowerCase()&&"radio"!=a.type.toLowerCase())},Freeze.serializeAttributes=function(a){var b={};if(a.attributes)for(var c=a.attributes.length,d=0;d<c;d++){var e=a.attributes[d].name;if("on"!=e.substr(0,2).toLowerCase())if("href"==e||"src"==e||"value"==e)b[e]=a[e];else if("HTML"==a.tagName&&"class"==e){var f=a.attributes[d].nodeValue;f=f.replace("lc-cb-container-vi",""),b[e]=f}else b[e]=a.attributes[d].nodeValue}return Freeze.canSendValue(a)&&(b.value=a.value),this.isCheckedElement(a)?b.checked=a.checked:"SELECT"==a.tagName&&(b.value=a.value),b},Freeze.compareAttributes=function(a,b){var c=0;b.tagName;for(var d in a)if(a.hasOwnProperty(d)){c++;var e;if("href"==d||"src"==d||"value"==d||"checked"==d&&this.isCheckedElement(b)){if(e=b[d],b.hasAttribute(d)||c--,b.critValue&&b.critValue!==e)return!1}else e=b.getAttribute(d);if(e!=a[d])return-1!=a[d].indexOf(e)&&"stylesheet"==a.rel}var f=b.attributes.length;if(f==c)return!0;for(d=0;d<f;d++){"on"==b.attributes[d].name.substr(0,2).toLowerCase()&&c++}return c==f},Freeze.compareAttributes2=function(a,b){var c,d=this.serializeAttributes(b),e=!0;for(c in a)a[c]!=d[c]&&(e=!1);for(c in d)a[c]!=d[c]&&(e=!1);var f=this.compareAttributes(a,b);return e!=f&&console.log("Disagreement",b.tagName,e,f),e},Freeze.htmlQuote=function(a){return a?-1==a.search(/[&<"]/)?a:a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):a},Freeze.encodeData=function(a,b){return"data:"+a+";base64,"+btoa(encodeURIComponent(b))},Freeze.staticHTML=function(a){if("CANVAS"==a.tagName)return'<IMG SRC="'+this.htmlQuote(a.toDataURL("image/png"))+'">';var b=null;if("IFRAME"==a.tagName)try{var c=this.staticHTML(a.contentWindow.document.documentElement);b=this.encodeData("text/html",c)}catch(j){console.warn("Had to skip iframe for permission reasons:",j+"")}var d,e="<"+a.tagName,f=a.attributes;if(f&&(d=f.length))for(var g=0;g<d;g++){var h=f[g].name;if("on"!=h.substr(0,2).toLowerCase()){var i;i="src"==h&&b?b:"href"==h||"src"==h||"value"==h?a[h]:f[g].nodeValue,e+=" "+h+'="'+this.htmlQuote(i)+'"'}}return e+=">",this.voidElements[a.tagName]||(e+=this.staticChildren(a),e+="</"+a.tagName+">"),e},Freeze.getAttributes=function(a){var b=[],c=a.attributes;if(c&&c.length)for(var d=c.length,e=0;e<d;e++){var f=c[e].name;if("on"!=f.substr(0,2).toLowerCase()){var g;g="href"==f||"src"==f||"value"==f?a[f]:c[e].nodeValue,b.push([f,g])}}return b},Freeze.TEXT_NODE=document.TEXT_NODE,Freeze.ELEMENT_NODE=document.ELEMENT_NODE,Freeze.staticChildren=function(a){for(var b="",c=a.childNodes,d=c.length,e=0;e<d;e++){var f=c[e];if(f.isSVG=a.isSVG,!this.skipElement(f))if(f.nodeType==this.TEXT_NODE){var g=f.nodeValue;b+=this.htmlQuote(g)}else f.nodeType==this.ELEMENT_NODE&&(b+=this.staticHTML(f))}return b},Freeze.applyDiff=function(a){for(var b,c,d,e=0;e<a.length;e++){var f=a[e],g=f[0],h=Freeze.getElement(f[1]);if(h){if("attrs"===g&&Freeze.setAttributes(h,f[2]),"deletetext-"===g||"delete-"===g||"delete-+"==g)for(;h.previousSibling&&h.previousSibling.nodeType==document.TEXT_NODE;)h.parentNode.removeChild(h.previousSibling);if("delete+"===g)for(;h.nextSibling&&h.nextSibling.nodeType==document.TEXT_NODE;)h.parentNode.removeChild(h.nextSibling);if("delete"!==g&&"delete-"!==g&&"delete+"!==g&&"delete-+"!==g||h.parentNode.removeChild(h),"delete_last_text"===g){if(!h.childNodes.length){console.warn("Tried to delete_last_text of element with no children",f);continue}var i=h.childNodes[h.childNodes.length-1];if(i.nodeType!=document.TEXT_NODE){console.warn("Got command that deletes something that isn't text",f,i);continue}h.removeChild(i)}if("replace_text"===g)if(1!==h.childNodes.length||h.childNodes[0].nodeType!==document.TEXT_NODE){for(;h.childNodes;)h.removeChild(h.childNodes[0]);h.appendChild(document.createTextNode(f[2]))}else h.childNodes[0].nodeValue=f[2];if("insert_before"===g)for(b=f[2],c=b.length-1;c>=0;c--)d="string"==typeof b[c]?document.createTextNode(b[c]):Freeze.deserializeElement(b[c]),h.parentNode.insertBefore(d,h);if("append_to"===g)for(b=f[2],c=0;c<b.length;c++)d="string"==typeof b[c]?document.createTextNode(b[c]):Freeze.deserializeElement(b[c]),h.appendChild(d)}else console.warn("Got diff command for element that does not exist",f)}},Freeze.unfreeze=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];if(a.tagName!=c)return void a.parentNode.replaceChild(Freeze.deserializeElement(b),a);Freeze.setAttributes(a,e),a.jsmirrorId=d;for(var g=0,h=0;h<f.length;h++){var i=h+g,j=a.childNodes[i];if(j){if(j.jsmirrorHide||"webSocketContainer"==j.id){g++,h--;continue}"string"==typeof f[h]?j.nodeType!=document.TEXT_NODE?j.parentNode.replaceChild(document.createTextNode(f[h]),j):j.nodeValue=f[h]:Freeze.unfreeze(j,f[h])}else a.appendChild(Freeze.deserializeElement(f[h]))}for(;a.childNodes.length-g>f.length;){var k=a.childNodes[f.length+g];k.jsmirrorHide||"webSocketContainer"==k.id?g++:a.removeChild(k)}},Freeze.deserializeElement=function(a){if("string"==typeof a)return document.createTextNode(a);var b,c,d,e=a[0],f=a[1],g=a[2],h=a[3];if("\x3c!--COMMENT--\x3e"==e)return c=h&&h.length?h[0]:"",b=document.createComment(c),b.jsmirrorId=f,b;b=document.createElement(e);try{for(d in g)g.hasOwnProperty(d)&&b.setAttribute(d,g[d])}catch(j){console.warn("bad attrs",g,JSON.stringify(g))}if(void 0===h)throw console.warn("Bad children",a),"Bad children list";for(d=0;d<h.length;d++){var i=h[d];"string"==typeof i?b.appendChild(document.createTextNode(i)):b.appendChild(Freeze.deserializeElement(i))}return b.jsmirrorId=f,b},Freeze.setAttributes=function(a,b){var c=0;for(var d in b)b.hasOwnProperty(d)&&(c++,"checked"==d&&this.isCheckedElement(a)?a.checked=b[d]:(a.setAttribute(d,b[d]),"value"==d&&(a.value=b[d])));if(a.attributes||(console.trace(),console.log("el.attributes?",a,a.tagName)),a.attributes.length>c){var e=[];for(d=0;d<a.attributes.length;d++)b.hasOwnProperty(a.attributes[d].name)||e.push(a.attributes[d].name);for(d=0;d<e.length;d++)console.debug("removing attr",e[d]),a.removeAttribute(e[d])}},Freeze.setBase=function(a){for(var b=document.getElementsByTagName("base"),c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c]);var d=document.createElement("base");d.href=a,document.head.appendChild(d)},Freeze._elements={},Freeze.getElement=function(a){return Freeze._elements[a]},Freeze.refreshElements=function(){function a(b,c){b[c.jsmirrorId]=c;for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];e.nodeType===document.ELEMENT_NODE&&a(b,e)}}Freeze._elements={},a(Freeze._elements,document.head),a(Freeze._elements,document.body)},OneClickCbUtils={master:null,appCallBack:null,tabId:null,log:{VERBOSE:10,DEBUG:20,INFO:30,NOTIFY:40,WARN:50,ERROR:50,CRITICAL:60},cleanUpSession:function(){this.master&&this.master.cleanUp(),this.master=null},safeSessionGetItem:function(a){return window.sessionStorage?window.sessionStorage.getItem(a):""},safeSessionSetItem:function(a,b){window.sessionStorage&&window.sessionStorage.setItem(a,b)},generateId:function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},generateRoom:function(){return text=this.generateId(),this.safeSessionSetItem("room",text),text},getRoom:function(){return this.safeSessionGetItem("room")||this.generateRoom()},setMaster:function(a){return this.safeSessionSetItem("cbMaster",a),this.safeSessionGetItem("cbMaster")},getMaster:function(a){return"true"===(this.safeSessionGetItem("cbMaster")||this.setMaster(a))},setSessionParameters:function(a,b,c,d,e,f){a||b||c||d||e||f||OneClickFakeAccounts&&(fakeVisitor=OneClickFakeAccounts.getFakeVisitor(),a=fakeVisitor.name,b=fakeVisitor.role,c=fakeVisitor.viewerId,d=fakeVisitor.sdata,e=fakeVisitor.siteId,f=fakeVisitor.chatId),this.safeSessionSetItem("cbName",a),this.safeSessionSetItem("cbRole",b),this.safeSessionSetItem("cbViewerId",c),this.safeSessionSetItem("cbSdata",d),this.safeSessionSetItem("cbSiteId",e),this.safeSessionSetItem("cbChatId",f)},getSessionParameters:function(){return{name:this.safeSessionGetItem("cbName"),role:this.safeSessionGetItem("cbRole"),viewerId:this.safeSessionGetItem("cbViewerId"),sdata:this.safeSessionGetItem("cbSdata"),siteId:this.safeSessionGetItem("cbSiteId"),chatId:this.safeSessionGetItem("cbChatId")}},isCobrowseActive:function(){return"true"===this.safeSessionGetItem("1click-cobrowsing")},cobrowsingStart:function(a,b,c,d,e,f){this.isCobrowseActive()||(this.setSessionParameters(a,b,c,d,e,f),this.master=new Master(document))},cobrowsingEnd:function(){this.master&&this.master.CbStop(),this.master=null},cobrowseAutoRestart:function(){this.master||(this.master=new Master(document))},allowKeyBoardEvents:function(){return!this.master||this.master.cbMaster},getCobrowseLink:function(){return this.master&&this.isCobrowseActive()?displayText=window.location.protocol+"//"+this.safeSessionGetItem("cobrowsingApp")+"/cb_view/"+this.master.room:displayText="cobrowsing is off.",displayText},takeControl:function(){return this.master&&this.master.takeControl()},giveControl:function(){return this.master&&this.master.giveControl()},setCallback:function(a){this.appCallBack=a},callBack:function(a,b){this.appCallBack?this.appCallBack(a,b):alert(b)},setCobrowsingServer:function(a,b){this.safeSessionSetItem("cobrowsingChannel",a),this.safeSessionSetItem("cobrowsingApp",b)},cobrowseLog:function(a){var b=this.log.DEBUG;if(a>this.log.WARN&&console.trace&&console.trace(),"undefined"!=typeof console&&!(a<b)){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);var e="log";if(a>=this.log.ERROR&&console.error?e="error":a>=this.log.INFO&&console.info?e="info":console.debug&&(e="debug"),console[e]||(e="log"),console[e].apply)try{console[e].apply(console,c)}catch(f){console[e].apply(console,["Could not log: "+f])}else console.log(c)}}};var ELEMENT_NODE,chatjQuery=chatjQuery||livechat.jQuery||jQuery;Master.prototype={toString:function(){return"[Master channel: "+this.channel+"]"},send:function(a){a.master=this.cbMaster,a.srcId=this.srcId,this.channel.send(a)},sendDoc:function(){windowWidthHeightListener(),this.checkDocumentWidthHeight(),this.clearNoReflectionElements();var a=Freeze.serializeDocument(),b={},c=JSON.stringify(a);if(!this.lastSentDoc||this.lastSentDoc!=c)if(this.lastSentDoc){var d=[],e=this.diffDocuments(this.lastSentDocData.head,this.document.head,d);if(null===e?d=null:null===(e=this.diffDocuments(this.lastSentDocData.body,this.document.body,d,!1))&&(d=null),null===d||!d.length&&1!=d.noReflection)OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.DEBUG,"Sending complete document",null===d?"fault":"diff failure"),b.type="doc",b.body={doc:a},b.css={sheet:Freeze.getInlineCSS()},this.lastSentDoc=c,this.lastSentDocData=a;else if(d&&d.length){OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.DEBUG,"Diffs:");for(var f=0;f<d.length;f++)OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.DEBUG,"...diff",this.diffRepr([d[f]]));b.type="diffs",b.body={diffs:d},b.css={sheet:Freeze.getInlineCSS()},this.lastSentDoc=c,this.lastSentDocData=a}else OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.DEBUG,"No updates to send/should not happen")}else b.type="doc",b.body={doc:a},b.css={sheet:Freeze.getInlineCSS()},this.lastSentDoc=c,this.lastSentDocData=a;b.body&&(this.send(b),Freeze.cssTextList=[]),this.syncHRefCount+=1,this.syncHRefCount>=this.maxSyncHRef&&(this.syncHRefCount=0,b.type="HrefNow",b.body={HrefNow:location.href},this.send(b))},diffDocuments:function(a,b,c){if("svg"==b.tagName&&(b.isSVG=!0),!b)throw"Got bad current argument: "+b;void 0===c&&(c=[]),b.jsmirrorId||(OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"Got diffDocuments element without an id",b),b.jsmirrorId=Freeze.makeId(b),this.elements[b.jsmirrorId]=b);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4];if(d!=b.tagName)return OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"got tag name change",d,b.tagName),null;if(Freeze.compareAttributes(f,b)||(currentAttributes=Freeze.serializeAttributes(b),b.noReflection&&(b.critValue?b.critValue===b.value?delete currentAttributes.value:delete b.critValue:delete currentAttributes.value),c.push(["attrs",b.jsmirrorId,currentAttributes])),e!=b.jsmirrorId)return OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"Tag ids don't match",e,b.jsmirrorId,b),null;if(!this.cbMaster&&b.noReflection)return c.noReflection=!0,c;if(void 0!==h&&b.innerHTML==h)return c;var i=Freeze.normalChildren(b),j=i.length,k=g.length;if(1===j&&1===k&&"string"==typeof i[0]&&"string"==typeof g[0])return g[0]!==i[0]&&c.push(["replace_text",b.jsmirrorId,i[0]]),c;for(var l=0,m=0;l<k||m<j;)if("string"!=typeof g[l]||g[l]!==i[m]){var n=this.findNextMatch(g,i,l,m);null===n&&(n=[k,j]);var o=n[0],p=n[1];if(l<o)if(l+1==o&&"string"==typeof g[l])o>=k?c.push(["delete_last_text",b.jsmirrorId]):c.push(["deletetext-",g[l+1][1]]);else for(var q="string"==typeof g[l],r=l;r<o;r++)if("string"!=typeof g[r]){var s="delete";r==l+1&&q&&(s+="-"),r+1<g&&"string"==typeof g[r+1]&&(s+="+"),c.push([s,g[r][1],g[r][4]])}if(m<p){for(var t=[],r=m;r<p;r++)"string"==typeof i[r]?t.push(i[r]):(i[r].jsmirrorId||(i[r].jsmirrorId=Freeze.makeId(i[r]),this.elements[i[r].jsmirrorId]=i[r]),t.push(Freeze.serializeElement(i[r])));i[p]?c.push(["insert_before",i[p],t]):c.push(["append_to",b.jsmirrorId,t])}g[o]&&this.diffDocuments(g[o],i[p],c),m=p+1,l=o+1}else l++,m++;return c},findNextMatch:function(a,b,c,d){if(c>=a.length||d>=b.length)return null;for(;"string"==typeof b[d]||!b[d].jsmirrorId;)if(++d>=b.length)return null;var e=c,f=b[d].jsmirrorId;if(!f)for(;e<a.length;){if("string"!=typeof a[e]&&f==a[e][1])return[e,d];e++}for(;"string"==typeof a[c];)if(++c>=a.length)return null;for(f=a[c][1],e=d;e<b.length;){if("string"!=typeof b[e]&&f==b[e].jsmirrorId)return[c,e];e++}return this.findNextMatch(a,b,c+1,d+1)},processCommand:function(a){var b=OneClickCbUtils.master;if(b&&a.srcId!=b.srcId){"bytearray"==a.datatype?payload=JSON.parse(decodeURIComponent(a.body)):payload=a.body;var c=a.type;"event"==c?b.processEvent(payload.event):"getDoc"==c||"reloadDoc"==c?b.processGetDoc():"getResolution"==c?b.processGetResolution():"change"==c?b.processChange(payload):"contentEditable"==c?b.processContentEditable(payload):"highlight"==c?b.processHighlight(payload.highlight):"cursor"==c?b.processCursor(a.clientId,payload):"scroll"==c?b.processScroll(payload):"elScroll"==c?b.processElScroll(payload.elScroll):"takeControl"==c?b.processTakeControl(a):"giveControl"==c?b.helloComplete?b.becomeMaster(a):OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.INFO,"hello is not complete, so not doing giveControl"):"controlTransferComplete"==c?b.processControlTransferComplete(a):"annotation"==c?b.processAnnotation(payload):"bye"==c?b.processBye(a):"cbStop"==c?b.processCbStop():"helloComplete"==c?b.helloComplete=!0:console.log("missed msgs",a)}},triggerMostButtons:function(a,b){!a||"INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName||this.triggerMouseEvent(a,"focus"),this.triggerMouseEvent(a,"mouseover"),this.triggerMouseEvent(a,"mousedown"),this.triggerMouseEvent(a,"mouseup"),this.dispatchEvent(b,a),Freeze.isCheckedElement(a)&&this.triggerMouseEvent(a,"blur")},triggerMouseEvent:function(a,b){var c=document.createEvent("MouseEvents");c.initEvent(b,!0,!0),this.dispatchEvent(c,a)},processEvent:function(a){var b=this.deserializeEvent(a);if("MouseEvent"==b.module&&"click"==b.type){var c=a.target||a.srcElement;this.triggerMostButtons(c,b),c.getAttribute("href")&&c.getAttribute("href").startsWith("#")&&setTimeout(this.scrollEventListener(),200)}else{if("keypress"==b.type){a.type="keydown";var d=this.deserializeEvent(a);this.dispatchEvent(d,a.target)}if(this.dispatchEvent(b,a.target),"keypress"==b.type){a.type="keyup";var e=this.deserializeEvent(a);this.dispatchEvent(e,a.target)}}},serializeEvent:function(a){var b={};for(var c in a){var d=a[c];if((c.toUpperCase()!=c||"number"!=typeof d)&&"function"!=typeof d&&d!==window){if(d&&"object"==typeof d)try{var e=d.jsmirrorId;if(!e)continue;d={jsmirrorId:e}}catch(g){OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"could not get jsmirrorId",d,c,g);continue}b[c]=d}}b.cancelable=a.cancelable,b.canBubble=a.canBubble;var f=a+"";return f=f.substr(f.indexOf(" ")+1,f.length-f.indexOf(" ")-2),b.module=f,b},deserializeEvent:function(a){var b;"PointerEvent"==a.module&&(a.module="MouseEvent");var c=this.document.createEvent(a.module);for(var d in a)if(a.hasOwnProperty(d)){if((b=a[d])&&"object"==typeof b&&b.jsmirrorId){var e=this.getElement(b.jsmirrorId)||null;e||OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"Could not find element",b.jsmirrorId),b=e}a[d]=b}this.initEvent(c,a,a.module);for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);return c},initEvent:function(a,b,c){if(c in this.eventAliases&&(c=this.eventAliases[c]),"UIEvents"===c)a.initUIEvent(b.type,b.canBubble||!0,b.cancelable||!0,b.view||window,b.detail);else if("MouseEvents"==c)OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.INFO,{type:b.type,canBubble:b.canBubble||!0,cancelable:b.cancelable||!0,view:this.document.defaultView,detail:void 0===b.detail?1:this.detail,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey,metaKey:b.metaKey,button:b.button,relatedTraget:b.relatedTarget||null}),a.initMouseEvent(b.type,b.canBubble||!0,b.cancelable||!0,this.document.defaultView,1,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget||null);else if("HTMLEvents"==c)a.initEvent(b.type,b.canBubble||!0,b.cancelable||!0);else if("KeyboardEvent"==c){var d=a.initKeyboardEvent?"initKeyboardEvent":"initKeyEvent";a[d](b.type,b.canBubble||!0,b.cancelable||!0,b.view||window,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.keyCode,b.charCode)}},eventAliases:{UIEvent:"UIEvents",KeyEvents:"KeyboardEvent",Event:"HTMLEvents",Events:"HTMLEvents",MouseScrollEvents:"MouseEvents",MouseEvent:"MouseEvents",HTMLEvent:"HTMLEvents",PopupEvents:"MouseEvents"},dispatchEvent:function(a,b){if(OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.INFO,"Dispatching internal event",a.type,a,b),Freeze.isCheckedElement(b)&&(a.doNotTrack=!0),b&&!b.dispatchEvent&&(OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.WARN,"huh",a,b,b===window),b=window),b){var c=b.dispatchEvent(a);OneClickCbUtils.cobrowseLog(OneClickCbUtils.log.DEBUG,"should do default",c,a.type,b.tagName,b.href),c&&b["on"+a.type]&&b["on"+a.type](a),c&&"click"==a.type&&this.doDefaultAction(a,b)}else this.document.dispatchEvent(a)},doDefaultAction:function(a,b){if("A"!==b.tagName)(b=b.parentNode)&&this.doDefaultAction(a,b);else if(b.href){var c=b.href,d="";-1!=c.indexOf("#")&&(d=c.substr(c.indexOf("#"),c.length),c=c.substr(0,c.indexOf("#")));var e=location.href;if(-1!=e.indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),c===e||-1!=b.target.indexOf("_blank"))return location.hash=d,void this.send({type:"baseHash",body:{baseHash:d,href:location.href}});location.href=b.href}},setNoReflection:function(a){-1===this.noReflectionElements.indexOf(a)&&(a.noReflection=!0,this.noReflectionElements.push(a))},processChange:function(a){var b=this.getElement(a.target);this.setNoReflection(b),b.value=a.value,b.critValue=a.value;var c=this.document.createEvent("UIEvent");c.initUIEvent("change",!0,!0,window,{});var d=b.dispatchEvent(c);d&&b.onchange&&b.onchange(c),c=this.document.createEvent("KeyboardEvent"),c[c.initKeyboardEvent?"initKeyboardEvent":"initKeyEvent"]("keyup",!0,!0,window,!1,!1,!1,!1,0,0),(d=b.dispatchEvent(c))&&b.onkeyup&&b.onkeyup(c)},processContentEditable:function(a){var b=this.getElement(a.target);b&&(b.innerHTML=a.value,this.setNoReflection(b))},processHighlight:function(a){var b=this.getElement(a.target);b&&this.temporaryHighlight(b,a.offsetTop,a.offsetLeft,a.mode||"remote")},processCursor:function(a,b){var c,d;if(a){d="oneclick-client-cursor"+a,cursorIdName=d+"-name",c=b.cursor.name||"",cursorIdImg=d+"-image";var e=document.getElementById(d),f=b.cursor.position;if(null===e){var g=this.appendHTML('<div class="lcb-cursor-pointer" id="'+d+'" style="z-index:99999;top:'+f.y+"px;left:"+f.x+'px;position:absolute;"><div class="lcb-cursor-image"><img class="lcb-cursor-img" id="'+cursorIdImg+'"  src="" alt/></div><div class="lcb-cursor-name" id="'+cursorIdName+'">'+c+"</div></div></div>");null!==document.body&&(document.body.appendChild(g),window.livechat&&window.livechat.Chat&&livechat.Chat.setAgentCursorPictureCobrowsing())}else chatjQuery("#"+cursorIdName).text(" "+c+" "),e.style.top=f.y+"px",e.style.left=f.x-22+"px"}},appendHTML:function(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b},processScroll:function(a){this.scrollTopGS(a.scroll.position.t),this.scrollLeftGS(a.scroll.position.l)},processElScroll:function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=this.getElement(b);c&&(c.scrollTop=a[b].top,c.scrollLeft=a[b].left)}},processControlTransferComplete:function(a){a.dstId==this.srcId&&OneClickCbUtils.callBack("info","control transfer complete")},processAnnotation:function(a){if(canvas=document.getElementById("oneclick-annotation-canvas"),canvas){var b=a.data;"start"===b?this.canvasChange("block"):"end"===b?this.canvasChange("none"):"clear"===b?this.canvasClear(a,canvas):"wb-on"===b?chatjQuery("#oneclick-canvas-wrapper").css({opacity:1}):"wb-off"===b?chatjQuery("#oneclick-canvas-wrapper").css({opacity:.01}):this.canvasDraw(a)}},canvasChange:function(a){chatjQuery("#oneclick-canvas-wrapper").css({display:a,opacity:.01}),chatjQuery("#oneclick-annotation-canvas").css({display:a}),chatjQuery("#oneclick-background-canvas").css({display:a}),chatjQuery("#oneclick-annotation-toolbar").css({display:a})},canvasClear:function(a,b){var c=chatjQuery("oneclick-background-canvas");if(c.length){c[0].getContext("2d");bgCanvasContext.clearRect(0,0,b.width,b.height)}if(a.admin){b.getContext("2d").clearRect(0,0,b.width,b.height)}},canvasDraw:function(a){"none"==document.getElementById("oneclick-canvas-wrapper").style.display&&this.canvasChange("block");var b=chatjQuery("oneclick-background-canvas");if(b.length){b[0].getContext("2d");if(a.context){var c=a.context.split(":");bgCanvasContext.lineWidth=c[0],bgCanvasContext.strokeStyle=c[1]}bgCanvasContext.beginPath();var d=a.data.split(","),e=d[0].split("#");bgCanvasContext.moveTo(e[0],e[1]);for(var f=1;f<d.length;f++){var g=d[f].split("#");bgCanvasContext.lineTo(g[0],g[1]),bgCanvasContext.stroke()}}},processBye:function(a){var b=a.clientId;b&&(cursorId="#oneclick-client-cursor"+b,chatjQuery(cursorId).remove())},doFaultRecovery:function(){this.faultRecoverTimeOut||(this.currentFaultCount+=1,this.currentFaultCount>=this.maxFaultCount&&this.sendDocWithTimeout())},processGetDoc:function(){this.faultRecoverTimeOut||this.sendDocWithTimeout()},sendDocWithTimeout:function(){var a=Freeze.serializeDocument(),b=JSON.stringify(a);this.lastSentDoc=b,this.lastSentDocData=a;var c={};c.type="doc",c.body={doc:a},c.css={sheet:Freeze.getInlineCSS()},Freeze.cssTextList=[],this.send(c);var d=this;this.faultRecoverTimeOut=setTimeout(function(){d.faultRecoverTimeOut=null,d.currentFaultCount=0},15e3)},processGetResolution:function(){this.windowWidth=this.windowHeight=null,windowWidthHeightListener()},getElement:function(a){return a&&"object"==typeof a&&a.jsmirrorId&&(a=a.jsmirrorId),this.elements[a]||(this.doFaultRecovery(),console.warn("Could not find element",a)),this.elements[a]||null},processCbStop:function(){OneClickCbUtils.callBack("info","cbStop"),this.cleanUp()},CbStop:function(){msg={type:"cbStop"},this.channel.send(msg),this.cleanUp()},mouseEventListener:function(a){var b=this,c=(a.clientX||a.pageX)+this.scrollLeftGS(),d=(a.clientY||a.pageY)+this.scrollTopGS();b.mouse.x==c&&b.mouse.y==d||(b.mouse.x=c,b.mouse.y=d,null===b.mouseTimeout&&(b.mouseTimeout=setTimeout(function(){b.mouseTimeout=null,b.send({type:"cursor",body:{cursor:{position:b.mouse,name:b.name}}})},250)))},scrollTopGS:function(a){if(void 0===a){var a;try{a=this.document.documentElement.scrollTop||this.document.body.scrollTop}catch(b){a=0}return a}if(this.document.documentElement)try{this.document.documentElement.scrollTop=a}catch(b){}if(this.document.body)try{this.document.body.scrollTop=a}catch(b){}},scrollLeftGS:function(a){if(void 0===a){var a;try{a=this.document.documentElement.scrollLeft||this.document.body.scrollLeft}catch(b){a=0}return a}if(this.document.documentElement)try{this.document.documentElement.scrollLeft=a}catch(b){}if(this.document.body)try{this.document.body.scrollLeft=a}catch(b){}},scrollEventListener:function(){this.scrollTop=this.scrollTopGS(),this.scrollLeft=this.scrollLeftGS(),this.send({type:"scroll",body:{scroll:{position:{t:this.scrollTop,l:this.scrollLeft}}}})},checkDocumentWidthHeight:function(){try{dw=chatjQuery(document).width(),
dh=chatjQuery(document).height(),this.dw==dw&&this.dh==dh||(this.dw=dw,this.dh=dh,resizeCanvas("#cb-block-canvas",dw,dh))}catch(a){console.log(a)}},clearNoReflectionElements:function(){if(this.cbMaster){for(i=0;i<this.noReflectionElements.length;i++)el=this.noReflectionElements[i],delete el.noReflection,el.isContentEditable&&el.jsmirrorId&&(el.jsmirrorId=Freeze.makeId(el),this.elements[el.jsmirrorId]=el);this.noReflectionElements=[]}},setMasterParams:function(){this.cbMaster=!0,OneClickCbUtils.setMaster(!0),this.scrollEventListener(),chatjQuery("#cb-block-canvas").hide()},processTakeControl:function(a){console.log("processTabControl",a),"agent"==a.role?this.becomeFollower():"visitor"==a.role?0==this.cbMaster&&(this.setMasterParams(),OneClickCbUtils.callBack("info","Agent has given the control to you.")):console.error("unexpected role for takeControl",a)},becomeFollower:function(){this.cbMaster&&(this.cbMaster=!1,OneClickCbUtils.setMaster(!1),chatjQuery("#cb-block-canvas").show(),OneClickCbUtils.callBack("info","Agent has taken the control back."))},takeControl:function(){return this.setMasterParams(),msg={},msg.type="takeControl",msg.master=this.cbMaster,msg.role="visitor",this.channel.send(msg),!0},becomeMaster:function(a){this.setMasterParams(),msg={},msg.type="controlTransferComplete",msg.master=this.cbMaster,msg.srcId=this.srcId,msg.dstId=a.srcId,this.channel.send(msg),OneClickCbUtils.callBack("info","Agent has given the control to you.")},giveControl:function(){return!!this.cbMaster&&(msg={},msg.type="giveControl",msg.master=this.cbMaster,msg.srcId=this.srcId,this.channel.send(msg),this.cbMaster=!1,OneClickCbUtils.setMaster(!1),chatjQuery("#cb-block-canvas").show(),!0)},sendMasterHello:function(){!this.helloComplete&&OneClickCbUtils.isCobrowseActive()?this.send({type:"masterHello"}):clearInterval(this.sendMasterHelloTimeout)},getClickPosition:function(a){a=a||window.event;var b=0,c=0;return(a.clientX||a.clientY)&&document.body&&null!=document.body.scrollLeft&&(b=a.clientX+document.body.scrollLeft,c=a.clientY+document.body.scrollTop),(a.clientX||a.clientY)&&"CSS1Compat"==document.compatMode&&document.documentElement&&null!=document.documentElement.scrollLeft&&(b=a.clientX+document.documentElement.scrollLeft,c=a.clientY+document.documentElement.scrollTop),(a.pageX||a.pageY)&&(b=a.pageX,c=a.pageY),{clickX:b,clickY:c}},cloneClick:function(){return templateClick=chatjQuery("#oneclick-template-cursor"),templateClick.length||(templateClick=chatjQuery("<div/>",{id:"oneclick-template-cursor"}).addClass("lc-cb-touch-bg-vi").appendTo("body").hide()),templateClone=templateClick.clone(),templateClone.attr("id",null),templateClone},displayClick:function(a){var b=a.target||a.srcElement;if(!a.doNotTrack){if(b){if("cb-block-canvas"==b.id)return;if(Freeze.isCheckedElement(b)){var c=this.serializeEvent(event);this.send({type:"event",body:{event:c}})}}var d=this.getClickPosition(a),e=this.cloneClick();chatjQuery(document.body).append(e),e.css({top:d.clickY,left:d.clickX,borderColor:"red",display:"block"}),setTimeout(function(){e.addClass("freshdesk-hover")},400),setTimeout(function(){e.remove()},2e3)}},deleteMirrorIds:function(a){for(var b in a)a.hasOwnProperty(b)&&(el=a[b],el.jsmirrorId&&delete el.jsmirrorId)},diffRepr:function(a){for(var b="",c=0;c<a.length;c++){b&&(b+="\n");var d=a[c][0],e=a[c][1];if(window.OneClickCbUtils.master||window.mirror)try{var f=(window.OneClickCbUtils.master||window.mirror).getElement(e);f&&(e=f.tagName+":"+e)}catch(g){console.log(a);continue}"attrs"===d?b+="attrs("+e+")="+this.keys(a[c][2],!0).join(","):"delete"==d.substr(0,6)?b+=d+"("+e+")":(b+=d+"("+e+")="+a[c][2].length+"/"+parseInt(JSON.stringify(a[c][2]).length,10),b+="\n    "+JSON.stringify(a[c][2]))}return b},keys:function(a,b){var c=[];for(var d in a)c.push(d);return b&&c.sort(),c},cleanUp:function(){try{clearInterval(this.sendDocInterval),Freeze.removeEventListener(document,"mousemove",this.mouseEventListenerCallback,!1),Freeze.removeEventListener(document,"scroll",this.scrollEventListenerCallback,!1),Freeze.removeEventListener(document,"click",this.displayClickWrapper,!1),chatjQuery(window).off("resize",windowWidthHeightListener),msg={type:"cobrowseEnd"},this.send(msg),chatjQuery("div").filter(function(){return this.id.match(/oneclick-client-cursor/)}).remove(),chatjQuery("#cb-block-canvas").hide(),Freeze.elementTracker=null,this.deleteMirrorIds(this.elements),Freeze.makeId.counter=1e3,OneClickCbUtils.safeSessionSetItem("1click-cobrowsing","false"),OneClickCbUtils.setMaster(!0);var a=this;setTimeout(function(){a.channel.close()},1e3)}catch(b){console.error(b)}}},OneClickCbUtils.isCobrowseActive()&&OneClickCbUtils.cobrowseAutoRestart(),function(){!function(a){var b;b=function(){function a(a,b){this.name=a,this.label=b.title,this.options=b.options,this.setVisibility(b.show),this.setValidator(a),this.value=null}return a.prototype.getValue=function(){return this.value||""},a.prototype.setVisibility=function(a){this.visibility=a,this.visibility&&"string"==typeof this.visibility&&(this.visibility=parseInt(this.visibility,10)),this.visibility||(this.visibility=0)},a.prototype.isRequired=function(){return 2===this.visibility},a.prototype.isNotRequired=function(){return 2!==this.visibility},a.prototype.isShown=function(){return 1===this.visibility},a.prototype.isHidden=function(){return 0===this.visibility},a.prototype.isValid=function(a){var b;return b=a||this.value,this.validator(b)},a.prototype.setValidator=function(a){switch(a){case"name":this.validator=function(){return this.isNotRequired()&&!this.value||this.value&&this.value.length<=100};break;case"email":this.validator=function(){var a;return a=/^([a-zA-Z0-9_\'\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,this.isNotRequired()&&!this.value||this.value&&a.test(this.value)};break;case"phone":this.validator=function(){return this.isNotRequired()&&!this.value||this.value&&this.value.match(/^[0-9\-\(\)\s+]+$/)};break;case"textfield":this.validator=function(){return this.isNotRequired()&&!this.value||this.value&&this.value.length>0};break;case"textarea":this.name="textarea",this.validator=function(a){return this.isNotRequired()&&!this.value||this.value&&this.value.length>0};break;case"dropdown":this.validator=function(a){return this.isNotRequired()&&"-1"===this.value||this.value&&"-1"!==this.value};break;default:this.validator=function(){return!1}}},a}(),a.Field=b}(window.livechat)}.call(this),function(){window.livechat=window.livechat||{},window.livechat.templates=window.livechat.templates||{},livechat.templates.chat='<div id="lc_chat_layout" class="lc-collapsed lc-prechat lc-support-widget <%= widgetPosition %>"><div id="lc_chat_header" class="<%= widgetColors.classes%> lc-header-bg"><img id="lc_agent_profile_pic" src="" class="lc-profile-pic"/><span id="lc_chat_title"><%= widgetTitle %></span><span id="lc-close" class="lc-close" title="Close"><i>&plus;</i></span><span id="lc_minimize" class="lc-minimize" title="Minimize"><i>&minus;</i></span></div><div id="lc_chat_container"><div id="lc_chat_window" class="lc-chat-window"><div class="overlay-bg"><div class="loader-desc"><%= loaderMessage %>...</div><div class="sloader"></div></div><div id="lc_chat_message_window"></div><div id="lc_chat_notification_window"></div><textarea id="lc_chat_input_container" tabindex="-1" placeholder="<%= messageBoxPlaceholder%>"></textarea><button id="lc_button_send" title="send"></button></div></div><div class="lc-end-chat hide"><p> </p><div class="lc-ec-choices"><button id="lc-ec-cancel" class="lc-ec-yes lc-ec-cancel"></button><button id="lc-ec-ok" class="lc-ec-no lc-ec-ok"></button></div></div></div><ul id="lc_cb_actions_vi" class="lc-cb-actions-vi"><li><div class="lc-cb-profile-vi"><img title="Username"/></div><div class="lc-cb-profile-info-vi"><div class="lc-cb-control-mode-vi"><p><%=livechat.defaultMessages.cb_viewing_screen_vi%></p><span class="lc-cb-give-control-vi" title="Give Control"><%=livechat.defaultMessages.cb_give_control_vi%></span></div><div class="lc-cb-view-mode-vi"><p><%=livechat.defaultMessages.cb_controlling_screen_vi%></p><p class="subtext"><%=livechat.defaultMessages.cb_view_mode_subtext%></p></div></div><div class="lc-cb-session-request-vi"><p> <%=livechat.defaultMessages.cb_visitor_session_request%></p><button id="deny_cb_session_vi" class="lc-cb-session-deny-vi" >Deny</button><button id="allow_cb_session_vi" class="lc-cb-session-allow-vi">Allow</button></div><div class="lc-cb-notification-vi"><p><%=livechat.defaultMessages.cobrowsing_agent_request_control%> </p><button id="deny_cb_vi" class="lc-cb-button-deny-vi" >Deny</button><button id="allow_cb_vi" class="lc-cb-button-allow-vi">Allow</button></div></li><li class="lc-cb-stop-vi" title="Stop Screen Sharing"><i class="lcb-cross">+</i><span><%=livechat.defaultMessages.cobrowsing_stop_request%></span></li></ul>',livechat.templates.message='<p class="<%=message.class%>"><span class="lc-msg-block"><span class="lc-msg"><% if(message.type === \'typing\'){ %><span class=\'lc-typing-dots\'><span></span><span></span><span></span></span><% }else{%><%=message.content%></span><% if(message.time) {%><span class="lc-time"><%=message.time%></span><% } %><% } %><% if(message.chatId ) {%><span id="<%=message.id%>" createdAt= "<%= new Date(message.createdAt) %>" actualCreatedAt= "<%= message.actualCreatedAt %>" actualReceivedAt= "<%=message.actualReceivedAt %>" style="display: none;"></span><% } %></span></p>',livechat.templates.notification='<p id="<%= notification.id%>" class="<%= notification.class%>" ><%= notification.content %></p>',livechat.templates.offline='<div id="lc_offline_chat_form" class="lc-offline-form"><p><%= nonAvailabilityMessage %></p><ul class="lc-form-field-wrap"><%livechat._.each(fields, function(field){ %><li class="lc-textfield-wrap"><label for="lc_chat_offline_<%=field.name%>" class="lc-chat-required"><%= field.label%><span> *</span></label><% if(field.name == "textarea"){ %><textarea type="text" id="lc_chat_offline_textarea"><%if(msg){ %><%= msg %> <% } %></textarea><% }else{ %><input type="text" maxlength="50" id="lc_chat_offline_<%=field.name%>" value="<%=field.getValue()%>"><% } %></li><% })%></ul><div id="lc_button_holder" class="lc-button-holder"><button id="lc_offline_submit"  class="lc-button-submit"></button></div></div>',livechat.templates.prechat='<div id="lc_prechat_form" class="lc-pre-form"><p><%= preChatMessage %></p><ul class="lc-form-field-wrap"><%livechat._.each(fields, function(field){ %><% if(!field.isHidden()) { %><li class="lc-textfield-wrap"><% if(field.isRequired()) { %><label for="lc_chat_<%=field.name%>" class="lc-chat-required"><%=field.label%><span> *</span></label><% }else{ %><label for="lc_chat_<%=field.name%>"><%=field.label%></label><% } %><% if(field.name == "dropdown") { %><div class="lc-select"><span><%= (field.getValue() || "...") %></span><select id="lc_chat_<%=field.name%>" ><option <%= (field.getValue() ? "" : "selected" )%> value="-1" >...</option><%livechat._.each(field.options, function(option) { %><option <%= ((field.getValue() === option) ? "selected" : "") %> value="<%= option%>" ><%= option%></option><% })%></select></div><% } else{ if (field.name == "name" || field.name == "textfield"){ %><input type="text" maxlength="100" id="lc_chat_<%=field.name%>" value="<%=field.getValue()%>"><% } else { %><input type="text" maxlength="50" id="lc_chat_<%=field.name%>" value="<%=field.getValue()%>"><% } } %></li><% } %><% });%></ul><div id="lc_button_holder" class="lc-button-holder"><button id="lc_prechat_submit" class="lc-button-submit"></button></div></div>'}(),function(){!function(a){var b,c,d;b=a.Constants,a.Browser,a.jQuery,d=a._,c=function(){function c(){this.id=null,this.name=null,this.email=null,this.phone=null,this.textfield=null,this.dropdown=null,this.chatId=null,this.blocked=!1,this.session=null,this.visitCount=0,this.recentChatId=null,this.autoConnectTimer=null,this.forceDisconnectTimer=null}return c.prototype.initialize=function(){var b;this.chat=a.Chat,this.chatView=a.ChatView,this.widget=a.Widget,this.migrateOldCookies(),this.id=this.getId(),!window.LIVECHAT_SUPPORT&&this.id||this.initizlizeId(),b=this.hasValues(window.FRESHCHAT_VISITORINFO),b?this.setVisitorProperties(window.FRESHCHAT_VISITORINFO):(this.setName(a.Cache.getItem("livechat_vname")),this.setEmail(a.Cache.getItem("livechat_vemail")),this.setPhone(a.Cache.getItem("livechat_vphone")),this.setTextfield(a.Cache.getItem("livechat_vtextfield")),this.setDropdown(a.Cache.getItem("livechat_vdropdown")),this.visitCount=a.Cache.getItem("livechat_vcount")),this.setSession()},c.prototype.initizlizeId=function(){this.setId(this.generateVisitorId())},c.prototype.getId=function(){return this.id||a.Cache.getItem("livechat_vid")},c.prototype.getName=function(){return this.name||a.Cache.getItem("livechat_vname")},c.prototype.getEmail=function(){return this.email||a.Cache.getItem("livechat_vemail")},c.prototype.getPhone=function(){return this.phone||a.Cache.getItem("livechat_vphone")},c.prototype.getTextfield=function(){return this.textfield||a.Cache.getItem("livechat_vtextfield")},c.prototype.getDropdown=function(){var b;return b=a.Cache.getItem("livechat_vdropdown"),b&&"-1"===b&&(b=null),b},c.prototype.getSupportDropdown=function(){var a;return this.widget.preChatFields.dropdown&&(a="active"===SUBSCRIPTION_STATE?this.widget.preChatFields.dropdown.options[1]:this.widget.preChatFields.dropdown.options[0]),a},c.prototype.getVisitCount=function(){return this.visitCount||a.Cache.getItem("livechat_vcount")},c.prototype.getDiconnectedFlag=function(){return a.Cache.getItem("livechat_vdisconnected")},c.prototype.setId=function(b){b&&a.Cache.setItem("livechat_vid",this.id=b)},c.prototype.setName=function(b){b&&a.Cache.setItem("livechat_vname",this.name=b)},c.prototype.setEmail=function(b){var c;c=/^([a-zA-Z0-9_;\&\#\'\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,c.test(b)&&a.Cache.setItem("livechat_vemail",this.email=b)},c.prototype.setPhone=function(b){var c;c=/^[0-9\-\(\)\s+]+$/,b&&c.test(b)&&a.Cache.setItem("livechat_vphone",this.phone=b)},c.prototype.setTextfield=function(b){b?a.Cache.setItem("livechat_vtextfield",this.textfield=b):a.Cache.removeItem("livechat_vtextfield")},c.prototype.setDropdown=function(b){b&&-1!==b&&"-1"!==b?a.Cache.setItem("livechat_vdropdown",this.dropdown=b):a.Cache.removeItem("livechat_vdropdown")},c.prototype.incrementVisitCount=function(){++this.visitCount,a.Cache.setItem("livechat_vcount",""+this.visitCount)},c.prototype.setDisconnectedFlag=function(){return a.Cache.setItem("livechat_vdisconnected",(new Date).toString())},c.prototype.removeDisconnectedFlag=function(){return a.Cache.removeItem("livechat_vdisconnected")},c.prototype.generateVisitorId=function(){return"visitor"+(window.LIVECHAT_SUPPORT&&CURRENT_USER.id&&CURRENT_ACCOUNT.id?CURRENT_ACCOUNT.id+"x"+CURRENT_USER.id:Math.round(Math.random()*(new Date).getTime()))},c.prototype.setVisitorProperties=function(a){var b;a=d.omit(a,["created_at","updated_at"]),a.textfield=a.custom_field1,a.dropdown=a.custom_field2,delete a.custom_field1,delete a.custom_field2;for(b in a)new Function("self","return self.set"+b.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}))(this)(a[b])},c.prototype.hasValues=function(a){var b;return b=a?d.compact(d.values(a)):"",b.length>0},c.prototype.clearDetails=function(){this.id=null,this.name=null,this.email=null,this.phone=null,this.textfield=null,this.dropdown=null,this.visitCount=null,this.chatId=null,this.blocked=!1,this.session=null,a.Cache.removeItem("livechat_vid"),a.Cache.removeItem("livechat_vname"),a.Cache.removeItem("livechat_vemail"),a.Cache.removeItem("livechat_vphone"),a.Cache.removeItem("livechat_vtextfield"),a.Cache.removeItem("livechat_vdropdown"),a.Cache.removeItem("livechat_vcount"),this.initizlizeId()},c.prototype.migrateOldCookies=function(){var b,c,d,e;c={fc_vid:"livechat_vid",fc_vname:"livechat_vname",fc_vmail:"livechat_vemail",fc_vphone:"livechat_vphone",fc_vtextfield:"livechat_vtextfield",fc_vdropdown:"livechat_vdropdown",fc_vcount:"livechat_vcount",fc_agent:"livechat_agent_name"};for(e in c)d=c[e],(b=a.Cookies.getCookie(e))&&a.Cache.setItem(d,b)},c.prototype.setSession=function(){var b;b=a.Cache.getItem("livechat_session"),b?this.session=JSON.parse(b):(this.session={},a.Location.fetch(function(b){return function(c){b.session.location=c,a.Browser.detect(function(c){var d;b.session.browser=c,d={},d.is_tablet=!!navigator.userAgent.match(/(iPad|SCH-I800|xoom|kindle)/i),d.is_phone=!d.is_tablet&&!!navigator.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i),d.is_mobile=d.is_tablet||d.is_phone,b.session.device=d,b.session.locale=b.getLocale(),b.session.visitedPage=encodeURI(window.location.href),b.session.referer=document.referrer,a.Cache.setItem("livechat_session",a.JSON3.stringify(b.session))})}}(this)))},c.prototype.getLocale=function(){var a,b;return b=window.navigator,a=(b.language||b.browserLanguage||b.systemLanguage||b.userLanguage||"").split("-"),2===a.length?{language:a[0].toLowerCase(),country:a[1].toLowerCase()}:a?{language:a[0].toLowerCase(),country:null}:{language:null,country:null}},c.prototype.startAutoConnectTimer=function(){this.autoConnectTimer=setTimeout(function(b){return function(){a.client.connect()}}(),b.TIME.AUTO_CONNECT)},c.prototype.stopAutoConnectTimer=function(){clearTimeout(this.autoConnectTimer),this.autoConnectTimer=null},c.prototype.startForceDisconnectTimer=function(c){this.forceDisconnectTimer=setTimeout(function(c){return function(){c.chat.isActive()?c.startForceDisconnectTimer(b.TIME.CHECK_CHAT):a.client.isConnected()&&(c.stopForceDisconnectTimer(),a.client.primary.pushToVisitorTabs("force disconnect",{force_disconnect:!0}))}}(this),c)},c.prototype.stopForceDisconnectTimer=function(){clearTimeout(this.forceDisconnectTimer),this.forceDisconnectTimer=null},c.prototype.connectionRequest=function(){var b;b=this.chatView.getVisitorDetails(),b.widget_id=this.widget.id,b.recentChatId=this.recentChatId,b.current_session=this.session,b.isReturningVisitor=this.visitCount>0,b.visitorLimitReached=this.widget.visitorLimitReached,a.client.pushToServer("connection request",b)},c.prototype.block=function(b){this.blocked=!0,a.client.primary.pushToVisitorTabs("force disconnect",{force_disconnect:!0})},c.prototype.unblock=function(){this.blocked=!1},c.prototype.isReturnVisitor=function(){var b;return a.client?a.client.primary.isInReturningVisitorChannel():null!=(b=a.Cache.getItem("livechat_vcount"))?b:{true:!1}},c.prototype.resetVisitor=function(){this.stopAutoConnectTimer(),a.Visitor=new c},c}(),a.Visitor=new c}(window.livechat)}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};!function(b){var c,d,e;b.Constants,c=b.jQuery,e=b._,d=function(){function d(){this.name=null,this.id=null,this.name=null,this.show=!1,this.active=!1,this.debug=null,this.nodeUrl=null,this.siteId=null,this.siteUrl=null,this.teamstatus=!1,this.environment=null,this.windowPosition=null,this.windowOffset=null,this.windowColor=null,this.proactiveChat=null,this.proactiveTime=null,this.title=null,this.welcomeMessage=null,this.messageBoxPlaceholder=null,this.waitingMessage=null,this.moreWaitingMessage=null,this.trasferredMessage=null,this.thanksMessage=null,this.loaderMessage=null,this.nonAvailabilityMessage=null,this.nonAvailabilityLinkUrl=null,this.nonAvailabilityCustomLink=null,this.preChatForm=!1,this.preChatMessage=null,this.businessCalendar=null,this.offlineChat=!1,this.offlineChatSettings=null,this.hideWidget=!1,this.assetUrlPrefix=null,this.sessionHash=null,this.preChatFields=null,this.offlineChatFields=null,this.soundEnabled=!0,this.helpdeskName=null,this.visitorLimitReached=!1}return d.prototype.initialize=function(){var a;try{a=c.parseJSON(b.Base64.decode(window.livechat_setting||window.livechatSettings||window.freshchat_setting))}catch(d){return d,void console.log("Error in parsing widget setting")}this.id=a.widget_id,this.name=a.name,this.siteId=a.fc_id,this.siteUrl=a.weburl,this.environment=a.environment,this.debug=a.debug,this.initializeNodeUrl(a.nodeurl)},d.prototype.initializeNodeUrl=function(a){var b,c,d,e;a=a.replace("https://","").replace(":443",""),"development"===this.environment?(this.nodeUrl="http://"+a+":4000",this.photosUrl="http://"+this.siteUrl+":3000"):"staging"===this.environment?(this.nodeUrl="https:"===(null!=(b=window.location)?b.protocol:void 0)?"https://"+a+":443":"http://"+a+":80",this.photosUrl="https:"===(null!=(c=window.location)?c.protocol:void 0)?"https://"+this.siteUrl+":443":"http://"+this.siteUrl+":80"):(this.nodeUrl="http:"===(null!=(d=window.location)?d.protocol:void 0)&&this.isLegacyIEVersion?"http://"+a+":80":"https://"+a+":443",this.photosUrl="http:"===(null!=(e=window.location)?e.protocol:void 0)&&this.isLegacyIEVersion?"http://"+this.siteUrl+":80":"https://"+this.siteUrl+":443")},d.prototype.isLegacyIEVersion=function(){var a,b;return a=navigator.userAgent.toLowerCase(),-1!==a.indexOf("msie")&&(8===(b=parseInt(a.split("msie")[1]))||9===b)},d.prototype.isInBusinessHours=function(){return!this.businessCalendar||b.BusinessHours.isBusinessHour(this.businessCalendar)},d.prototype.updateSettings=function(a,d){var e,f,g;try{e=c.parseJSON(b.Base64.decode(window.livechat_setting||window.livechatSettings||window.freshchat_setting)),g=c.parseJSON(a.widget_preferences)}catch(h){return h,void console.log("Error in parsing the widget livechat_setting")}f=a.defaultMessages,this.id=this.id||a.id||a.widget_id,this.name=this.name||a.name,this.siteId=this.siteId||a.site_id,this.active=a.active||!1,this.teamstatus=d,this.windowColor=g.window_color||f.widget_preferences.window_color,this.windowOffset=g.window_offset||f.widget_preferences.window_offset,this.me=e.me?e.me:"Me",this.proactiveTime=a.proactive_time,this.proactiveChat=a.proactive_chat,this.businessCalendar=a.business_calendar,this.windowPosition=g.window_position||f.widget_preferences.window_position,this.title=g.header||f.widget_preferences.header,this.messageBoxPlaceholder=g.text_place||f.widget_preferences.text_place,this.welcomeMessage=g.welcome_message||f.widget_preferences.welcome_message,this.moreWaitingMessage=g.wait_message||f.widget_preferences.wait_message,this.thanksMessage=g.thank_message||f.widget_preferences.thank_message,this.loaderMessage=f.widget_preferences.loader_message,this.endChatConfirmMessage=g.end_chat_confirm_msg||f.widget_preferences.end_chat_confirm_msg,this.agentNetworkDisconnectMessage=g.agent_network_disconnect_msg||f.widget_preferences.agent_network_disconnect_msg,this.preChatForm=a.prechat_form||!1,this.preChatMessage=a.prechat_message||f.prechat_message,this.sessionHash=a.sessionHash,this.helpdeskName=e.helpdeskname,OneClickCbUtils.setCobrowsingServer(a.cobrowsingSocketServer,a.cobrowsingRailsApp),this.assetUrlPrefix="development"===this.environment?this.nodeUrl:a.cloudfront,b.Sound.initialize(),b.defaultMessages=a.cbDefaultMessages,this.setPreChatFields(a,f.prechat_fields),this.setOfflineSettings(a,f.offline_chat),this.setNonAvailabilitySettings(a,f.non_availability_message),this.trasferredMessage=g.agent_transfer_msg_to_visitor||f.widget_preferences.agent_transfer_msg_to_visitor},d.prototype.setOfflineSettings=function(a,c){var d,e,f,g,h,i,j;a.offline_chat?(this.offlineChatSettings=JSON.parse(a.offline_chat),this.offlineChatSettings=this.setDefaults(this.offlineChatSettings,c)):this.offlineChatSettings=c,this.teamstatus&&this.isInBusinessHours()||("1"===this.offlineChatSettings.show||!this.teamstatus&&this.isInBusinessHours()&&"2"!==this.offlineChatSettings.show||window.LIVECHAT_SUPPORT?(this.offlineChat=!0,this.preChatForm=!1):this.hideWidget=!0),this.offlineChatFields={},j=b.Visitor,g=this.offlineChatSettings.form;for(e in g)h=g[e],"message"===e&&(e="textarea"),d=new b.Field(e,{title:h,show:2}),f="get"+e.charAt(0).toUpperCase()+e.substr(1).toLowerCase(),j[f]&&(i=j[f].call(j)),i&&"null"!==i&&(d.value=i),this.offlineChatFields[e]=d},d.prototype.setPreChatFields=function(a,c){var d,e,f,g,h,i,j;this.preChatFields={},j=b.Visitor,a.prechat_fields?(d=JSON.parse(a.prechat_fields),d=this.setDefaults(d,c)):d=c;for(f in d)h=d[f],e=new b.Field(f,h),g="get"+f.charAt(0).toUpperCase()+f.substr(1).toLowerCase(),j[g]&&(i=j[g].call(j)),i&&"null"!==i&&(e.value=i),this.preChatFields[f]=e},d.prototype.setNonAvailabilitySettings=function(a,b){var d,e,f,g,h,i,j,k;i=a.non_availability_message,d=b.text,j=/#(.*?)#/g,i?(i=c.parseJSON(i),"string"==typeof i.customLink&&(i.customLink=parseInt(i.customLink,10))):i=b,h=i.text?i.text:d,f=h?h.match(j):"",g=i.customLinkUrl,f&&g&&(i.customLink&&!this.offlineChat?(k=-1===g.indexOf("://")?"//"+g:g,e="<a class='ticket_link' target='_blank' href="+k+">"+f[0].substring(1,f[0].length-1)+"</a>",h=h.replace(f[0],e)):h=h.replace(f[0],f[0].substring(1,f[0].length-1))),this.nonAvailabilityMessage=h,this.nonAvailabilityCustomLink=i.customLink,this.nonAvailabilityLinkUrl=i.customLinkUrl},d.prototype.setDefaults=function(b,c){var d,f,g,h,i;d=e.keys(c),i=e.keys(b);for(f in b)if(b.hasOwnProperty(f)){g=b[f];for(h in g)g.hasOwnProperty(h)&&""===g[h]&&(b[f][h]=c[f][h])}return livechat._.each(d,function(d){if(a.call(i,d)<0)return b[d]=c[d]}),b},d.prototype.disableSound=function(){},d.prototype.sitesToSkipAutoConnect=function(){return["da56e9d03c3d40df7ed32873991e62c0","bbac2e6afb1af7a8b571ec40a9a7fddb"]},d.prototype.resetWidget=function(){b.Widget=new d},d}(),b.Widget=new d}(window.livechat)}.call(this),function(){!function(a){var b,c;a.Constants,b=a.jQuery,a._,c=function(){function c(){this.visitor=a.Visitor,this.widget=a.Widget,this.id=null,this.type=null,this.pings=[],this.pingSent=!1,this.missed=!1,this.offline=!1,this.agentId=null,this.agentName=null,this.agentNameCached=null,this.cachedPing=null,this.cachedPingTime=null,this.closed=!1,this.active=!1,this.proactive=!1,this.ongoing=!1,this.agentDisconnected=!1,this.agentNetworkDisconnected=!1,this.messageHistory=[],this.visitorClosedChat=!1}return c.prototype.initialize=function(){this.initializeCachedPing()},c.prototype.initializeCachedPing=function(){var b,c;b=a.Cache.getItem("pingStatus"),this.pings=[];try{b?(b=JSON.parse(b),c=(new Date).getTime()-b.pingCreatedAt,c>=a.Constants.TIME.PING_STORAGE_TIMEOUT+a.Constants.TIME.PING_STORAGE_GRACE_TIME||b.userId!==this.visitor.getId()?(this.removeCachedPing(),b=null):(this.cachedPing=b,this.cachedPing.isProactive&&(this.proactive=this.cachedPing.isProactive),this.pings.push(this.cachedPing),this.cachedPingTime=this.cachedPing.pingCreatedAt)):this.cachedPing=null}catch(d){d,this.cachedPing=null}},c.prototype.pushToCachedPing=function(b,c){this.cachedPing=this.cachedPing||{ping:!0,pingCreatedAt:(new Date).getTime(),userId:this.visitor.getId(),msg:[]},this.visitor.getId()!==this.cachedPing.userId&&(this.cachedPing.userId=this.visitor.getId(),this.cachedPing.pingCreatedAt=(new Date).getTime()),b&&this.cachedPing.msg.push(b),this.cachedPing.isProactive=c,a.Cache.setItem("pingStatus",JSON.stringify(this.cachedPing))},c.prototype.getCachedPing=function(){return this.cachedPing},c.prototype.removeCachedPing=function(){localStorage.removeItem("pingStatus"),this.cachedPing=null},c.prototype.setRecentChatDetails=function(a){var b;(b=a.active||a.ongoing)&&(this.id=a.chatId,this.ongoing=a.ongoing,this.active=a.active,a.agentId&&(this.agentId=a.agentId),a.agentName&&(this.agentName=a.agentName),a.hasOwnProperty("closed")&&(this.closed=a.closed))},c.prototype.getAgentName=function(){return this.agentName||a.Cache.getItem("livechat_agent_name")},c.prototype.setAgentName=function(b,c){b&&(this.agentName=b,a.Cache.setItem("livechat_agent_name",b))},c.prototype.clearAgentName=function(){this.agentName=null,a.Cache.removeItem("livechat_agent_name")},c.prototype.isInActive=function(){return!this.isActive()},c.prototype.isActive=function(){return!this.visitor.blocked&&(this.ongoing||this.active)},c.prototype.fetchTranscript=function(a){var c;c={userId:this.visitor.getId(),siteId:this.widget.siteId,code:"fd",chatId:this.id},b.ajax({type:"GET",url:this.widget.nodeUrl+"/visitors/chatTranscript",data:c,dataType:"json",cache:!1,success:a,error:function(a,b,c){window.console&&console.log&&console.log("error getting visitor transcript",c)}})},c.prototype.sendMessage=function(b){var c,d,e;e=this.visitor.getName()||this.visitor.getId(),c=this.visitor.session?this.visitor.session.location:null,d={id:this.id,msg:b,username:e,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:this.ongoing,widget_id:this.widget.id,widget_name:this.widget.name,location:c,current_session:this.visitor.session,socket:a.client.getAuxiliarySocketId(),actualCreatedAt:(new Date).toUTCString(),dropdown:this.visitor.getDropdown(),visitorLimitReached:this.widget.visitorLimitReached},a.client.pushToServer("my_msg_visitor",d)},c.prototype.addMessageToHistory=function(a){return this.messageHistory.push(a)},c.prototype.isADuplicateMessage=function(a){return livechat._.find(this.messageHistory,function(b){if(b.id===a.id)return!0})},c.prototype.setAgentProfilePicture=function(){b("#lc_chat_header #lc_agent_profile_pic").attr("src",this.widget.photosUrl+"/users/"+this.agentId+"/profile_image")},c.prototype.setAgentCursorPictureCobrowsing=function(){b(".lcb-cursor-img").attr("src",this.widget.photosUrl+"/users/"+this.agentId+"/profile_image")},c.prototype.clearAgentProfilePicture=function(){b("#lc_chat_header #lc_agent_profile_pic").attr("src","")},c.prototype.resetChat=function(){this.removeCachedPing(),a.Chat=new c},c}(),a.Chat=new c}(window.livechat)}.call(this),function(){!function(a){var b;b=function(){function b(){this.widget=a.Widget,this.initialized=!1,this.audioElement=null}return b.prototype.initialize=function(){return this.initialized=!0,this.audioElement=document.createElement("audio"),this.audioElement.src=this.widget.assetUrlPrefix+"/sound/message_alert.mp3"},b.prototype.play=function(b,c){!a.Cookies.getCookie(b)&&this.initialized&&(a.Cookies.setCookie(b,!0,5e3),this.audioElement.play(c))},b.prototype.resetSound=function(){a.Sound=new b},b}(),a.Sound=new b}(window.livechat)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;!function(b){var c;b._,b.jQuery,c=function(c){function d(){this.visitor=b.Visitor,this.widget=b.Widget,this.chat=b.Chat,this.chatView=b.ChatView,this.coBrowseView=b.CoBrowseView,this.namespace="/visitor",this.connection=null}return a(d,c),d.prototype.connect=function(a){var c,d,e;if(this.isConnected())return void(a&&a());this.connection?this.connection.io.connect():(d=this.widget.nodeUrl+this.namespace,c=["siteid="+this.widget.siteId,"s="+this.widget.sessionHash,"c=fd","i="+this.visitor.getId(),"w_id="+this.widget.id,"r="+this.visitor.getVisitCount()].join("&"),!1===window.livechat.cookieTest&&(c=c+"&cookieVisitor="+window.livechat.cookieTest),e={},e.forceNew=!0,e.reconnectionAttempts=window._lc_reconnect_attempt,this.connection=b.io.connect(d+"?"+c,e),this.initializeLogger(),this.bindEvents())},d.prototype.initializeLogger=function(){var a,b;4===this.widget.debug&&(localStorage.debug="socket.io-client:socket",a=this.connection.emit,this.connection.emit=function(b){return function(){console.log(new Date,"***","emit",Array.prototype.slice.call(arguments)),a.apply(b.connection,arguments)}}(this),b=this.connection.onevent,this.connection.onevent=function(a){return function(c){var d;d=c.data||[],console.log(new Date,"***","onevent",d),b.call(a.connection,arguments[0])}}(this))},d.prototype.bindEvents=function(){this.connection.on("connect",function(a){return function(){a.chatView.connect()}
}(this)),this.connection.on("error",function(a){return function(b){4===a.widget.debug&&window.console&&console.log&&console.error("Unable to connect ",b)}}(this)),this.connection.on("disconnect",function(a){return function(b){a.chatView.disableInputContainer(),a.visitor.stopForceDisconnectTimer(),a.chat.id=""}}(this)),this.connection.on("connection accepted",function(a){return function(c){b.client.primary.isConnected()&&a.chatView.disableLoader(),b.client.triggerGloablEvent("visitor-connection-accepted",[c])}}(this)),this.connection.on("join",function(a){return function(b){a.pushToServer("join room",{id:b.roomId}),a.chatView.stopAgentDisconnectTimer()}}(this)),this.connection.on("leave",function(a){return function(b){a.pushToServer("leave room",{id:b.roomId})}}(this))},d.prototype.isConnected=function(){var a;return null!=(a=this.connection)?a.connected:void 0},d.prototype.disconnect=function(){this.connection.io.disconnect()},d.prototype.pushToServer=function(a,b){this.connection.emit(a,b)},d.prototype.getSocketId=function(){return this.connection.io.engine.id},d}(b.EventEmitter),b.SocketConnection=c}(window.livechat)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;!function(c){var d;d=function(d){function e(){this.reset=a(this.reset,this),this.bindCustomEvents=a(this.bindCustomEvents,this),this.sound=c.Sound,this.visitor=c.Visitor,this.widget=c.Widget,this.chat=c.Chat,this.connection=null}return b(e,d),e.prototype.connectToReturnOrOnline=function(){},e.prototype.subscribeConversationChannel=function(){},e.prototype.subscribeChatChannel=function(){},e.prototype.getReturnVisitorChannel=function(){},function(a){},e.prototype.unSubscribeFromChannel=function(){},function(a){},e.prototype.unsubscribeFromAllChannels=function(){},e.prototype.bindCustomEvents=function(){var a;a=this._getEvents(),a["chat-closed"]||this.on("chat-closed",function(a){this.switchChannelsOnChatClose(a.chatId),this.chatView.postChatCloseEvents(a)}),a["visitor-connection-accepted"]||this.on("visitor-connection-accepted",function(a){return a&&this.chat.setRecentChatDetails(a),this.chatView.isChatInProgress(),this.chat.ongoing?(this.chat.removeCachedPing(),this.chat.pings=[],a&&a.visitorClosedChat?this.chat.loadTranscript=!1:this.chat.loadTranscript=!0,this.subscribeChatChannel(this.chat.id),this.subscribeConversationChannel(),this.chatView.postChatConnectedEvents(a)):(this.chatView.enableInputContainer(),this.chatView.sendPingMessages())})},e.prototype.reset=function(){this.sound=c.Sound,this.visitor=c.Visitor,this.widget=c.Widget,this.chat=c.Chat,this.unsubscribeFromAllChannels(),this.disconnect(),this.removeEvent("chat-closed"),this.removeEvent("visitor-connection-accepted")},e}(c.EventEmitter),c.Abstract=d}(window.livechat)}.call(this),function(){!function(a){a.chatEvents={visitor_new_msg:function(b){var c;b.socket&&b.socket!==a.client.getAuxiliarySocketId()&&(b.content=b.msg,this.chatView.addMessage(b),a.MainView.pageActive||this.sound.play("messageAlert",b.id),this.chatView.flashPageTitle(b.name,b.msg)),b.userId!==this.visitor.getId()&&(a.client.pushToServer("msg received",c={id:b.id,chatId:b.chatId,actualReceivedAt:(new Date).toUTCString()}),this.chatView.hideTyping(),this.chatView.addMessageReceivedAt(c.id,c.actualReceivedAt))},typing:function(a){this.visitor.getId()!==a.userId&&this.chatView.showTyping(a)}}}(window.livechat)}.call(this),function(){!function(a){var b;b=a.jQuery,a.visitorEvents={"ping accepted":function(a){var c;this.chat.proactive=!1,this.chatView.reason=null,this.chatView.postChatConnectedEvents(a),b("#lc-close").removeClass("hide"),this.chatView.triggerEvent("fd_lc_ping_accepted"),this.chat.removeCachedPing(),this.subscribeConversationChannel(a.id),this.subscribeChatChannel(a.id),c=b("#lc_chat_layout"),b("#chat-widget").length&&!c.is(":visible")&&c.show()},"chat close":function(b){b.chatId===this.chat.id&&a.client.triggerGloablEvent("chat-closed",[b]),this.chatView.triggerEvent("fd_lc_chat_closed")},"update chat":function(a){a&&a.chatId&&(a.agentName=this.chat.agentNameCached,this.chatView.postChatConnectedEvents(a),this.subscribeConversationChannel(a.chatId),this.subscribeChatChannel(a.chatId))},"ping initiated":function(a){a.clearChatCookie&&(this.chat.active=!1),this.chatView.startWaitingMessageAndTimer()},transfer:function(b){a.client.pushToServer("leave room",{id:this.chat.id}),this.unSubscribeFromChatChannel(this.chat.id),a.client.pushToServer("join room",{id:b.id}),this.subscribeChatChannel(b.id),this.chatView.postChatConnectedEvents(b),this.chatView.showChatTransferredMessage()},"agent connect":function(a){this.chatView.agentConnected(a)},"agents available":function(a){this.chatView.updateWaitingAndNonAvailabilityTimers(a)},"blocked visitor":function(a){this.visitor.block(a)},"unblocked visitor":function(a){this.visitor.unblock(a)},"update details":function(a){this.visitor.setVisitorProperties(a)},"agent network disconnect":function(a){this.chatView.agentNetworkDisconnected(a)},"agent network connect":function(a){this.chatView.agentNetworkConnected(a)},"agent disconnect":function(a){this.chatView.agentDisconnected(a)},"force disconnect":function(b){b.force_disconnect&&a.client.disconnect(),this.chatView.disableInputContainer(),this.visitor.stopForceDisconnectTimer()},"cobrowse start":function(b){a.CoBrowseView.setLocalStorage("CBVisitorReqStartTime",0),this.coBrowseView.cbTimerHandle&&window.clearInterval(a.CoBrowseView.cbTimerHandle),this.coBrowseView.requestCoBrowsingSession(b)},"cobrowse stop":function(a){this.coBrowseView.cobrowsingEnd(a)},"cobrowse request cancelled":function(){this.coBrowseView.coBrowsingRequestCancelled()},"cobrowse control request":function(){this.coBrowseView.coBrowseControlRequest()},"ping received ack":function(a){window&&window.livechat&&window.livechat.printpingack&&console.log("livechat::debug:::ping received ack::",a)}}}(window.livechat)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;!function(c){var d,e,f,g;e=c.Constants,d=c.jQuery,g=c._,f=function(f){function h(b){this.bindEvents=a(this.bindEvents,this),this.appKeys=b,this.chatView=c.ChatView,this.coBrowseView=c.CoBrowseView,this.visitor=c.Visitor,this.client=c.client,h.__super__.constructor.apply(this,arguments)}return b(h,f),h.prototype.connect=function(a){var b,c;this.visitor.removeDisconnectedFlag(),c={authEndpoint:this.widget.nodeUrl+"/visitors/grantPermissions",authTransport:"jsonp",auth:{params:{userId:this.visitor.getId(),siteId:this.widget.siteId}}},4===this.widget.debug&&(Pusher.log=function(a){return console.log("Recevied Message ---\x3e",a)}),console.log("appKeys ===>",this.appKeys),b=this.appKeys,g.isObject(this.appKeys)&&(b=this.appKeys.key,this.appKeys.cluster&&(c.cluster=this.appKeys.cluster)),this.connection=new Pusher(b,c),this.connection.connection.bind("state_change",function(a){return function(b){if(b&&"unavailable"===b.current)return a.visitor.setDisconnectedFlag()}}(this)),this.bindCustomEvents(),this.subscribeToUserChannel(a)},h.prototype.disconnect=function(){this.connection.disconnect()},h.prototype.isConnected=function(){return this.connection&&this.connection.connection&&"connected"===this.connection.connection.state},h.prototype.connectToReturnOrOnline=function(a){if(window.LIVECHAT_SUPPORT)return a&&a();this.chat.id&&!this.chat.closed?this.subscribeConversationChannel(this.chat.id,a):this.visitor.getVisitCount()>0?this.subscribeToChannel(this.getReturnVisitorChannelName(),a):this.subscribeToChannel(this.getOnlineChannelName(),a)},h.prototype.subscribeConversationChannel=function(a,b){this.chat.ongoing=!0,this.subscribeToChannel(this.getConversationChannelName(),b),this.unSubscribeFromChannel(this.getOnlineChannelName()),this.unSubscribeFromChannel(this.getReturnVisitorChannelName())},h.prototype.subscribeToUserChannel=function(a){var b,f;this.visitorPrivateChannel=this.subscribeToChannel(this.getUserChannelName(),function(b){return function(){var f,g,h;return a?(b.connection.connected=!0,c.client.auxiliary.isConnected()&&b.chatView.disableLoader(),a(),void(a=null)):b.visitor.getDiconnectedFlag()?(f="siteId="+b.widget.siteId+"&vid="+b.visitor.getId()+"&c=fd",b.widget.id&&(f=f+"&widget_id="+b.widget.id),h=b.chatView.getVisitorDetails(),b.visitor.getDiconnectedFlag()&&Math.abs(new Date(b.visitor.getDiconnectedFlag())-new Date)>e.TIME.CURRENT_VISITOR_TIME_OUT&&!(b.visitor.getVisitCount()>0)&&(b.visitor.incrementVisitCount(),h.isReturningVisitor=!0,g=!0),b.visitor.removeDisconnectedFlag(),d.ajax({type:"GET",url:b.widget.nodeUrl+"/visitors/getChatDataOnReconnect",data:f,dataType:"json",cache:!1,success:function(a){var d;b.connection.connected=!0,d=a.data,d&&d.closed?b.switchChannelsOnChatClose(d.chatId,function(a){a&&c.client.auxiliary.isConnected()&&setTimeout(function(a){return function(){c.client.pushToServer("change_visitor_type",h)}}(),e.TIME.CHANGE_VISITOR_TIME_OUT)}):d?d&&!d.closed&&g&&c.client.auxiliary.isConnected()&&setTimeout(function(){c.client.pushToServer("change_visitor_type",h)},e.TIME.CHANGE_VISITOR_TIME_OUT):b.connectToChannelOnChatClose(function(a){a&&c.client.auxiliary.isConnected()&&setTimeout(function(a){return function(){c.client.pushToServer("change_visitor_type",h)}}(),e.TIME.CHANGE_VISITOR_TIME_OUT)})},error:function(){window.console&&console.log&&console.log("Error while fetching chat details")}})):void 0}}(this)),this.connectToReturnOrOnline(),f=["connection accepted","join","leave","join chat room"],b=g.chain({}).extend(c.visitorEvents).omit(f).value(),this.bindEvents(b)},h.prototype.subscribeChatChannel=function(a,b){var d,e,f,g,h;if(h=!1,d=this.connection.channel(this.getChatChannelName(a)),d&&d.subscribed||(h=!0),b&&b(h),e=this.subscribeToChannel(this.getChatChannelName(a))){g=c.chatEvents;for(f in g)g[f],e.bind(f,c.chatEvents[f].bind(this))}},h.prototype.unSubscribeFromChatChannel=function(a){this.unSubscribeFromChannel(this.getChatChannelName(a))},h.prototype.unsubscribeFromAllChannels=function(){var a;a=g.pluck(this.connection.channels.channels,"name"),g.each(a,function(a){return function(b){return a.unSubscribeFromChannel(b)}}(this))},h.prototype.subscribeToChannel=function(a,b){var c,d,e;try{return(c=this.connection.channel(a))&&c.subscribed?void(b&&b()):(e=this.connection.subscribe(a),b&&(e.bind("pusher:subscription_succeeded",b),e.bind("pusher:subscription_error",b)),e)}catch(f){d=f,window.console&&console.log&&console.log("Error in while subscribing to channel -> "+a,d)}},h.prototype.unSubscribeFromChannel=function(a){var b,c;try{if((b=this.connection.channel(a))&&b.subscribed)return this.connection.unsubscribe(a)}catch(d){c=d,window.console&&console.log&&console.log("Error in while subscribing to channel -> "+a,c)}},h.prototype.switchChannelsOnChatClose=function(a,b){this.unSubscribeFromChatChannel(a),this.connection.channel(this.getUserChannelName()),this.unSubscribeFromChannel(this.getConversationChannelName()),b&&b(!1)},h.prototype.isInReturningVisitorChannel=function(a){var b,c;return c=!1,b=this.connection.channel(this.getReturnVisitorChannelName()),b&&b.subscribed&&(c=!0),c},h.prototype.connectToChannelOnChatClose=function(a){var b,c;c=this.connection.channel(this.getReturnVisitorChannelName()),b=this.connection.channel(this.getOnlineChannelName()),this.getOnlineChannelName(),this.visitor.getVisitCount()>0?c&&c.subscribed?a&&a(!1):(this.subscribeToChannel(this.getReturnVisitorChannelName()),a&&a(!0),b&&b.subscribed&&this.unSubscribeFromChannel(this.getOnlineChannelName())):b&&b.subscribed?a&&a(!1):(this.subscribeToChannel(this.getOnlineChannelName()),a&&a(!0))},h.prototype.bindEvents=function(a){var b;for(b in a)a[b],this.visitorPrivateChannel.bind(b,a[b].bind(this))},h.prototype.pushToVisitorTabs=function(a,b){this.connection.channel(this.getUserChannelName()).trigger("client-"+a,b),c.visitorEvents[a].call(this,b)},h.prototype.getReturnVisitorChannel=function(){return pusherInstance.channel(this.getReturnVisitorChannelName())},h.prototype.getReturnVisitorChannelName=function(){return"private-visitors-"+this.widget.siteId+"-return-"+this.visitor.getId()},h.prototype.getConversationChannelName=function(){return"private-visitors-"+this.widget.siteId+"-conversation-"+this.visitor.getId()},h.prototype.getOnlineChannelName=function(){return"private-visitors-"+this.widget.siteId+"-online-"+this.visitor.getId()},h.prototype.getUserChannelName=function(){return"private-"+this.widget.siteId+"-"+this.visitor.getId()},h.prototype.getChatChannelName=function(a){return"presence-chat-"+this.widget.siteId+"-"+a},h}(c.Abstract),c.PusherConnection=f}(window.livechat)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty,d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};!function(c){var e,f,g,h;f=c.Constants,e=c.jQuery,h=c._,g=function(g){function i(b){this.receiveMessage=a(this.receiveMessage,this),this.unSubscribeFromChatChannel=a(this.unSubscribeFromChatChannel,this),this.disconnect=a(this.disconnect,this),this.bindEvents=a(this.bindEvents,this),this.appKeys=b,this.chatView=c.ChatView,this.coBrowseView=c.CoBrowseView,this.visitor=c.Visitor,this.client=c.client,i.__super__.constructor.apply(this,arguments)}return b(i,g),i.prototype.connect=function(a){var b,c;c=this.widget.siteId+":"+this.visitor.getId(),b={siteId:this.widget.siteId,authKey:c},e.ajax({type:"GET",url:this.widget.nodeUrl+"/visitors/grantPermissions",data:b,dataType:"jsonp",crossDomain:!0,jsonpCallback:"jsonpCallback",cache:!1,context:this,success:function(b){return function(d){"success"===(null!=d?d.status:void 0)&&(b.connection=PUBNUBVisitor.init({publish_key:b.appKeys.publish_key,subscribe_key:b.appKeys.subscribe_key,uuid:c,auth_key:c,instance_id:!0,ssl:!0}),b.bindCustomEvents(),b.subscribeToChatChannelGroup(function(){b.subscribeToUserChannel(a)}))}}(this),error:function(a){return function(){window.console&&console.log&&console.log("error in granting pubnub permissions")}}()})},i.prototype.subscribeToChatChannelGroup=function(a){this.connection.channel_group_add_channel({callback:function(b){return function(){b.connection.subscribe({channel_group:b.getChatsGroupName(),message:b.receiveMessage,connect:function(){b.connection.channel_group_remove_channel({channel_group:b.getChatsGroupName(),channel:"dummy",callback:function(){}}),b.bindEvents(c.chatEvents),a&&a()}})}}(this),error:function(a){return function(a){window.console&&console.log&&console.log("Error creating group ",a)}}(),channel:"dummy",channel_group:this.getChatsGroupName()})},i.prototype.bindEvents=function(a){var b;for(b in a)a[b],this.connection.events.list[b]||this.connection.events.bind(b,a[b].bind(this))},i.prototype.subscribeToUserChannel=function(a){this.connection.subscribe({channel:this.getUserChannelName(),heartbeat:60,callback:this.receiveMessage,connect:this.onUserChannelSubscriptionSuccess(function(b){return function(){if(window.LIVECHAT_SUPPORT)return a&&a();b.connectToReturnOrOnline(a)}}(this)),disconnect:function(a){return function(){a.connection.connected=!1,a.visitor.setDisconnectedFlag()}}(this),reconnect:function(a){return function(){var b,d,g;b="siteId="+a.widget.siteId+"&vid="+a.visitor.getId()+"&c=fd",a.widget.id&&(b=b+"&widget_id="+a.widget.id),g=a.chatView.getVisitorDetails(),Math.abs(new Date(a.visitor.getDiconnectedFlag())-new Date)>f.TIME.CURRENT_VISITOR_TIME_OUT&&!(a.visitor.getVisitCount()>0)&&(a.visitor.incrementVisitCount(),g.isReturningVisitor=!0,d=!0),e.ajax({type:"GET",url:a.widget.nodeUrl+"/visitors/getChatDataOnReconnect",data:b,dataType:"json",cache:!1,success:function(b){var e;a.connection.connected=!0,e=b.data,e&&e.closed?a.switchChannelsOnChatClose(e.chatId,function(a){a&&c.client.auxiliary.isConnected()&&setTimeout(function(a){return function(){c.client.pushToServer("change_visitor_type",g)}}(),f.TIME.CHANGE_VISITOR_TIME_OUT)}):e?e&&!e.closed&&d&&c.client.auxiliary.isConnected()&&setTimeout(function(){c.client.pushToServer("change_visitor_type",g)},f.TIME.CHANGE_VISITOR_TIME_OUT):a.connectToChannelOnChatClose(function(a){a&&c.client.auxiliary.isConnected()&&setTimeout(function(a){return function(){c.client.pushToServer("change_visitor_type",g)}}(),f.TIME.CHANGE_VISITOR_TIME_OUT)})},error:function(){window.console&&console.log&&console.log("Error while fetching chat details")}})}}(this),error:function(a){return function(a){window.console&&console.log&&console.log("error subscribe channel user id",a)}}()})},i.prototype.onUserChannelSubscriptionSuccess=function(a){var b,d;c.client.auxiliary.isConnected()&&this.chatView.disableLoader(),this.connection.connected=!0,d=["connection accepted","join","leave","join chat room"],b=h.chain({}).extend(c.visitorEvents).omit(d).value(),this.bindEvents(b),a&&a()},i.prototype.disconnect=function(){this.connection.unsubscribe({channel:this.connection.get_subscribed_channels(),channel_group:this.getChatsGroupName()}),this.connection.connected=!1},i.prototype.isConnected=function(){var a;return null!=(a=this.connection)?a.connected:void 0},i.prototype.connectToReturnOrOnline=function(a){this.chat.id&&!this.chat.closed?this.subscribeConversationChannel(this.chat.id,a):this.visitor.getVisitCount()>0?this.subscribeToChannel(this.getReturnVisitorChannelName(),a):this.subscribeToChannel(this.getOnlineChannelName(),a)},i.prototype.connectToChannelOnChatClose=function(a){var b,c,e;if(window.LIVECHAT_SUPPORT)return a&&a(!1);e=this.connection.get_subscribed_channels(),b=this.getOnlineChannelName(),this.visitor.getVisitCount()>0?(c=this.getReturnVisitorChannelName(),d.call(e,c)<0?(this.subscribeToChannel(this.getReturnVisitorChannelName(),function(){return a&&a(!0)}),d.call(e,b)>=0&&this.unSubscribeFromChannel(this.getOnlineChannelName())):a&&a(!1)):d.call(e,b)<0?this.subscribeToChannel(this.getOnlineChannelName(),function(){return a&&a(!0)}):a&&a(!1)},i.prototype.subscribeConversationChannel=function(a,b){var c,e,f,g;this.chat.ongoing=!0,g=this.connection.get_subscribed_channels(),c=this.getConversationChannelName(),d.call(g,c)>=0?b&&b():this.connection.subscribe({channel:this.getConversationChannelName(),state:{chatId:a},heartbeat:60,connect:function(){b&&b()},callback:this.receiveMessage,error:function(a){window.console&&console.log&&console.log("error subscribe channel user id",a),b&&b()}}),e=this.getOnlineChannelName(),d.call(g,e)>=0&&this.unSubscribeFromChannel(this.getOnlineChannelName()),f=this.getReturnVisitorChannelName(),d.call(g,f)>=0&&this.unSubscribeFromChannel(this.getReturnVisitorChannelName())},i.prototype.subscribeChatChannel=function(a){this.connection.channel_group_list_channels({channel_group:this.getChatsGroupName(),callback:function(b){return function(c){var e;e=b.getChatChannelName(a),d.call(c.channels,e)<0?b.connection.channel_group_remove_channel({channel_group:b.getChatsGroupName(),channels:c.channels,callback:function(){return b.connection.state({channel:b.getConversationChannelName(),state:{chatId:a}}),b.connection.channel_group_add_channel({channel_group:b.getChatsGroupName(),channel:e})}}):console.log("The chat channel("+e+") is already present in the channel group(@getChatsGroupName()) - ",c)}}(this),error:function(b){return function(c){console.log("Error while getching the channel group list of channels ",c),b.connection.channel_group_add_channel({channel_group:b.getChatsGroupName(),channel:b.getChatChannelName(a)})}}(this)})},i.prototype.unSubscribeFromChatChannel=function(a){this.connection.channel_group_remove_channel({channel_group:this.getChatsGroupName(),channel:this.getChatChannelName(a),callback:function(){}})},i.prototype.unsubscribeFromAllChannels=function(){this.connection.unsubscribe({channel:[this.getConversationChannelName(),this.getReturnVisitorChannelName(),this.getOnlineChannelName(),this.getUserChannelName()]})},i.prototype.receiveMessage=function(a,b,c){4===this.widget.debug&&console.log("Received message ---\x3e ",a,b,c),this.connection.events.fire(a.type,a.data)},i.prototype.subscribeToChannel=function(a,b){var c,e;try{e=this.connection.get_subscribed_channels(),d.call(e,a)>=0?b&&b():this.connection.subscribe({channel:a,callback:this.receiveMessage,heartbeat:60,connect:function(){b&&b()},error:function(a){window.console&&console.log&&console.log("error subscribe channel user id",a),b&&b()}})}catch(f){c=f,window.console&&console.log&&console.log("Error in while subscribing to channel -> "+a,c)}},i.prototype.unSubscribeFromChannel=function(a){var b;try{this.connection.unsubscribe({channel:a})}catch(c){b=c,window.console&&console.log&&console.log("Error in while subscribing to channel -> "+a,b)}},i.prototype.isInReturningVisitorChannel=function(a){var b;b=!1,this.connection.where_now({uuid:this.widget.siteId+":"+this.visitor.getId(),callback:function(a){return function(c){var e;return e=a.getReturnVisitorChannelName(),d.call(c,e)>=0&&(b=!0),b}}(this),error:function(a){return function(a){return b}}()})},i.prototype.switchChannelsOnChatClose=function(a,b){var c;this.unSubscribeFromChatChannel(a),c=this.getConversationChannelName(),d.call(this.connection.get_subscribed_channels(),c)>=0&&this.unSubscribeFromChannel(this.getConversationChannelName()),b&&b(!1)},i.prototype.pushToVisitorTabs=function(a,b){return this.connection.publish({channel:this.getUserChannelName(),message:{type:a,data:b}})},i.prototype.getReturnVisitorChannelName=function(){return this.widget.siteId+".presence:return"},i.prototype.getConversationChannelName=function(){return this.widget.siteId+".presence:conversation"},i.prototype.getOnlineChannelName=function(){return this.widget.siteId+".presence:online"},i.prototype.getUserChannelName=function(){return this.widget.siteId+"."+this.visitor.getId()+".private"},i.prototype.getChatChannelName=function(a){return this.widget.siteId+"."+a+".chat"},i.prototype.getChatsGroupName=function(){return this.widget.siteId+":"+this.visitor.getId()+".chat"},i}(c.Abstract),c.PubNubConnection=g}(window.livechat)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;!function(c){var d,e;c.Constants,c.jQuery,e=c._,d=function(d){function f(b,d,e){switch(this.connectAuxiliaryClient=a(this.connectAuxiliaryClient,this),this.connectPrimaryClient=a(this.connectPrimaryClient,this),this.connect=a(this.connect,this),this.visitor=c.Visitor,this.widget=c.Widget,this.chat=c.Chat,this.chatView=c.ChatView,this.coBrowseView=c.CoBrowseView,this.appKeys=e,b){case"pubnub":this.primary=new c.PubNubConnection(this.appKeys);break;case"pusher":this.primary=new c.PusherConnection(this.appKeys)}switch(d){case"socket":this.auxiliary=new c.SocketConnection}}return b(f,d),f.prototype.connect=function(a){this.chatView.enableLoader(),this.bindGlobalListener(),this.isPrimaryClientConnected()?this.connectAuxiliaryClient():this.connectPrimaryClient(this.connectAuxiliaryClient)},f.prototype.pushToServer=function(a,b){this.auxiliary.pushToServer(a,b)},f.prototype.isConnected=function(){return this.primary.isConnected()&&this.auxiliary.isConnected()},f.prototype.connectPrimaryClient=function(a){this.primary.connect(a)},f.prototype.connectAuxiliaryClient=function(a){this.auxiliary.connect(a)},f.prototype.isPrimaryClientConnected=function(){return this.primary.isConnected()},f.prototype.isAuxiliaryClientConnected=function(){return this.auxiliary.isConnected()},f.prototype.disconnect=function(){this.disconnectPrimaryClient(),this.disconnectAuxiliaryClient()},f.prototype.disconnectPrimaryClient=function(){this.primary.disconnect()},f.prototype.disconnectAuxiliaryClient=function(){this.auxiliary.disconnect()},f.prototype.getAuxiliarySocketId=function(){return this.auxiliary.getSocketId()},f.prototype.bindGlobalListener=function(){this.addGlobalListener(function(a){return function(){var b,c;b=arguments[0],c=e.rest(arguments),a.primary.trigger(b,c),a.auxiliary.trigger(b,c)}}(this))},f}(c.EventEmitter),c._Client=d}(window.livechat)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};!function(b){var c,d,e,f;d=b.Constants,c=b.jQuery,f=b._,e=function(){function e(){this.showTyping=a(this.showTyping,this),this.triggerTyping=a(this.triggerTyping,this),this.postChatConnectedEvents=a(this.postChatConnectedEvents,this),this.visitor=b.Visitor,this.widget=b.Widget,this.chat=b.Chat,this.pageTitle=document.title,this.titleTimer=null,this.chatExpireTimer=null,this.reason=null,this.close="#lc-close",this.endChatPopUp=".lc-end-chat",this.forceMinimized=!1}return e.prototype.initialize=function(){this.isMobileBrowser=b.MainView.isMobileBrowser},e.prototype.connect=function(){this.enableInputContainer(),this.visitor.stopAutoConnectTimer(),this.visitor.startForceDisconnectTimer(d.TIME.FORCE_DISCONNECT),this.visitor.connectionRequest(),this.enableClose()},e.prototype.postChatConnectedEvents=function(a){this.chat.id=a.chatId||a.id,this.chat.agentId=a.agentId,this.chat.agentNetworkDisconnected=!1,this.chat.agentDisconnected=!1,this.chat.closed=!1,a.agentName&&this.setAgentName(a.agentName),this.chatExpireTimerOff(),this.stopMoreWaitingTimer(),this.stopNonAvailabilityTimer(),b.OfflineView.stopOfflineSubmitTimer(),this.chat.setAgentProfilePicture(),(this.widget.offlineChat&&!b.OfflineView.messageSent||this.widget.preChatForm)&&(this.widget.offlineChat=!1,c("#lc_chat_layout").addClass("lc-chat").removeClass("lc-prechat lc-offline"),c("#lc_chat_title").html(this.getTitle())),c("#lc-close").removeClass("hide"),a.visitorClosedChat?this.disableClose():this.enableClose(),this.chat.loadTranscript&&(this.chat.loadTranscript=!1,this.disableInputContainer(),this.chat.fetchTranscript(function(b){return function(c){(null!=c?c.data:void 0)&&b.updateTranscript(c.data,a.closed),b.enableInputContainer(),b.sendPingMessages()}}(this)))},e.prototype.updateTranscript=function(a,d){var e,g,h,i,j,k,l;if(h=c("#lc_chat_message_window"),j=h.find("p"),j.length>0&&j.remove(),i=a.history,l=f(i).sortBy(function(a){return+new Date(a.createdAt)}),!(l.length<0)){for(d&&this.isMaximized()||this.isMobileBrowser?this.collapse():!d&&this.isMinimized()&&this.expand(!1),this.clearNotifications(),e=0,g=l.length;e<g;e++)k=l[e],k.content=k.msg,h.append(f.template(b.templates.message,{message:this.prepareMessage(k)}));h.scrollTop(h.get(0).scrollHeight)}},e.prototype.sendPingMessages=function(){var a,b,d,e;e=this.chat.pings,a=!1,e.length>0&&(d={},b=c.map(e,function(b){if(b.fromMsg&&(a=!0,delete b.fromMsg),(null!=b?b.pingCreatedAt:void 0)&&(d.pingCreatedAt=b.pingCreatedAt),null!=b?b.msg:void 0)return b.msg}).join("\n"),b=b.replace(/^(\r?\n|\r)/g,""),b.length>0&&(d.msg=b),this.chat.pings=[],this.sendMessageOrPing(d,!a))},e.prototype.sendMessageOrPing=function(a,c){b.client.isConnected()?(this.chat.visitorClosedChat&&(a.visitorClosedChat=!0,a.agentId=this.chat.agentId),this.chat.isActive()&&!c?(this.chat.sendMessage(a.msg),this.addMessage({name:this.widget.me,content:a.msg})):(c?this.sendPing(a,c):this.sendPing(a),a.msg&&this.addMessage({name:this.widget.me,content:a.msg})),this.chat.visitorClosedChat=!1):(a.fromMsg=!0,this.chat.pings.push(a),b.client.connect())},e.prototype.sendPing=function(a,c){var d,e;this.chat.pingSent=!0,this.startWaitingMessageAndTimer(),this.startNonAvailabilityTimer(),d=this.getVisitorDetails(),this.chat.pushToCachedPing(!c||d.isProactive?a.msg:null,d.isProactive),d.msg=a.msg,d.detailsFromPreChatForm=null!=(e=a.detailsFromPreChatForm)&&e,d.visitorLimitReached=this.widget.visitorLimitReached,b.client.pushToServer("visitor ping",d)},e.prototype.showWelcomeMessage=function(){c("#lc_chat_message_window .lc_welcome_message").length>0||c("#lc_chat_message_window .lc-msg-block").length>0||this.addDefaultMessage(this.widget.welcomeMessage,"welcome")},e.prototype.getVisitorDetails=function(){var a,b,c,d,e;return e=this.visitor.getName()||this.visitor.getId(),c=null!=(d=this.visitor.session)?d.location:void 0,window.LIVECHAT_SUPPORT?(a=this.visitor.getSupportDropdown(),b=!0):a=this.visitor.getDropdown(),a&&(a=this.escapeSpecialCharacters(a)),{name:e,email:this.visitor.getEmail(),phone:this.visitor.getPhone(),textfield:this.visitor.getTextfield(),dropdown:a,widget_name:this.widget.name,isProactive:this.chat.proactive,location:c,returnVisitor:this.visitor.isReturnVisitor(),title:document.title,appSupport:b}},e.prototype.escapeSpecialCharacters=function(a){return(a||"").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;")},e.prototype.addMessageReceivedAt=function(a,b){c("#"+a).attr("actualReceivedAt",b)},e.prototype.addMessage=function(a,d){var e;c(this.endChatPopUp).hasClass("hide")||(c(this.endChatPopUp).addClass("hide"),c(this.close).removeAttr("disabled",!0),c(this.close).css("pointer-events","auto")),a.id&&this.chat.isADuplicateMessage(a)||(this.chat.addMessageToHistory(a),this.clearNotifications(),d||(a.content=b.MainView.escapeHtml(a.content)),a=this.prepareMessage(a),e=c("#lc_chat_message_window"),"lc-guest"===a.class&&b.isMobileBrowser&&c("#lc_chat_input_container").blur(),e.append(f.template(b.templates.message,{message:a})),this.agentDisconnectTimer&&this.showAgentDisconnectMessage(this.widget.agentNetworkDisconnectMessage),e.scrollTop(e.get(0).scrollHeight))},e.prototype.addDefaultMessage=function(a,b){var c,d;c="lc-guest",d=!1,"welcome"===b&&(c+=" lc_welcome_message"),"non availability"===b&&(d=!0),this.addMessage({content:a,class:c,createdAt:new Date},d)},e.prototype.addNotification=function(a,d){var e,g;this.clearNotifications(),g={content:a,class:d?"lc-notification-message lc-nm-active":"lc-notification-message",id:"lc_notification_message"},e=c("#lc_chat_message_window"),e.append(f.template(b.templates.notification,{notification:g})),e.scrollTop(e.get(0).scrollHeight)},e.prototype.clearNotifications=function(){c("#lc_chat_message_window").find("#lc_notification_message").remove()},e.prototype.addPresistNotification=function(a){var d,e;this.clearNotifications(),e={content:a,class:"lc-notification-message",id:"lc_presist_message"},d=c("#lc_chat_message_window"),d.append(f.template(b.templates.notification,{notification:e})),d.scrollTop(d.get(0).scrollHeight)},e.prototype.prepareMessage=function(a){return a.time=b.DateFormatter.format(new Date(a.createdAt||new Date),"hh:MM TT"),a.class||(a.class=a.userId&&0!==a.userId.search("visitor")?"lc-guest":"lc-self"),"typing"!==a.type&&(a.content=b.Autolinker.link(a.content.replace(/\n/g,"<br>"))),a},e.prototype.startWaitingMessageAndTimer=function(){var a;this.moreWaitingTimer||(a=d.TIME.WAIT_MESSAGE,this.chat.cachedPingTime&&(a-=(new Date).getTime()-this.chat.cachedPingTime,a=a<0?0:a),this.startMoreWaitingTimer(a))},e.prototype.startMoreWaitingTimer=function(a){this.moreWaitingTimer||this.widget.moreWaitingMessage&&(this.moreWaitingTimer=setTimeout(function(a){return function(){a.addDefaultMessage(a.widget.moreWaitingMessage)}}(this),a))},e.prototype.stopMoreWaitingTimer=function(){clearTimeout(this.moreWaitingTimer),this.moreWaitingTimer=null},e.prototype.startNonAvailabilityTimer=function(){var a,b,c;this.nonAvailabilityTimer||(a=d.TIME.NON_AVAILABILITY,this.chat.cachedPingTime&&(c=(new Date).getTime()-this.chat.cachedPingTime,b=(new Date).getTime()-this.chat.cachedPingTime,a-=b,c<0&&(a+=c),a<0&&(a=0)),
this.nonAvailabilityTimer=setTimeout(this.showNonAvailabilityMessage.bind(this),a))},e.prototype.showNonAvailabilityMessage=function(){this.chat.missed=!0,this.widget.nonAvailabilityCustomLink?(this.disableInputContainer(),this.addDefaultMessage(this.widget.nonAvailabilityMessage,"non availability"),this.setTitle(this.widget.offlineChatSettings.messages.title),b.OfflineView.sendOfflineChatEvent(null,!1),this.chat.removeCachedPing()):b.OfflineView.render(!0)},e.prototype.stopNonAvailabilityTimer=function(){clearTimeout(this.nonAvailabilityTimer),this.nonAvailabilityTimer=null},e.prototype.updateWaitingAndNonAvailabilityTimers=function(a){a.status||("unavailable in groups"===a.reason||"agents unavailable"===a.reason?(this.reason="agents_unavailable",this.stopNonAvailabilityTimer(),this.showNonAvailabilityMessage(),this.chat.missed=!1):"Chat limit reached for agents in routed groups"!==a.reason&&"Chat limit reached for all agents"!==a.reason||"agents_limit_reached"!==this.reason&&(this.reason="agents_limit_reached",this.stopMoreWaitingTimer(),this.startMoreWaitingTimer(0)))},e.prototype.disableClose=function(){if(!window.LIVECHAT_SUPPORT)return c(".lc-close").attr("disabled",!0),c(".lc-close").css("pointer-events","none")},e.prototype.enableClose=function(){return c("#lc-close").removeAttr("disabled"),c("#lc-close").css("pointer-events","auto")},e.prototype.showChatClose=function(){return c("#lc-close").removeClass("hide"),this.enableClose()},e.prototype.enableInputContainer=function(){c("#lc_chat_input_container").prop("disabled",!1)},e.prototype.disableInputContainer=function(){c("#lc_chat_input_container").prop("disabled",!0)},e.prototype.enableLoader=function(){this.disableInputContainer(),c("#lc_chat_message_window p").hide(),c(".overlay-bg").show()},e.prototype.disableLoader=function(){this.enableInputContainer(),c("#lc_chat_message_window p").show(),c(".overlay-bg").hide()},e.prototype.isMinimized=function(){return c("#lc_chat_layout").hasClass("lc-collapsed")},e.prototype.isMaximized=function(){return c("#lc_chat_layout").hasClass("lc-expanded")},e.prototype.getTitle=function(){var a,c;return c=this.chat.active&&!this.chat.closed?this.chat.getAgentName():this.widget.title,this.widget.offlineChat&&(a=this.widget.offlineChatSettings.messages,c=b.OfflineView.messageSent?a.thank_header:a.title),c},e.prototype.setTitle=function(a){var b,d;d=c("#lc_chat_layout").find("#lc_chat_title"),b=a||this.getTitle(),d.html(b)},e.prototype.setAgentName=function(a){this.chat.setAgentName(a),this.setTitle()},e.prototype.clearAgentName=function(){this.chat.clearAgentName(),this.setTitle()},e.prototype.triggerTyping=function(){this.triggerTypingTimer||(b.client.pushToServer("typing",{id:this.chat.id,userId:this.visitor.getId()}),this.triggerTypingTimer=setTimeout(function(a){return function(){a.triggerTypingTimer=null}}(this),d.TIME.TYPING))},e.prototype.showTyping=function(a){var b;b={createAt:new Date,photo:a.photo,name:a.name,type:"typing",class:"lc-guest"},c(this.endChatPopUp).hasClass("hide")||(c(this.endChatPopUp).addClass("hide"),c(this.close).removeAttr("disabled",!0),c(this.close).css("pointer-events","auto")),0===c(".lc-typing-dots").length&&(this.addMessage(b),this.typingTimer=setTimeout(function(a){return function(){a.hideTyping()}}(this),d.TIME.TYPING))},e.prototype.hideTyping=function(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null),c("#lc_chat_message_window .lc-typing-dots").closest("p").remove()},e.prototype.agentConnected=function(a){this.setAgentName(a.agentName),c("#lc_chat_header").removeClass("lc-inactive"),this.clearNotifications(),this.agentDisconnectTimer&&this.stopAgentDisconnectTimer(),this.stopAgentNetworkDisconnectTimer()},e.prototype.agentDisconnected=function(a){this.showAgentDisconnectMessage(this.widget.agentNetworkDisconnectMessage),c("#lc_chat_header").addClass("lc-inactive"),this.agentDisconnectTimer||(this.agentDisconnectTimer=setTimeout(function(a){return function(){a.chat.agentDisconnected=!0,a.agentDisconnectTimer=null}}(this),d.TIME.AGENT_LEFT))},e.prototype.agentNetworkDisconnected=function(a){this.showAgentDisconnectMessage(this.widget.agentNetworkDisconnectMessage),this.stopAgentDisconnectTimer(),this.stopAgentNetworkDisconnectTimer(),c("#lc_chat_header").addClass("lc-inactive"),this.agentNetworkDisconnectTimer||(this.agentNetworkDisconnectTimer=setTimeout(function(b){return function(){a.agentId=b.chat.agentId,b.chat.agentNetworkDisconnected=!0}}(this),d.TIME.AGENT_NETWORK_DISCONNECT))},e.prototype.stopAgentDisconnectTimer=function(){this.agentDisconnectTimer&&(clearTimeout(this.agentDisconnectTimer),this.agentDisconnectTimer=null,this.chat.agentDisconnected=!1)},e.prototype.stopAgentNetworkDisconnectTimer=function(){this.agentNetworkDisconnectTimer&&(clearTimeout(this.agentNetworkDisconnectTimer),this.agentNetworkDisconnectTimer=null)},e.prototype.agentNetworkConnected=function(a){c("#lc_chat_header").removeClass("lc-inactive"),c("#lc_agent_left_msg").remove(),this.stopAgentNetworkDisconnectTimer()},e.prototype.chatExpireTimerOn=function(a,b){var c;this.chatExpireTimer||(c=a&&a>=0?a:d.TIME.CHAT_EXPIRE,this.chatExpireTimer=setTimeout(function(a){return function(){a.chat.id=null,a.chat.active=!1,a.chat.agentNameCached=null,a.clearAgentName()}}(this),c))},e.prototype.chatExpireTimerOff=function(){clearTimeout(this.chatExpireTimer),this.chatExpireTimer=null,this.chat.active=!0,this.chat.agentNameCached=null},e.prototype.closeSupport=function(){return this.widget.offlineChat&&(this.widget.offlineChat=!1),b.CoBrowseView.setLocalStorage("livechat_support","false"),c("#lc_cb_actions_vi").remove(),c("#lc_chat_layout").remove()},e.prototype.closeChat=function(a){var c;this.chat.ongoing&&(this.chat.isInActive()?(c={type:"visitor",userId:a.agentId,siteId:this.widget.siteId,chatId:a.chatId,visitorId:this.visitor.getId(),fromVisitor:!0,closed:!0,url:this.widget.siteUrl,closeByVistior:!0},b.client.pushToServer("visitor endchat",c)):a.closeByVistior&&(c=a,c.closed=!0,b.client.pushToServer("visitor endchat",c))),window.LIVECHAT_SUPPORT&&(this.closeSupport(),b.client&&b.client.primary&&b.client.primary.pushToVisitorTabs("force disconnect",{force_disconnect:!0}),this.visitor.resetVisitor(),this.widget.resetWidget(),this.chat.resetChat(),b.Sound.resetSound(),b.ChatView.resetChatView(),b.OfflineView.resetOfflineView(),b.CoBrowseView.resetCoBrowseView(),b.MainView.resetMainView())},e.prototype.postChatCloseEvents=function(a){var b;b=null,this.chat.ongoing=!1,this.chat.closed=!0,a.emptyChat&&(b=0),this.chat.agentNameCached=this.chat.getAgentName(),this.chatExpireTimerOn(b),this.chat.agentNetworkDisconnected?(this.chat.id="",this.showAgentLeftMessage(this.widget.agentDisconnectedMessage,a.CbActive),this.disableClose()):this.chat.agentDisconnected?this.disableClose():a.visitorClosedChat||a.isClosedByVisitor||(this.widget.thanksMessage&&this.addDefaultMessage(this.widget.thanksMessage),this.disableClose()),a.visitorClosedChat&&(c(".lc-end-chat").addClass("hide"),c("#lc_chat_message_window").empty(),this.disableClose(),this.collapse(),this.chat.visitorClosedChat=!0),this.setTitle(),this.chat.clearAgentProfilePicture()},e.prototype.showAgentLeftMessage=function(a,b){var c,d;c=a||this.widget.agentLeftMessage,b?this.addNotification(livechat.defaultMessages.cobrowsing_stop_msg):c&&(d=this.chat.getAgentName(),c=c.replace("{{agent_name}}",d).replace("$",d),c=c.replace("{{helpdesk_name}}",this.widget.helpdeskName||""),this.addNotification(c))},e.prototype.showAgentDisconnectMessage=function(a){var b;return b=this.chat.getAgentName(),a=a.replace(/{{agent_name}}/g,b).replace("$",b),a=a.replace(/{{helpdesk_name}}/g,this.widget.helpdeskName||""),c("#lc_agent_profile_pic,#lc_chat_title").addClass("inactive"),this.addNotification(a,!0)},e.prototype.showChatTransferredMessage=function(){var a,b;(a=this.widget.trasferredMessage)&&(b=this.chat.getAgentName(),a=a.replace("{{agent_name}}",b).replace("$",b),a=a.replace("{{helpdesk_name}}",this.widget.helpdeskName||""),this.addPresistNotification(a))},e.prototype.expand=function(a){var d,e,f,g,h;g=c("#lc_chat_layout"),e=c("#lc_chat_container"),f=c("#lc_chat_header"),a&&!window.LIVECHAT_SUPPORT?(d="lc-expanded lc-prechat",h="lc-collapsed lc-alert lc-chat lc-offline",g.find("#lc_prechat_form").length||(b.MainView.renderPreChatForm(),b.MainView.registerPreChatFormDOMEvents(),b.MainView.registerCoBrowseDOMEvents()),c("#lc-close").addClass("hide")):this.widget.offlineChat?(d="lc-expanded lc-offline",h="lc-collapsed lc-alert lc-prechat lc-chat",c("#lc-close").addClass("hide")):(d="lc-expanded lc-chat",h="lc-collapsed lc-alert lc-prechat lc-offline"),this.isChatInProgress(),g.removeClass(h).addClass(d),this.isMobileBrowser||this.isSmallWindow()||g.css("height",e.outerHeight()+f.outerHeight()+"px"),this.setTitle(),this.chat.cachedPing||this.widget.offlineChat||this.showWelcomeMessage(),c(":focus").is("input")||b.isMobileBrowser||this.setInputElementFocus(),window.LIVECHAT_SUPPORT&&this.showChatClose()},e.prototype.collapse=function(){var a,b;b=c("#lc_chat_layout"),a=c("#lc_chat_header"),b.removeClass("lc-expanded "+this.blinkStyle()).addClass("lc-collapsed"),this.isChatInProgress(),this.isMobileBrowser||this.isSmallWindow()||b.css("height",a.outerHeight()+"px"),this.setTitle()},e.prototype.blinkStyle=function(){return this.isMobileBrowser?"lc-alert-mobile":"lc-alert"},e.prototype.setInputElementFocus=function(){var a,b;b=c("#lc_chat_"+(this.offline?"name":"offline_name")),a=b.length?b.attr("id"):"lc_chat_input_container",setTimeout(function(b){return function(){c("#"+a).focus()}}(),600)},e.prototype.flashPageTitle=function(a,b){var d;d=a+": "+b,this.cancelFlashTitleTimer(),this.titleTimer=setInterval(function(a){return function(){a.startFlashTitleTimer(d)}}(this),1e3),this.isMinimized()&&c("#lc_chat_layout").addClass(this.blinkStyle()).find("#lc_chat_title").html(d)},e.prototype.cancelFlashTitleTimer=function(){clearInterval(this.titleTimer),this.titleTimer=null},e.prototype.startFlashTitleTimer=function(a){document.title=document.title===this.pageTitle?a:this.pageTitle,b.MainView.pageActive&&(document.title=this.pageTitle,this.cancelFlashTitleTimer())},e.prototype.endChat=function(){var a;return a={siteId:this.widget.siteId,userId:this.chat.agentId,username:this.chat.getAgentName(),chatId:this.chat.id,type:"visitor",participantId:this.visitor.getId(),fromVisitor:!0,url:this.widget.siteUrl,closeByVistior:!0},this.closeChat(a)},e.prototype.isChatInProgress=function(){return this.chat.isActive()&&!this.chat.closed?(c("#lc_chat_layout").addClass("lc-active"),this.enableClose()):(c("#lc_chat_layout").removeClass("lc-active"),this.disableClose())},e.prototype.resetChatView=function(){this.stopMoreWaitingTimer(),this.stopNonAvailabilityTimer(),this.stopAgentDisconnectTimer(),this.stopAgentNetworkDisconnectTimer(),b.ChatView=new e},e.prototype.isSmallWindow=function(){return c(window).width()<720},e.prototype.triggerEvent=function(a,b){var c;window.Event&&document.dispatchEvent&&(c=document.createEvent("CustomEvent"),c.initCustomEvent(a,!1,!0,b),document.dispatchEvent(c))},e}(),b.ChatView=new e}(window.livechat)}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};!function(b){var c,d,e,f;d=b.Constants,c=b.jQuery,f=b._,e=function(){function e(){this.widget=b.Widget,this.visitor=b.Visitor,this.chat=b.Chat,this.sound=b.Sound,this.chatView=b.ChatView,this.messageSent=!1,this.chatId=null}return e.prototype.render=function(a){var d;this.widget.offlineChat=!0,window.LIVECHAT_SUPPORT||c("#lc-close").addClass("hide"),c("#lc_chat_layout").removeClass("lc-prechat lc-chat lc-offline").addClass("lc-offline"),d={nonAvailabilityMessage:this.widget.nonAvailabilityMessage,fields:this.widget.offlineChatFields},this.chat&&this.chat.cachedPing&&this.chat.cachedPing.msg&&this.chat.cachedPing.msg.length?d.msg=this.chat.cachedPing.msg.join("\n"):d.msg="",c("#lc_chat_layout #lc_chat_window").before(f.template(b.templates.offline,d)),this.chatView.setTitle(this.widget.offlineChatSettings.messages.title),this.registerWidgetDOMEvents(),this.chat.missed&&this.startOfflineSubmitTimer()},e.prototype.registerWidgetDOMEvents=function(){return c("#lc_offline_submit").on("click",function(a){return function(){a.createOfflineChat()}}(this))},e.prototype.startOfflineSubmitTimer=function(){var a,b;this.offlineSubmitTimer||(b=0,a=this.chat.getCachedPing(),a&&(b=(new Date).getTime()-(a.pingCreatedAt+2*d.TIME.WAIT_MESSAGE)),this.offlineSubmitTimer=setTimeout(function(a){return function(){a.offlineSubmitTimer&&(a.sendOfflineChatEvent(null,!1),a.chat.removeCachedPing())}}(this),d.TIME.MISSED_CHAT_FORM-b))},e.prototype.sendOfflineChatEvent=function(a,d,e){var f;f=this.chatView.getVisitorDetails(),f.widgetId=this.widget.id,f.siteId=this.widget.siteId,f.id=this.visitor.getId(),f.chatType=this.chat.missed?"missed":"offline",f.createTicket=d,this.messageSent&&this.chatId&&(f.chatId=this.chatId),this.messageSent=!0,f.message=a||void 0,c.ajax({type:"POST",url:this.widget.nodeUrl+"/visitors/missedChat",data:f,dataType:"json",cache:!1,context:this,success:function(a){var c;return this.chat.active=!1,(null!=a&&null!=(c=a.data)?c.chatId:void 0)&&(this.chatId=a.data.chatId),b.client&&b.client.primary&&b.client.primary.pushToVisitorTabs("force disconnect",{force_disconnect:!0}),e(!0)},error:function(a,b,c){return window.console&&console.log&&console.log("error getting ",c,", responseText: ",a.responseText),e(!1,a.responseText)}})},e.prototype.createOfflineChat=function(){var a;this.validateOfflineForm()&&(this.saveOfflineFormFields(),this.chat.removeCachedPing(),this.stopOfflineSubmitTimer(),a=c("#lc_chat_offline_textarea").val(),this.sendOfflineChatEvent(a,!0,function(a){return function(b,c){return b?a.showThanksMessage():a.showErrorMessage(c)}}(this)))},e.prototype.validateOfflineForm=function(){var a,d,e,f,g,h,i,j,k,l,m;for(f={},h="#lc_offline_chat_form input, #lc_offline_chat_form textarea",g="lc_chat_offline_",j=!0,m=c(h),k=0,l=m.length;k<l;k++)if(a=m[k],a=c(a),e=a.attr("id").replace(g,""),i=c.trim(a.val()),f[e]=b.MainView.escapeHtml(i),d=this.widget.offlineChatFields[e],d.value=b.MainView.escapeHtml(i),!d.isValid()){a.addClass("lc-input-error"),j=!1;break}return j},e.prototype.saveOfflineFormFields=function(){var b,c,d,e,f,g;g=["textarea"],e=this.widget.offlineChatFields;for(c in e)b=e[c],f=b.name,a.call(g,f)<0&&(d="set"+b.name.charAt(0).toUpperCase()+b.name.substr(1).toLowerCase(),this.visitor[d].call(this.visitor,b.value))},e.prototype.stopOfflineSubmitTimer=function(){window.clearTimeout(this.offlineSubmitTimer=null)},e.prototype.showThanksMessage=function(){var a,b,d;b=c("#lc_chat_layout"),a=c("#lc_chat_header"),d=this.widget.offlineChatSettings.messages,c("#lc_chat_title").html(d.thank_header),c("#lc_chat_container").html("<p class='lc-offline-message'>"+d.thank+"<p>"),b.addClass("lc-thank-message"),c(".lc-thank-message").css("height",c(".lc-offline-message").outerHeight()+a.outerHeight()+"px")},e.prototype.showErrorMessage=function(a){var b,d,e,f;a=JSON.parse(a),b=a.message,e=c("#lc_chat_layout"),d=c("#lc_chat_header"),f=this.widget.offlineChatSettings.messages,c("#lc_chat_title").html(f.thank_header),c("#lc_chat_container").html("<p class='lc-offline-message'>"+b+"<p>"),e.addClass("lc-thank-message"),c(".lc-thank-message").css("height",c(".lc-offline-message").outerHeight()+d.outerHeight()+"px")},e.prototype.resetOfflineView=function(){this.stopOfflineSubmitTimer(),b.OfflineView=new e},e}(),b.OfflineView=new e}(window.livechat)}.call(this),function(){!function(a){var b,c,d;c=a.Constants,b=a.jQuery,a._,d=function(){function d(){this.visitor=a.Visitor,this.cache=a.Cache,this.chatView=a.ChatView,this.mainView=a.MainView,this.widget=a.Widget,this.tabId=this.generateTabId(),window.addEventListener("storage",this.message_receive,!1)}return d.prototype.initialize=function(){var c,d,e;b("html").addClass("lc-cb-container-vi"),OneClickCbUtils.setCallback(function(c){return function(c,d){switch(d){case"control transfer complete":return b("html").addClass("lc-cb-controlling-vi");case"Agent has given the control to you.":return b("html").removeClass("lc-cb-controlling-vi");case"control transferred to agent":case"Agent has taken the control back.":return b("html").addClass("lc-cb-controlling-vi");case"cbStop":return a.CoBrowseView.coBrowseStopped()}}}()),OneClickCbUtils.isCobrowseActive()&&(c=new Date,e=c.getTime(),d="true"+e,this.setLocalStorage("cb_initiate",d),this.cobrowsingStart("cobrowsing is on"),OneClickCbUtils.master.cbMaster||b("html").addClass("lc-cb-controlling-vi")),"true"===this.getLocalStorage("CBSessionRequest")?this.requestCoBrowsingSession():"true"===sessionStorage.getItem("CBControlRequest")&&b("html").addClass("lc-cb-notify-vi ").removeClass("lc-cb-default-vi ")},d.prototype.requestCoBrowsingSession=function(d){var e;if(!this.unsupportedProtocol(d)&&(d&&d.location_protocol&&this.cache.setItem("livechat_cb_agent_protocol",d.location_protocol),!OneClickCbUtils.isCobrowseActive()&&!this.isAgentBusy()))return b("html").addClass("lc-cb-container-vi lc-cb-active-vi lc-cb-request-vi"),this.setLocalStorage("CBSessionRequest","true"),d&&d.id&&this.setLocalStorage("CBSessionRequestChatId",d.id),e=0,null!==this.getLocalStorage("CBVisitorReqStartTime")&&0!==this.getLocalStorage("CBVisitorReqStartTime")?e=Date.now()-this.getLocalStorage("CBVisitorReqStartTime"):this.setLocalStorage("CBVisitorReqStartTime",Date.now()),e=c.TIME.CB_REQ_TIMEOUT-e,e>0?this.cbTimerHandle=window.setTimeout(this.clearReq,e):(b("html").removeClass("lc-cb-active-vi lc-cb-request-vi"),a.CoBrowseView.setLocalStorage("CBSessionRequest","false"),this.setLocalStorage("CBVisitorReqStartTime",0)),this.disableCobrowsingButton()},d.prototype.clearReq=function(){var c;a.CoBrowseView.setLocalStorage("CBVisitorReqStartTime",0),OneClickCbUtils.isCobrowseActive()||(a.CoBrowseView.cbTimerHandle&&window.clearInterval(a.CoBrowseView.cbTimerHandle),b("html").removeClass("lc-cb-active-vi lc-cb-request-vi"),a.CoBrowseView.setLocalStorage("CBSessionRequest","false"),c={id:a.CoBrowseView.chatView.chat.id,userName:a.CoBrowseView.visitor.getName()||a.CoBrowseView.visitor.getId(),agentId:a.CoBrowseView.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),a.client.pushToServer("cobrowse session timeout",c))},d.prototype.setLocalStorage=function(a,b){var c;if(this.getLocalStorage(a)!==b)return c={id:this.tabId,value:b},c=JSON.stringify(c),this.cache.setItem(a,c)},d.prototype.getLocalStorage=function(a){var b,c,d;try{if(b=this.cache.getItem(a))return c=JSON.parse(b),c.value}catch(e){d=e,console.log("parsing failed with error:",d)}return null},d.prototype.generateTabId=function(){var a;return a=OneClickCbUtils.tabId?OneClickCbUtils.tabId:OneClickCbUtils.generateId(),OneClickCbUtils.tabId=a,a},d.prototype.unsupportedProtocol=function(b){var c,d;return d=void 0!==b&&"https:"===b.location_protocol&&b.location_protocol!==window.location.protocol,d&&(c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),this.setLocalStorage("CBSessionRequest","false"),a.client.pushToServer("cobrowse upsupported protocol",c)),d},d.prototype.isAgentBusy=function(){var b,c;return b="true"===sessionStorage.getItem("CBActive")||"PENDING"===sessionStorage.getItem("CBRequest"),b&&(c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),this.setLocalStorage("CBSessionRequest","false"),a.client.pushToServer("cobrowse agent busy",c)),b},d.prototype.cobrowsingRequestAccepted=function(){return this.chatView.addNotification(livechat.defaultMessages.cobrowsing_start_msg),this.cobrowsingStart(),this.sendCoBrowseLink(this.getCobrowseLink()),b("html").removeClass("lc-cb-request-vi"),b("html").addClass("lc-cb-default-vi lc-cb-controlling-vi"),createCanvas("cb-block-canvas","99990","block"),chatjQuery("#cb-block-canvas").show(),this.setLocalStorage("CBSessionRequest","false")},d.prototype.cobrowsingRequestDenied=function(){return this.coBrowseSessionRejected(),b("html").removeClass("lc-cb-active-vi lc-cb-request-vi lc-cb-controlling-vi"),this.enableCobrowsingButton()},d.prototype.cobrowsingStart=function(){var a,c,d,e,f,g;return c=this.visitor.name||this.cache.getItem("livechat_vname"),this.chatView.agentName||this.cache.getItem("livechat_agent_name"),d="visitor",g=0,f=this.widget.siteId,a=this.getLocalStorage("CBSessionRequestChatId")||this.chatView.chat.id,e=sessionStorage.getItem("cbSdata")||this.widget.sessionHash,OneClickCbUtils.cobrowsingStart(c,d,g,e,f,a),OneClickCbUtils.callBack("info","started"),b("html").addClass("lc-cb-container-vi lc-cb-active-vi lc-cb-default-vi "),this.disableCobrowsingButton()},d.prototype.cobrowsingEnd=function(a){if("true"===this.getLocalStorage("CBSessionRequest")&&this.cobrowsingRequestDenied(),OneClickCbUtils.isCobrowseActive())return OneClickCbUtils.cobrowsingEnd(),this.coBrowseStopped(a)},d.prototype.getCobrowseLink=function(){return OneClickCbUtils.getCobrowseLink()},d.prototype.takeControl=function(){OneClickCbUtils.takeControl()?alert("now you are in control of page"):alert("Sorry, you are not master or cobrowsing hasn't been started yet")},d.prototype.giveControl=function(){OneClickCbUtils.giveControl()?OneClickCbUtils.callBack("info","GIVE CONTROL"):OneClickCbUtils.callBack("info","CONTROL GIVEN")},d.prototype.sendCoBrowseLink=function(a){return this.coBrowseStarted(a)},d.prototype.coBrowseStarted=function(b){var c;return c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,agentId:this.chatView.chat.agentId,actualCreatedAt:(new Date).toUTCString(),signal:"started",roomName:OneClickCbUtils.getRoom(),coBrowsingURL:b},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),a.client.pushToServer("cobrowse started",c)},d.prototype.coBrowseStopped=function(b){var c;return this.cleanUpView(),this.enableCobrowsingButton(),c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),void 0!==b&&void 0!==b.closeEvent||this.chatView.addNotification(livechat.defaultMessages.cobrowsing_stop_msg),a.client.pushToServer("cobrowse stopped",c)},d.prototype.cleanUpView=function(){return sessionStorage.removeItem("CBControlRequest"),b("html").removeClass("lc-cb-active-vi lc-cb-default-vi lc-cb-request-vi lc-cb-controlling-vi lc-cb-notify-vi")},d.prototype.coBrowseSessionRejected=function(){var b;return b={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(b.socket=a.client.chat_socket.io.engine.id),this.setLocalStorage("CBSessionRequest","false"),a.client.pushToServer("cobrowse session rejected",b)},d.prototype.coBrowsingRequestCancelled=function(){var c;return b("html").removeClass("lc-cb-active-vi lc-cb-request-vi lc-cb-controlling-vi"),this.enableCobrowsingButton(),c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),this.chatView.addNotification(livechat.defaultMessages.cobrowsing_cancel_visitor_msg),this.setLocalStorage("CBSessionRequest","false"),a.client.pushToServer("cobrowse request cancelled",c)},d.prototype.coBrowseControlRequest=function(){if(OneClickCbUtils.isCobrowseActive())return sessionStorage.setItem("CBControlRequest",!0),b("html").addClass("lc-cb-notify-vi ").removeClass("lc-cb-default-vi ")},d.prototype.denyCBSessionControl=function(){var c;return b("html").removeClass("lc-cb-notify-vi ").addClass("lc-cb-default-vi "),sessionStorage.removeItem("CBControlRequest"),c={id:this.chatView.chat.id,userName:this.visitor.getName()||this.visitor.getId(),agentId:this.chatView.chat.agentId,photo:"/images/fillers/profile_blank_thumb.gif",inConversation:a.fc_inConversation,actualCreatedAt:(new Date).toUTCString()},a.client.chat_socket&&(c.socket=a.client.chat_socket.io.engine.id),a.client.pushToServer("cobrowse control rejected",c)},d.prototype.allowRequestedControl=function(){return b("html").removeClass("lc-cb-notify-vi ").addClass("lc-cb-default-vi "),sessionStorage.removeItem("CBControlRequest"),this.giveControl()},d.prototype.parseEvent=function(b){var c,d,e;try{return e=a.Cache.decode(b),d=JSON.parse(e),d?d.id===a.CoBrowseView.tabId?"same_tab":d.value:"null"}catch(f){return c=f,console.log("livechat error:",c),"null"}},d.prototype.message_receive=function(c){var d,e,f,g,h,i;if("CBSessionRequest"===c.key)"null"!==(e=a.CoBrowseView.parseEvent(c.newValue))&&"false"!==e||b("html").removeClass("lc-cb-active-vi lc-cb-request-vi lc-cb-controlling-vi");else if("livechat_support"===c.key){if(g=a.CoBrowseView.parseEvent(c.newValue),h=a.CoBrowseView.parseEvent(c.oldValue),"true"===g)return void a.MainView.render();"false"!==g&&"null"!==g||"true"!==h&&"same_tab"!==h||(a.CoBrowseView.cobrowsingEnd(),a.ChatView.endChat())}else if("cb_initiate"===c.key){if("same_tab"!==(e=a.CoBrowseView.parseEvent(c.newValue))&&OneClickCbUtils.isCobrowseActive())return d=new Date,i=d.getTime(),f="true"+i,a.CoBrowseView.setLocalStorage("cb_initiate_stop",f)}else if("cb_initiate_stop"===c.key&&"same_tab"!==(e=a.CoBrowseView.parseEvent(c.newValue)))return a.CoBrowseView.resetCoBrowsing()},d.prototype.resetCoBrowsing=function(){if(OneClickCbUtils.isCobrowseActive())return OneClickCbUtils.cleanUpSession(),b("html").removeClass("lc-cb-active-vi lc-cb-controlling-vi lc-cb-default-vi"),this.enableCobrowsingButton()},d.prototype.disableCobrowsingButton=function(){window.LIVECHAT_SUPPORT&&b(".lc-cb-btn").addClass("disabled ")},d.prototype.enableCobrowsingButton=function(){if(window.LIVECHAT_SUPPORT)return b(".lc-cb-btn").removeClass("disabled ")},d.prototype.resetCoBrowseView=function(){a.CoBrowseView=new d},d}(),a.CoBrowseView=new d}(window.livechat)}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};!function(b){var c,d,e;b.Constants,c=b.jQuery,e=b._,d=function(){function d(){this.visitor=b.Visitor,this.widget=b.Widget,this.chat=b.Chat,this.chatView=b.ChatView,this.coBrowseView=b.CoBrowseView,this.offlineView=b.OfflineView,this.pageActive=!0,this.isMobileBrowser=!1,this.mainLayout="#lc_chat_layout",this.header="#lc_chat_header",this.container="#lc_chat_container",this.customWidget="#chat-widget",this.chatWindow="#lc_chat_window",this.close="#lc-close",this.closeConform="#lc-ec-ok",this.closeCanel="#lc-ec-cancel",this.endChatPopUp=".lc-end-chat"}return d.prototype.render=function(){this.visitor.initialize(),this.widget.initialize(),this.chat.initialize(),this.checkMobileBrowser(),this.chatView.initialize(),this.teamstatus(),this.coBrowseView.initialize(),this.triggerFDLCWidgetLoaded()},d.prototype.renderAgentSupport=function(){return"true"===b.CoBrowseView.getLocalStorage("livechat_support")?void this.chatView.expand(!1):(b.CoBrowseView.setLocalStorage("livechat_support","true"),this.render())},d.prototype.checkMobileBrowser=function(){var a;return a=navigator.userAgent||navigator.vendor||window.opera,this.isMobileBrowser=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)),this.isMobileBrowser},d.prototype.teamstatus=function(a){var d;d="siteId="+this.widget.siteId+"&vid="+this.visitor.getId()+"&c=fd",this.widget.id&&(d=d+"&widget_id="+this.widget.id),c.ajax({type:"GET",url:this.widget.nodeUrl+"/visitors/teamstatus",data:d,dataType:"json",cache:!1,success:function(a){return function(c){var d,e,f;if(!c||c.data&&c.data.disabledOrBlocked)return void console.log("Chat Disabled or Visitor blocked!");e=c.data,e.isVisitorLimitReached&&(a.widget.visitorLimitReached=!0),e.setting&&a.widget.updateSettings(e.setting,e.teamstatus),e.recentChatDetails&&a.chat.setRecentChatDetails(e.recentChatDetails),a.visitor.recentChatId=null!=(d=e.recentChatDetails)?d.chatId:void 0,e.isReturnVisitor&&!a.visitor.getVisitCount()&&a.visitor.incrementVisitCount(),a.widget.hideWidget?(a.hideCustomChatWidget(),a.hideNormalChatWidget()):(a.renderWidget(),a.registerWidgetDOMEvents(),a.customChatWidgetExists()&&a.chat.isInActive()&&a.hideNormalChatWidget(),a.widget.offlineChat?(a.offlineView.render(!1),window.LIVECHAT_SUPPORT&&(a.chatView.expand(!1),a.chatView.showChatClose())):(a.registerWindowDOMEvents(),a.registerCoBrowseDOMEvents(),window.LIVECHAT_SUPPORT||(a.renderPreChatForm(),a.registerPreChatFormDOMEvents()),a.registerTextContainerDOMEvents(),b.client=new b._Client(e.primary,e.auxiliary,e.appKeys),a.chat.isActive()||a.chat.cachedPing||window.LIVECHAT_SUPPORT?(a.isMobileBrowser?a.chatView.collapse():(a.chat.ongoing||a.chat.cachedPing||window.LIVECHAT_SUPPORT)&&a.chatView.expand(!1),b.client.connect(),window.LIVECHAT_SUPPORT&&a.chatView.showChatClose()):(a.startProactiveTimer(),a.triggerEventDocument(),f=a.widget.sitesToSkipAutoConnect(),
-1===f.indexOf(a.widget.siteId)&&(e.isVisitorLimitReached||a.visitor.startAutoConnectTimer()))))}}(this),error:function(){window.console&&console.log&&console.log("Error while fetching agent's availability status")}})},d.prototype.startProactiveTimer=function(){this.widget.proactiveChat&&this.widget.proactiveTime>-1&&(this.proactiveTimer=setTimeout(function(a){return function(){a.chatView.isMinimized()&&!a.chatView.forceMinimized&&(c("#lc_chat_layout").show(),a.chat.proactive=!0,a.chatView.expand(!1))}}(this),1e3*this.widget.proactiveTime))},d.prototype.hideCustomChatWidget=function(){c(this.customWidget).hide()},d.prototype.customChatWidgetExists=function(){return!!c(this.customWidget).length},d.prototype.hideNormalChatWidget=function(){c(this.mainLayout).hide()},d.prototype.renderWidget=function(){var a;a={widgetPosition:this.widgetPosition(),widgetColors:this.widgetColors(),widgetTitle:this.widgetTitle(),loaderMessage:this.widget.loaderMessage,messageBoxPlaceholder:this.widget.messageBoxPlaceholder},c("body").append(e.template(b.templates.chat,a))},d.prototype.widgetPosition=function(){var a,b,d,e;return d=this.widget.windowOffset,e="Bottom Left"===this.widget.windowPosition?"left:":"right:",a=this.mainLayout+" {"+e+d+"px} ",c("head").append("<style type='text/css'>"+a+"</style>"),b="Bottom Left"===this.widget.windowPosition?"lc-align-left":"lc-align-right",this.isMobileBrowser?b:""},d.prototype.widgetColors=function(){var a,b,d,e,f,g,h;return e=this.widget.windowColor,b=this.convert2Hex(e,30),h=parseInt(e.substr(1,2),16)+parseInt(e.substr(3,2),16)+parseInt(e.substr(5,2),16),h>400&&(a="lc-dark-icon"),f=h>400?f="#000000":"#FFFFFF",g=" "+this.mainLayout+" "+this.header+" {color:"+f+";background-color:"+e+"} ",d=" "+this.mainLayout+" "+this.container+"  {border-color: "+b+"} ",c("head").append("<style type='text/css'> "+g+" /*"+d+"*/ </style>"),{classes:a}},d.prototype.widgetTitle=function(){return this.chat.active&&!this.chat.closed?this.chat.getAgentName():this.widget.title},d.prototype.triggerCookieTest=function(){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname),c("#fc_chat_layout, #lc_chat_layout").append('<iframe id="testCookie" src='+window.livechat.Widget.nodeUrl+"/cookieTest?origin="+encodeURIComponent(window.location.origin)+' style="display:none"></iframe>'),window.addEventListener("message",function(a){var b;livechat.Widget.nodeUrl&&(b=window.livechat.Widget.nodeUrl.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n]+)/im),a.origin===b[0]&&(window.livechat.cookieTest=a.data))},!1)},d.prototype.triggerEventDocument=function(){var a;window.Event&&document.dispatchEvent&&(a=document.createEvent("CustomEvent"),a.initCustomEvent("lc_widget_loaded",!1,!0,!1),document.dispatchEvent(a))},d.prototype.triggerFDLCWidgetLoaded=function(){var a;window.Event&&document.dispatchEvent&&(a=document.createEvent("CustomEvent"),a.initCustomEvent("fd_lc_widget_loaded",!1,!0,!1),document.dispatchEvent(a))},d.prototype.convert2Hex=function(a,b){var c,d,e;return a=a.replace("#",""),e=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),c=parseInt(a.substring(4,6),16),b/=100,"rgba("+e+","+d+","+c+","+b+")"},d.prototype.renderPreChatForm=function(){var a,d;a=c(this.mainLayout),this.canShowPreform()&&(d={preChatMessage:this.widget.preChatMessage,fields:this.widget.preChatFields},a.find(this.chatWindow).before(e.template(b.templates.prechat,d)))},d.prototype.startChat=function(){this.validateForm()&&(this.saveFormFields(),this.chatView.expand(!1),this.chatView.sendMessageOrPing({detailsFromPreChatForm:!0}))},d.prototype.validateForm=function(){var a,b,d,e,f,g,h,i,j,k,l;for(e={},g="#lc_prechat_form input, #lc_prechat_form select",f="lc_chat_",i=!0,l=c(g),j=0,k=l.length;j<k;j++)if(a=l[j],a=c(a),d=a.attr("id").replace(f,""),h=c.trim(a.val()),e[d]=h,b=this.widget.preChatFields[d],b.value=h,!b.isValid()){"dropdown"===d?a.parent().addClass("lc-input-error"):a.addClass("lc-input-error"),i=!1;break}return i},d.prototype.saveFormFields=function(){var b,c,d,e,f,g,h,i;i=["textarea"],h=["name","email"],c=this.widget.offlineChat?this.widget.offlineChatFields:this.widget.preChatFields;for(d in c)b=c[d],f=b.name,a.call(i,f)<0&&b.value&&(e="set"+b.name.charAt(0).toUpperCase()+b.name.substr(1).toLowerCase(),this.visitor[e].call(this.visitor,this.escapeHtml(b.value)),g=b.name,a.call(h,g)>=0&&(this.widget.offlineChat?this.widget.preChatFields[d].value=b.value:this.widget.offlineChatFields[d].value=b.value))},d.prototype.registerPreChatFormDOMEvents=function(){return c("#lc_prechat_form :input").on("keydown",function(a){return function(b){c(b.target).removeClass("lc-input-error"),13!==b.keyCode||b.shiftKey||(b.preventDefault(),a.startChat())}}(this)),c("#lc_prechat_submit").on("click",function(a){return function(){a.startChat()}}(this)),c("#lc_prechat_form").on("change","select",function(a){return function(a){var b,d;d=c(a.target),d.parent().removeClass("lc-input-error"),b=d.val(),"-1"!==b&&-1!==b||(b="..."),d.prev().html(b)}}()),c("#lc_chat_message_window").on("mousewheel",function(a){return function(a){var b;if(0===(b=a.originalEvent.wheelDelta||-a.originalEvent.detail))return!1;c("#lc_chat_message_window").get(0).scrollTop+=30*(b<0?1:-1),a.preventDefault()}}())},d.prototype.registerCoBrowseDOMEvents=function(){return c(".lc-cb-stop-vi").on("click",function(a){return function(){a.coBrowseView.cobrowsingEnd()}}(this)),c(".lc-cb-take-control-vi").on("click",function(a){return function(){a.coBrowseView.takeControl()}}(this)),c(".lc-cb-give-control-vi").on("click",function(a){return function(){a.coBrowseView.giveControl()}}(this)),c("#deny_cb_session_vi").on("click",function(a){return function(){a.coBrowseView.cobrowsingRequestDenied()}}(this)),c("#allow_cb_session_vi").on("click",function(a){return function(){a.coBrowseView.cobrowsingRequestAccepted()}}(this)),c(".lc-cb-button-allow-vi").on("click",function(a){return function(){a.coBrowseView.allowRequestedControl()}}(this)),c(".lc-cb-button-deny-vi").on("click",function(a){return function(){a.coBrowseView.denyCBSessionControl()}}(this))},d.prototype.registerTextContainerDOMEvents=function(){var a;a=c("#lc_chat_input_container"),a.on("keydown",function(b){return function(d){var e;13!==d.keyCode||d.shiftKey?b.isValidKey(d)&&b.chat.isActive()&&b.chatView.triggerTyping():(d.preventDefault(),e=c.trim(a.val()),e&&(b.chatView.sendMessageOrPing({msg:e}),a.val("")),self.isMobileBrowser&&a.blur())}}(this)),c("#lc_button_send").on("click",function(b){return function(d){var e;a=c("#lc_chat_input_container"),(e=c.trim(a.val()))&&(b.chatView.sendMessageOrPing({msg:e}),a.val(""))}}(this))},d.prototype.registerWidgetDOMEvents=function(){c(window).focus(function(a){return function(){a.pageActive=!0}}(this)).blur(function(a){return function(){a.pageActive=!1}}(this)),c(this.header).on("click",function(a){return function(b){a.chatView.isMinimized()?(a.chatView.forceMinimized=!1,a.chatView.expand(a.canShowPreform())):(a.chatView.forceMinimized=!0,a.chatView.collapse())}}(this)),c(this.close).on("click",function(a){return function(d){return d.stopPropagation(),a.chatView.isMinimized()&&a.chatView.expand(),window.LIVECHAT_SUPPORT&&b.Widget.offlineChat&&c(".lc-offline-message").is(":visible")?a.chatView.endChat():(c(a.endChatPopUp+" p").html(a.widget.endChatConfirmMessage),c(a.endChatPopUp).removeClass("hide"))}}(this)),c(this.closeCanel).on("click",function(a){return function(b){return c(a.endChatPopUp).addClass("hide"),c(a.close).removeAttr("disabled",!0),c(a.close).css("pointer-events","auto")}}(this)),c(this.closeConform).on("click",function(a){return function(b){return a.coBrowseView.cobrowsingEnd(),a.chatView.endChat(),a.chatView.collapse()}}(this)),c(this.customWidget).click(function(a){return function(){c(a.mainLayout).is(":visible")||(c(a.mainLayout).toggle(),a.chatView.forceMinimized=!1,a.chatView.expand(a.canShowPreform()))}}(this))},d.prototype.registerWindowDOMEvents=function(){c(window).on("beforeunload",function(a){return function(){b.client.isConnected()&&(b.client.pushToServer("visitor unload",{chatId:a.chat.id,pageUnload:!0,agentId:a.chat.agentId}),a.chat.isActive()&&a.chatView.chatExpireTimerOn(null,!0),b.client.disconnect()),window.LIVECHAT_SUPPORT&&b.Cache.removeItem("livechat_vid")}}(this))},d.prototype.isValidKey=function(a){var b,d;return b=!0,d=[9,16,17,18,27,37,38,39,40,224],(""===c(a.target).val()||a.metaKey||a.ctrlKey||d.indexOf(a.keyCode)>=0)&&(b=!1),b},d.prototype.escapeHtml=function(a){var b;return b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},String(a).replace(/[&<>"']/g,function(a){return b[a]})},d.prototype.canShowPreform=function(){return this.widget.preChatForm&&this.chat.isInActive()&&!this.chat.pingSent},d.prototype.resetMainView=function(){b.client&&b.client.primary&&b.client.primary.reset(),b.MainView=new d},d}(),b.MainView=new d}(window.livechat)}.call(this),function(){!function(a){a.JSON3=JSON3.noConflict(),a.MainView.render()}(window.livechat)}.call(this);